<apex:page standardController="EBC_Template__c" extensions="vfIECEBC_TemplateEdit" applyHtmlTag="false" applyBodyTag="false" sidebar="false" showheader="false" standardStylesheets="false" language="en" docType="html-5.0">
	<apex:composition template="IECEBC_Layout">
        <apex:define name="pageHeadAdditions"> 
            <!-- Start of Page <head> -->
            <title>eBroadcast Template - Design</title>
            <style type="text/css">
            	.plugin-container {}
	            	.plugin-container iframe { display: none; }
	            	.plugin-container div#notice {
                		display: block;
                		line-height: 32px;
                	}
	            	.plugin-container div#notice img {margin-right: 20px;}
            	.plugin-container.loaded {}
	            	.plugin-container.loaded iframe { display: block !important; }
	            	.plugin-container.loaded div#notice { display: none !important; }
            </style>
            <!-- End of Page </head> -->
        </apex:define>
        <apex:define name="pageScriptAdditions">
            <!-- If any page specific .js, add them here -->
        </apex:define>
        <apex:define name="pageContent">
            <!-- Start of Page Content -->
            <main class="main-content">
                <div class="inner-wrapper">
                   
                        <div class="plugin-container" style="border: 1px solid #ccc; padding: 20px;">
                            <iframe id="IECEBC_MosaicoEditor" src="/iec/IECEBC_MosaicoEditor?Id={!EBC_Template__c.Id}" frameborder="false" scrolling="true" width="100%" height="600"></iframe>
                            <div id="notice">
                                <img src="/img/loading32.gif" align="left" /> Loading Editor. If you have problem to see the editor, please <a href="/iec/IECEBC_MosaicoEditor?Id={!EBC_Template__c.Id}">click here</a>.
                            </div>
                        </div>
                        <script type="text/javascript">
                        var isCallbackAvailable = false;
                        function onEditorLoaded() {
                            var isLoaded = false;
                            try {
                                if ('function' == typeof(document.getElementById('IECEBC_MosaicoEditor').contentWindow.mosaicoSave.execute)) {
                                    jQuery('.plugin-container').addClass('loaded');
                                    isCallbackAvailable = true;
                                }
                            } catch(e) { }
                            
                            if (!isCallbackAvailable) {
                                jQuery('#notice').html('Your browser cannot load the embeded editor. Please open it full screen by following <a href="/iec/IECEBC_MosaicoEditor?Id={!EBC_Template__c.Id}">click here</a>');
                            }
                        }
                        </script>
                    <apex:form >
                        <div class="footer-actions text-right">
                            <ul class="list actions">
                                
                                <apex:outputText >
	                                <li><apex:commandLink action="{!previous}" value="Previous" styleClass="button" /></li>
                                </apex:outputText>
                                
                            </ul>
                        </div>
                    </apex:form>
                </div>
            </main>
            <!-- End of Page Content -->
        </apex:define>
    </apex:composition>
</apex:page>