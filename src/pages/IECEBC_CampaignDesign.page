<apex:page standardController="EBC_Campaign__c" extensions="vfIECEBC_Campaign" applyHtmlTag="false" applyBodyTag="false" sidebar="false" showheader="false" standardStylesheets="false" language="en" docType="html-5.0" action="{!pageLoad}">
	<apex:composition template="IECEBC_Layout">
        <apex:define name="pageHeadAdditions">
            <!-- Start of Page <head> -->
            <title>eBroadcast Campaign - Design</title>
            <!-- End of Page </head> -->
        </apex:define>
        <apex:define name="pageScriptAdditions">
            <!-- If any page specific .js, add them here -->
        </apex:define>
        <apex:define name="pageContent">
            <!-- Start of Page Content -->
            <main class="main-content">
                <div class="inner-wrapper">
                    <c:IECEBC_ProgressComponent currentStepNumber="{!currentStepNumber}" campaign="{!EBC_Campaign__c}" />
            
                    <h1 class="page-title">Design your campaign</h1>
                    
                        <div class="tab-container js-tabs">
                            <ul class="nav tabs">
                                <li class="active" data-target="#pane-1"><a href="#">Design</a></li>
                                <li data-target="#pane-2"><a href="#">Use your HTML code</a></li>
                            </ul>
                    
                            <div class="tab-content">
                                <div class="tab-pane is-open" id="pane-1">
                                    <div class="plugin-container" style="border: 1px solid #ccc; padding: 20px;">
                                        <iframe id="IECEBC_TemplateEditor" src="/iec/IECEBC_TemplateEditor" frameborder="false" scrolling="true" width="100%" height="600"></iframe>
                                        
                                        <script type="text/javascript">
                                        jQuery(window).load(function(){ document.getElementById("IECEBC_TemplateEditor").contentWindow.saveTemplate(''); });
                                        </script>
                                    </div>
                                </div>
                                <div class="tab-pane" id="pane-2">
                                    <div class="field-group textarea">
                                        <label>
                                            <span class="input-label">HTML code</span>
                                            <textarea class="user-input textarea" rows="10"></textarea>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    <apex:form >
                        <div class="footer-actions text-right">
                            <ul class="list actions">
                                <apex:outputText rendered="{!campaign.Is_Step4_Writable__c}">
	                                <li><apex:commandLink action="{!previous}" styleClass="button secondary" value="Previous" /></li>
                                </apex:outputText>
                                <apex:outputText rendered="{!campaign.Is_Step4_Writable__c}">
                                    <li><apex:commandLink onclick="document.getElementById('IECEBC_TemplateEditor').contentWindow.saveTemplate(''); location.href='/iec/iecebc_dashboard';" styleClass="button secondary" value="Save and Return to Dashboard" /></li>
                                </apex:outputText>
                                <apex:outputText rendered="{!campaign.Is_Step4_Writable__c}">
	                                <li><apex:commandLink action="{!next}" onclick="document.getElementById('IECEBC_TemplateEditor').contentWindow.saveTemplate(''); return false;" styleClass="button" value="Continue" /></li>
                                </apex:outputText>
                                <apex:outputText rendered="{!NOT(campaign.Is_Step4_Writable__c)}">
	                                <li><apex:commandLink action="{!previous}" value="Previous" styleClass="button secondary" /></li>
                                </apex:outputText>
                                <apex:outputText rendered="{!NOT(campaign.Is_Step4_Writable__c)}">
	                                <li><apex:commandLink action="{!next}" value="Next" styleClass="button" /></li>
                                </apex:outputText>
                            </ul>
                        </div>
                    </apex:form>
                </div>
            </main>
            <!-- End of Page Content -->
        </apex:define>
    </apex:composition>
</apex:page>