<apex:page controller="ISSP_ANG_RHC" cache="false" sidebar="false" showHeader="false" applyBodyTag="false" applyHtmlTag="false" standardStylesheets="false">
  <html>

  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
    <c:ISSP_Header></c:ISSP_Header>
    <c:iss_ap_css />
  </head>

  <body>
    <style>
      .section-header {
        background-color: rgb(43, 120, 228);
        color: white;
        line-height: 1.42857143;
        padding: 8px;
        vertical-align: top;
        border-top: 1px solid #ddd;
      }

      .section-header>i {
        color: black;
        margin-right: 5px;
      }

      main {
        background-color: white;
      }

      td>img {
        padding-bottom: 7px;
        padding-left: 5px;
      }

      i.check {
        color: green;
      }

      i.wrong {
        color: red;
      }

      #gaugeSection {
        padding-left: 0;
        text-align: center;
        font-size: 15px;
      }

      #gaugeSection > strong {
        margin-left: 15px;
      }

      .last-updated {
        display: block;
        width: 100%;
        text-align: center;
        color: rgb(121, 118, 111);
        font-size: 12px;
      }

      @media (max-width: 992px) {
        .fa-money {
          font-size: 200px;
        }
        .fa-credit-card-alt {
          font-size: 167px;
        }
        .fa-credit-card {
          font-size: 198px;
        }
        #gaugeSection > strong {
          margin-left: 25px;
          font-size: 20px;
        }
        .last-updated {
          font-size: 13px;
        }
      }
    </style>
    <main class="container">
      <c:ISSP_CustomNavigation />
      <div class="row">
        <section name="left-side" class="col-md-6 col-sm-12">
          <section name="remittance-holding" class="row">
            <header class="col-xs-12">
              <div class="section-header">
                <i class="fa fa-line-chart" aria-hidden="true"></i> <strong>{!$Label.ISSP_RHC_HUB}</strong>
              </div>
            </header>
            <section id="remittance-holding-table" class="col-md-8 col-sm-12">
              <table class="table">
                <tr>
                  <td>
                    <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> {!$ObjectType.ANG_RHC_Information__c.fields.ANG_RHC_Amount__c.label}
                    <apex:image value="/img/msg_icons/info16.png" html-data-html="true" html-data-placement="right" html-data-toggle="tooltip" />
                  </td>
                  <td>
                    {!remittanceFrequency.CurrencyIsoCode} 
                    <apex:outputText value="{0, number, ###,##0}">
                      <apex:param value="{!remittanceFrequency.ANG_RHC_Amount__c}"/>
                    </apex:outputText>
                  </td>
                </tr>
                <tr>
                  <td>
                    <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> {!$Label.ISSP_RHC_HUB_Current_Usage}
                    <apex:image value="/img/msg_icons/info16.png" html-data-html="true" html-data-placement="right" html-data-toggle="tooltip" />
                  </td>
                  <td>
                    {!remittanceFrequency.CurrencyIsoCode}
                    <apex:outputText value="{0, number, ###,##0}">
                      <apex:param value="{!remittanceFrequency.ANG_ConsumedRHC__c}"/>
                    </apex:outputText>
                  </td>
                </tr>
                <tr>
                  <td>
                    <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> {!$Label.ISSP_RHC_HUB_Percentage_Usage}
                    <apex:image value="/img/msg_icons/info16.png" html-data-html="true" html-data-placement="right" html-data-toggle="tooltip" />
                  </td>
                  <td>
                    <apex:outputText value="{0, number, 0}%">
                      <apex:param value="{!remittanceFrequency.ANG_ConsumedRHC_Percent__c}"/>
                    </apex:outputText>
                  </td>
                </tr>
                <tr>
                  <td>
                    <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> {!$Label.ISSP_RHC_HUB_Curr_Financial_Security}
                  </td>
                  <td>
                    {!remittanceFrequency.CurrencyIsoCode}
                    <apex:outputText value="{0, number, ###,##0}">
                      <apex:param value="{!remittanceFrequency.ANG_Financial_Security__c}"/>
                    </apex:outputText>
                  </td>
                  <td></td>
                </tr>
                <tr>
                  <td>
                    <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> {!$ObjectType.Account.fields.Remittance_frequency__c.label}
                  </td>
                  <td>{!contact.Account.Remittance_frequency__c}</td>
                  <td></td>
                </tr>
              </table>
            </section>
            <section id="gaugeSection" class="col-md-4 col-sm-12">
              <canvas id="percentageUsageGauge"></canvas>
              <strong>
                <apex:outputText value="{0, number, 0}%">
                  <apex:param value="{!remittanceFrequency.ANG_ConsumedRHC_Percent__c}"/>
                </apex:outputText>
              </strong>
              <span class="last-updated">
                <strong>{!$Label.ISSP_RHC_HUB_Last_Updated}</strong>
                <apex:outputText value="{0, date, EEE, d MMM yyyy}">
                  <apex:param value="{!remittanceFrequency.ANG_ConsumedRHC_Last_Update__c}" />
                </apex:outputText>
              </span>
            </section>
          </section>
          <div class="row">
            <div class="col-xs-12 text-center">
              <apex:outputLink value="/ISSP_AccountStatements?retURL=/ISSP_Homepage" rendered="{!hasRightAccessIceService}">{!$Label.ISSP_Account_Statements}</apex:outputLink>
              <apex:outputLink value="/ISSP_AvailableServices?MainNav=Services&subNav=Access&mid=M3S1" rendered="{!NOT(hasRightAccessIceService)}">Request access to {!$Label.ISSP_Account_Statements}</apex:outputLink>              
            </div>            
          </div>
          <div class="row">
            <br/>
          </div>

          <c:AFP_Component wrapperClass='{!afpWrapper}'/>
          
        </section>
        <section name="right-side" class="col-md-6 col-sm-12">
          <table class="table">
            <tr>
              <th class="section-header" colspan="2">
                <i class="fa fa-user-md" aria-hidden="true"></i> {!$Label.ISSP_RHC_HUB_RP}
              </th>
            </tr>
            <tr>
              <td>
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i><strong> {!$ObjectType.Account.fields.ANG_Accreditation_Model__c.Label} </strong>
                <apex:image value="/img/msg_icons/info16.png" html-data-html="true" html-data-placement="right" html-data-toggle="tooltip" />
              </td>
              <td>{! accreditationType}</td>
            </tr>
            <tr>
              <td>
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i><strong> {!$ObjectType.Account.fields.ANG_RiskStatus__c.Label} </strong>
                <apex:image value="/img/msg_icons/info16.png" html-data-html="true" html-data-placement="right" html-data-toggle="tooltip" /> {! riskStatus}
              </td>
              <td>B</td>
            </tr>
          </table>
        </section>
      </div>


      <c:ISSP_CustomFooter />
    </main>
    <script src="{!URLFOR($Resource.gaugeJS)}"></script>
    <script>
      (function gaugeScript() {
        "use strict";
        var opts = {
          angle: 0, // The span of the gauge arc
          lineWidth: 0.47, // The line thickness
          radiusScale: 1, // Relative radius
          pointer: {
            length: 0.6, // // Relative to gauge radius
            strokeWidth: 0.024, // The thickness
            color: '#000000' // Fill color
          },
          limitMax: true,     // If false, max value increases automatically if value > maxValue
          limitMin: true,     // If true, the min value of the gauge will be fixed
          colorStart: '#6FADCF',   // Colors
          colorStop: '#8FC0DA',    // just experiment with them
          strokeColor: '#E0E0E0',  // to see which ones work best for you
          generateGradient: true,
          highDpiSupport: true,     // High resolution support
          staticZones: [
            {strokeStyle: "#30B32D", min: 0, max: 50}, // Green
            {strokeStyle: "#FFA500", min: 50, max: 75}, // Orange
            {strokeStyle: "#F03E3E", min: 75, max: 100}  // Red
          ],
          staticLabels: {
            font: "11px Arial",  // Specifies font
            labels: [0, 50, 75, 100],  // Print labels at these values
            color: "#000000",  // Optional: Label text color
            fractionDigits: 0  // Optional: Numerical precision. 0=round off.
          },
        };
        var target = document.getElementById('percentageUsageGauge'); // your canvas element
        createGauge();

        var windowWidth;
        $( window ).resize(function() {
          windowWidth = $( window ).width();
          if (windowWidth <= 992) {
            opts.staticLabels.font = '15px Arial';
            createGauge(windowWidth);
            target.style.marginLeft = ((target.parentElement.offsetWidth - target.width) / 2) + 'px';
          } else if (windowWidth > 992) {
            opts.staticLabels.font = '11px Arial';
            createGauge(windowWidth);
          }
        });

        function setGaugeSize(windowWidth) {
          var canvasParentWidth = target.parentElement.offsetWidth;
          if (windowWidth > 992) {
            target.width = canvasParentWidth;
            target.height = canvasParentWidth * 0.5 ;
            target.style.marginLeft = '0px';
            target.parentElement.style.paddingTop = ((document.getElementById('remittance-holding-table').offsetHeight - target.parentElement.offsetHeight) /2) + 'px';
          } else {
            target.width = canvasParentWidth - 50;
            target.height = target.width * 0.5;
            target.style.marginLeft = ((canvasParentWidth - target.width) / 2) + 'px';
            target.parentElement.style.paddingTop = '0px';
          }
        }

        function createGauge(windowWidth) {
          setGaugeSize(windowWidth || $( window ).width());
          target.style.width = target.width + 'px';
          target.style.height = (target.height + 10) + 'px';
          var gauge = new Gauge(target).setOptions(opts);
          gauge.maxValue = 100;
          gauge.setMinValue(0);
          gauge.animationSpeed = 32;
          gauge.set({!remittanceFrequency.ANG_ConsumedRHC_Percent__c});
        }

      })();
      
    </script>
  </body>

  </html>
</apex:page>