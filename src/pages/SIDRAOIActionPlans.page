<apex:page standardcontroller="Operational_Improvements__c" extensions="SIDRAOIActionPlansController">
	<style>
		.fullLength {
			width: 98%;
		}
	</style>

	<script>
		function confirmDelete() {
			return confirm('Are you sure you want to delete this OI Action Plan?');
		}
	</script>

	<apex:form >

		<apex:PageMessages />

		<apex:pageBlock >

			<apex:pageBlockButtons location="top" >
				<apex:commandButton value="Save" action="{!Save}" rendered="{! isEditMode }" />
				<apex:commandButton value="Cancel" action="{!Cancel}" rendered="{! isEditMode }" />

				<apex:commandButton value="Edit" action="{!Edit}" rendered="{! NOT(isEditMode) }" />
				<apex:commandButton value="New OI Action Plan" action="{!addNewActionPlan}" rendered="{! NOT(isEditMode) }" />
			</apex:pageBlockButtons>

			<apex:pageBlockTable value="{! listOIActionPlans }" var="actionPlan" >

				<apex:column headerValue="">
					<apex:commandLink action="{!deleteLine}" onclick="return confirmDelete();"  value="Del" rendered="{! isEditMode }">
						<apex:param name="actionPlanIdToDelete" value="{!actionPlan.Id}" assignTo="{!actionPlanIdToDelete}"/>
					</apex:commandLink>
<!-- 					<apex:outputLink value="/{!oi.Id}" rendered="{! NOT(isEditMode) }" >View</apex:outputLink> -->
				</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Name.label}" >
						<apex:outputField value="{!actionPlan.Name}" rendered="{! NOT(isEditMode) }" />
						<apex:inputField value="{!actionPlan.Name}" rendered="{! isEditMode }" />
					</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Description__c.label}" >
						<apex:outputField value="{!actionPlan.Description__c}" rendered="{! NOT(isEditMode) }" />
						<apex:inputText styleclass="fullLength" value="{!actionPlan.Description__c}" rendered="{! isEditMode }" />
					</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Due_Date__c.label}" >
						<apex:outputField value="{!actionPlan.Due_Date__c}" rendered="{! NOT(isEditMode) }" />
						<apex:inputField value="{!actionPlan.Due_Date__c}" rendered="{! isEditMode }" />
					</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Closure_Date__c.label}" >
						<apex:outputField value="{!actionPlan.Closure_Date__c}" rendered="{! NOT(isEditMode) }" />
						<apex:inputField value="{!actionPlan.Closure_Date__c}" rendered="{! isEditMode }" />
					</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Action_Owner__c.label}" >
						<apex:outputField value="{!actionPlan.Action_Owner__c}" rendered="{! NOT(isEditMode) }" />
						<apex:inputField value="{!actionPlan.Action_Owner__c}" rendered="{! isEditMode }" />
					</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Comment__c.label}" >
						<apex:outputField value="{!actionPlan.Comment__c}" rendered="{! NOT(isEditMode) }" />
						<apex:inputText styleclass="fullLength" value="{!actionPlan.Comment__c}" rendered="{! isEditMode }" />
					</apex:column>

					<apex:column headerValue="{!$ObjectType.OI_Action_Plan__c.fields.Met_Due_Date__c.label}" >
						<apex:outputField value="{!actionPlan.Met_Due_Date__c}" rendered="{! NOT(isEditMode) }" />
						<apex:inputField value="{!actionPlan.Met_Due_Date__c}" rendered="{! isEditMode }" />
					</apex:column>

			</apex:pageBlockTable>

		</apex:pageBlock>
	</apex:form>
</apex:page>