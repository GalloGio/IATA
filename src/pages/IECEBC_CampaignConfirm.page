<apex:page standardController="EBC_Campaign__c" extensions="vfIECEBC_Campaign,vfIECEBC_Cart,vfIECEBC_CampaignConfirm"
           applyHtmlTag="false" applyBodyTag="false" sidebar="false" showheader="false" standardStylesheets="false" language="en" docType="html-5.0" action="{!pageLoad}">
    <apex:composition template="IECEBC_Layout">
        <apex:define name="pageHeadAdditions">
            <!-- Start of Page <head> -->
            <title>eBroadcast Campaign - Confirm</title>
            <!-- End of Page </head> -->
        </apex:define>
        <apex:define name="pageScriptAdditions">
            <!-- If any page specific .js, add them here -->
        </apex:define>
        <apex:define name="pageContent">
            <!-- Start of Page Content -->
            <main class="main-content">
                <div class="inner-wrapper">
                    <c:IECEBC_ProgressComponent currentStepNumber="{!currentStepNumber}" campaign="{!ebcCampaign}" />
                    
                    <h1 class="page-title">Confirm</h1>
                    
                    <div class="row row-payment">
                        <section class="columns main-container campaign-cost">
							<apex:form id="campaignCostForm" >
                                <apex:actionFunction action="{!clickPayWithEmailPackage}" name="clickPayWithEmailPackage" rerender="paymentConfirmationForm,totalPurchaseOutputText">
                                </apex:actionFunction>
                                <apex:actionFunction action="{!clickPayWithExactAmount}" name="clickPayWithExactAmount" rerender="paymentConfirmationForm,totalPurchaseOutputText">
                                </apex:actionFunction>
                                
                            <h2 class="section-title">Campaign Cost</h2>
                            <div class="table-container">
                                <table class="data-table table-payment table-campaign-cost">
                                    <tbody><tr class="total-recipients">
                                        <th>
                                            Total recipients for this campaign
                                        </th>
                                        <td style="text-align:right;">
                                            <div class="item-value">
                                                <strong>
													<apex:outputText value="{0,number,###,###,##0}"><apex:param value="{!ebcCampaign.Number_of_Recipients__c}" /></apex:outputText>
                                                </strong>
                                                <span class="unit"> {!IF(ebcCampaign.Number_of_Recipients__c>1,'emails',' email')}</span>
                                            </div>
                                        </td>
                                        </tr>
                                        <tr>
                                            <th>
                                                Available balance
                                            </th>
                                            <td style="text-align:right;">
                                                <div class="item-value text-green">
                                                    <strong>
														<apex:outputText value="{0,number,###,###,##0}"><apex:param value="{!billingAccount.eBroadcast_Email_Balance__c}" /></apex:outputText>
                                                    </strong>
                                                    <span class="unit"> {!IF(billingAccount.eBroadcast_Email_Balance__c>1,'emails',' email')}</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="new-balance">
                                            <th>
                                                {!newBalanceLabel}
                                            </th>
                                            <td style="text-align:right;">
                                                <div class="item-value">
                                                    <strong>
														<apex:outputText value="{0,number,###,###,##0}"><apex:param value="{!newEmailBalance}" /></apex:outputText>
                                                    </strong>
                                                    <span class="unit"> {!IF(newEmailBalance<-1||newEmailBalance>1,'emails',' email')}</span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="group-container plan">
                                <h3 class="group-title"><span class="light">Current plan:</span> Starter edition</h3>
                                <!-- ul class list js-radio-list showing the options begins -->
                                <ul class="list js-radio-list">
                                    <li class="is-selected">
                                        <!--
                                        <div class="field-group radio">
                                            <div class="radio-box">
                                                <div class="custom-user-input radio">
                                                    <input class="user-input radio" type="radio" name="radio1" id="radio1-option2" />
                                                    <label class="custom-radio" for="radio1-option2"><i class="icon"></i></label>
                                                </div>
                                                <label class="input-label" for="radio1-option2">Pay exact amount</label>
                                                <p class="input-description">Nulla vitae elit libero, a pharetra augue. Nullam quis risus eget urna mollis ornare vel eu leo.</p>
                                            </div>
                                        </div>
										-->
                                        <div class="field-group radio">
                                            <div class="radio-box">
                                                <div class="custom-user-input radio">
                                                    <input class="user-input radio" value="{!payWithExactAmount}" type="radio" name="radio1" id="radio1-option2" checked="1"
                                                           onClick="clickPayWithExactAmount();"
                                                           />
                                                    <label class="custom-radio" for="radio1-option2"><i class="icon"></i></label>
                                                </div>
                                                <label class="input-label" for="radio1-option2">Pay exact amount</label>
                                                <p class="input-description">Pay as much as you need to add now.</p>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="field-group radio">
                                            <div class="radio-box">
                                                <div class="custom-user-input radio">
                                                    <!--
                                                    <input class="user-input radio" type="radio" name="radio1" id="radio1-option1" checked="" />
                                                    <apex:inputCheckBox id="radio1-option1" styleClass="user-input radio" html-type="radio"/>
                                                    <apex:inputCheckBox id="radio1-option1" value="{!payWithEmailPackage}" styleClass="user-input radio" html-type="radio" html-checked=""/>
													-->
                                                    <input class="user-input radio" value="{!payWithEmailPackage}" type="radio" name="radio1" id="radio1-option1" checked="" 
                                                           onClick="clickPayWithEmailPackage();"
                                                           />
                                                    <label class="custom-radio" for="radio1-option1"><i class="icon"></i></label>
                                                </div>
                                                <label class="input-label" for="radio1-option1">Get an email package</label>
                                                <p class="input-description">Select one of the email blocks offered, you'll keep the email credit left for future campaign.</p>
                                            </div>
                                        </div>
                                        <div class="toggle-container show-hide-toggle">
                                <!-- ul class list package-list js-checkbox-list showing the options inner part begins -->
											<apex:outputPanel id="emailBlockOptionForm">
                                                <apex:actionFunction action="{!selectRatePlanEmaiLBlock}" name="updateEmailBlockSelection" rerender="emailBlockSelectionForm,paymentConfirmationForm">
                                                    <apex:param name="recIndex" assignTo="{!selectedRatePlanIndex}" value=""/>
                                                </apex:actionFunction>
                                                
                                            <ul class="list package-list js-checkbox-list">
                                                <!-- SAMPLE BOXES BEGIN -----------------------------------------------------------
                                                <li class="list-item disabled">
                                                    <div class="checkbox-box">
                                                        <div class="custom-user-input checkbox">
                                                            <span class="disabled-user-input checkbox"></span>
                                                            <label class="custom-checkbox" for="package-1"><i class="icon"></i></label>
                                                        </div>
                                                        <label class="input-label" for="package-1">
                                                            <span class="input-state unselected">Select</span>
                                                            <span class="input-state selected">Selected</span>
                                                        </label>
                                                        <a href="#" class="tooltip-icon js-tooltip"><i class="fa fa-exclamation-triangle"></i></a>
                                                        <div class="tooltip-container">
                                                            <div class="tooltip-description">
                                                                <p>You can only select email packages above the balance owing.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="package-credits">
                                                        300                                                                                         credits
                                                    </div>
                                                    <div class="package-price">$9.00</div>
                                                </li>
                                                <li class="list-item disabled">
                                                    <div class="checkbox-box">
                                                        <div class="custom-user-input checkbox">
                                                            <span class="disabled-user-input checkbox"></span>
                                                            <label class="custom-checkbox" for="package-2"><i class="icon"></i></label>
                                                        </div>
                                                        <label class="input-label" for="package-2">
                                                            <span class="input-state unselected">Select</span>
                                                            <span class="input-state selected">Selected</span>
                                                        </label>
                                                        <a href="#" class="tooltip-icon js-tooltip"><i class="fa fa-exclamation-triangle"></i></a>
                                                        <div class="tooltip-container">
                                                            <div class="tooltip-description">
                                                                <p>You can only select email packages above the balance owing.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="package-credits">
                                                        1,000                                                                                         credits
                                                    </div>
                                                    <div class="package-price">$30.00</div>
                                                </li>
                                                <li class="list-item disabled">
                                                    <div class="checkbox-box">
                                                        <div class="custom-user-input checkbox">
                                                            <span class="disabled-user-input checkbox"></span>
                                                            <label class="custom-checkbox" for="package-3"><i class="icon"></i></label>
                                                        </div>
                                                        <label class="input-label" for="package-3">
                                                            <span class="input-state unselected">Select</span>
                                                            <span class="input-state selected">Selected</span>
                                                        </label>
                                                        <a href="#" class="tooltip-icon js-tooltip"><i class="fa fa-exclamation-triangle"></i></a>
                                                        <div class="tooltip-container">
                                                            <div class="tooltip-description">
                                                                <p>You can only select email packages above the balance owing.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="package-credits">
                                                        2,000                                                                                         credits
                                                    </div>
                                                    <div class="package-price">$60.00</div>
                                                </li>
                                                <!-- SAMPLE BOXES END ----------------------------------------------------------->
													<apex:repeat id="emailBlockRepeat" value="{!productRatePlanWrapperOptionList}" var="prpOption" >
																	<li class="list-item {!prpOption.classStringDisabled} {!prpOption.classStringPromo}">
																		<apex:outputPanel id="disabledItemOutputPanel" rendered="{!prpOption.isDisabled}">
																			<div class="checkbox-box">
																				<div class="custom-user-input checkbox">
																					<span class="disabled-user-input checkbox"></span>		  
																					
																					<apex:inputCheckbox id="chckActTypeDisabled" value="{!prpOption.selected}" styleClass="custom-user-input checkbox" 
																							onclick="updateEmailBlockSelection({!prpOption.index})"
																							rendered="{!!prpOption.isDisabled}"
																						/>
																					<label class="custom-checkbox"><i class="icon"></i></label>
																				</div>
																				<label class="input-label" for="{!$Component.chckActTypeDisabled}">
																					<span class="input-state unselected">Select</span>
																					<span class="input-state selected">Selected</span>
																				</label>
																				
																				<a href="#" class="tooltip-icon js-tooltip"><i class="fa fa-exclamation-triangle"></i></a>
																				<div class="tooltip-container">
																					<div class="tooltip-description">
																						<p>{!prpOption.tooltipDescription}</p>
																					</div>
																				</div>
																			</div>
																			
																			<div class="package-credits">
																				<apex:outputText value="{0,number,###,###,##0} emails"><apex:param value="{!prpOption.currentEmailCredits}" /></apex:outputText>
																			</div>
																			<div class="package-price">
																				<apex:outputText value="${0,number,###,###,##0}"><apex:param value="{!prpOption.amount}" /></apex:outputText>
																			</div>
	  																	</apex:outputPanel>
																		
																		<apex:outputPanel id="normalItemOutputPanel" rendered="{!!prpOption.isDisabled && !prpOption.isPromo}" >
																			<div class="checkbox-box">
																				<div class="custom-user-input checkbox">
																					<apex:inputCheckbox id="chckActType" value="{!prpOption.selected}" styleClass="user-input checkbox" 
																						onclick="updateEmailBlockSelection({!prpOption.index})"
																					/>
																					<label class="custom-checkbox" for="{!$Component.chckActType}"><i class="icon"></i></label>
																				</div>
																				<label class="input-label" for="{!$Component.chckActType}">
																					<span class="input-state unselected">Select</span>
																					<span class="input-state selected">Selected</span>
																				</label>
																				
																				<apex:outputPanel rendered="{!prpOption.isDisabled}"> 
																					<a href="#" class="tooltip-icon js-tooltip"><i class="fa fa-exclamation-triangle"></i></a>
																					<div class="tooltip-container">
																						<div class="tooltip-description">
																							<p>{!prpOption.tooltipDescription}</p>
																						</div>
																					</div>
																				</apex:outputPanel>
																			</div>
																			
																			<div class="package-credits">
																				<apex:outputText value="{0,number,###,###,##0} emails"><apex:param value="{!prpOption.currentEmailCredits}" /></apex:outputText>
																			</div>
																			<div class="package-price">
																				<apex:outputText value="${0,number,###,###,##0}"><apex:param value="{!prpOption.amount}" /></apex:outputText>
																			</div>
																		</apex:outputPanel>
																		
																		<apex:outputPanel id="promoItemOutputPanel" rendered="{!!prpOption.isDisabled && prpOption.isPromo}" >
																			<div class="promotion-label">
																				{!promoLabel}
																			</div>
																			<div class="checkbox-box">
																				<div class="custom-user-input checkbox">
																					<apex:inputCheckbox id="chckActTypePromo" value="{!prpOption.selected}" styleClass="user-input checkbox" 
																						onclick="updateEmailBlockSelection({!prpOption.index})"
																					/>
																					<label class="custom-checkbox" for="{!$Component.chckActTypePromo}"><i class="icon"></i></label>
																				</div>
																				<label class="input-label" for="{!$Component.chckActType}">
																					<span class="input-state unselected">Select</span>
																					<span class="input-state selected">Selected</span>
																				</label>
																					
																				<apex:outputPanel rendered="{!prpOption.isDisabled}"> 
																					<a href="#" class="tooltip-icon js-tooltip"><i class="fa fa-exclamation-triangle"></i></a>
																					<div class="tooltip-container">
																						<div class="tooltip-description">
																							<p>{!prpOption.tooltipDescription}</p>
																						</div>
																					</div>
																				</apex:outputPanel>
																			</div>
																			
																			<div class="package-credits">
																				<span class="line-stroke">
																					<apex:outputText value="{0,number,###,###,##0}"><apex:param value="{!prpOption.standardEmailCredits}" /></apex:outputText>
																				</span>
																				<span class="text-orange">
																					<apex:outputText value="{0,number,###,###,##0}"><apex:param value="{!prpOption.currentEmailCredits}" /></apex:outputText>
																				</span>
																				<br/>
																				emails
																			</div>
																			<div class="package-price">
																				<apex:outputText value="${0,number,###,###,##0}"><apex:param value="{!prpOption.amount}" /></apex:outputText>
																			</div>
																		</apex:outputPanel>
																	</li>
																	
																</apex:repeat>
																


                                            </ul>
											</apex:outputPanel>	
                                <!-- ul class list package-list js-checkbox-list showing the options inner part ends -->
                                        </div>
                                    </li>
                                </ul>


                                <!-- ul class list js-radio-list showing the options ends -->

                            </div>
                            </apex:form>
                            
                            <!--
                            <div class="group-container payment-info">
								<c:IECEBC_PaymentInformation id="paymentInformationComponent" />
                            </div>                                
							-->
                        </section>
                        
                        <section class="columns sub-container payment-confirmation" id="paymentconfirmation">
                            <div class="is-sticky-confirmation" style="">
                                <h2 class="section-title">Payment Confirmation</h2>
                                <div class="table-container">
						<!-- payment confirmation section: the detail and total begin -->
									<apex:form id="paymentConfirmationForm" >
                                        payWithEmailPackage: {!payWithEmailPackage}
                                        <br/>
                                        payWithExactAmount: {!payWithExactAmount}
                                        <table class="data-table table-payment table-confirmation">
															<tbody>
																<tr class="item">
																	<th>
                                                                            <!--
																			<apex:outputText value="Please made the selection!" rendered="{!showPurchasedSelectionMessage}"/>
																			<apex:outputText value="{!selectedProductRatePlanWrapper.name}" rendered="{!!showPurchasedSelectionMessage}"/>
																			-->
    	                                                                    <apex:outputPanel id="paymentItemDescriptionPanel1" rendered="{!showPaymentItem1}">
	                                                                                <strong>
                                                                                <apex:outputText value="{!paymentItemDescription}" rendered="{!showPaymentItem1}"/>
                                                                                </strong>
                                                                            </apex:outputPanel>
                                                                            
                                                                            <apex:outputPanel id="paymentItemDescriptionPanel2" rendered="{!showPaymentItem3}">
                                                                                <strong>
                                                                                <apex:outputText value="{0,number,###,###,##0}">
                                                                                    <apex:param value="{!emailCreditPurchased}"/>
                                                                                </apex:outputText>
                                                                                </strong>
                                                                                email credits.
                                                                                <br/>
                                                                                <apex:outputText value="At a unit cost of ${0,number,###,###,##0.00}/email">
                                                                                    <apex:param value="{!emailUnitCost}"/>
                                                                                </apex:outputText>
                                                                            </apex:outputPanel>
                                                                                
																	</th>
																	<td class="price">
																		<strong>
																			<apex:outputText value="${0, number,###,###,##0.00}" rendered="true">
                                                                                <apex:param value="{!paymentItemAmount}"/>
                                                                            </apex:outputText>
																		</strong>
																	</td>
																</tr>
																<tr class="total">
																	<th>
																		Total in USD:
																	</th>
																	<td class="price">
																		<apex:outputText id="totalPurchaseOutputText" value="${0, number,###,###,##0.00}"><apex:param value="{!totalPurchaseAmount}" /></apex:outputText>
																	</td>
																</tr>
															</tbody>
                                        </table>
									</apex:form>
									<!-- payment confirmation section: the detail and total begin -->
                                </div>
                                
                                
                                
                                <div class="footer-actions">
                                    
                                    <apex:form >
                                        
                                        <ul class="list actions">
                                            <li><apex:commandLink action="{!previous}" styleClass="button" value="Previous" /></li>
                                            <li><apex:commandLink action="{!saveAndContinue}" styleClass="button" value="Send" /></li>
                                            <li><apex:commandLink action="{!submitForApproval}" value="Submit for approval" /></li>
                                            <li>
                                                <apex:commandButton value="Buy now" action="{!addToCart}">
                                                    <apex:param name="selectedratePlanInformationId" value="a4S8E0000000gdj" assignTo="{!selectedRatePlanInformationId}"/>
                                                </apex:commandButton>
                                            </li>
                                        </ul>
                                        
                                        <div class="footer-actions text-right">
                                            
                                            
                                            
                                            
                                            
                                            
                                        </div>
                                    </apex:form>
                                </div>
                            </div>
                        </section>
                        
                    </div>
                    
                    
                    
                    
                </div>
            </main>
            <!-- End of Page Content -->
        </apex:define>
    </apex:composition>
</apex:page>