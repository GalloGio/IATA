<apex:page controller="SIDRAliteSendEmailController" >

  <apex:form id="mainForm">
    <c:Loading />

    <apex:pageMessages id="errors" />

    <apex:pageBlock id="filters" title="SIDRA Lite Send Single Email" mode="edit" rendered="{!cse!=null}">

      <apex:pageBlockButtons location="bottom">
          <apex:commandButton value="Cancel" action="{!returnToCase}" immediate="true" />
          <apex:commandButton value="Continue" action="{!goToCongaSendEmail}" rerender="mainForm" status="Loading"
            onclick="if(!confirm('Please note that the below field(s) from the action type will be updated immediately when you click continue, even if you click cancel from the following steps.')) return false;" />
      </apex:pageBlockButtons>

      <apex:pageBlockSection id="step1" columns="1" showHeader="true" title="Where do you want to send the email from?">
        <apex:pageBlockSectionItem>
          <apex:outputLabel value=""/>
          <apex:selectRadio title="title" value="{!selectedToCase}" >
              <apex:selectOption itemValue="current" itemLabel="(This Case) {!cse.CaseNumber} {!cse.Subject}"/>
              <apex:selectOption itemValue="parent" itemLabel="(Parent Case) {!cse.Parent.CaseNumber} {!cse.Parent.Subject}"/>
          </apex:selectRadio>
        </apex:pageBlockSectionItem>
      </apex:pageBlockSection>

      <apex:pageBlockSection id="step2" columns="1" showHeader="true" title="Do you want to use these templates?">
        <apex:pageBlockSectionItem>
          <apex:outputLabel value="Email Template"/>
          <apex:outputLink value="/{!emailtemplate.Id}" >{!emailtemplate.Name}</apex:outputLink>
        </apex:pageBlockSectionItem>
        <apex:pageBlockSectionItem>
          <apex:outputLabel value="Merge Template"/>
          <apex:outputLink value="/{!congatemplate.Id}" >{!congatemplate.Name}</apex:outputLink>
        </apex:pageBlockSectionItem>

        <apex:pageBlockSectionItem>
          <apex:outputLabel value=""/>
          <apex:selectRadio title="title" value="{!selectedCustomize}" >
              <apex:selectOption itemValue="false" itemLabel="Use Templates"/>
              <apex:selectOption itemValue="true" itemLabel="Select Manually"/>
          </apex:selectRadio>
        </apex:pageBlockSectionItem>
      </apex:pageBlockSection>

      <apex:pageBlockSection id="step3" columns="1" showHeader="true" title="Select Action Type">
        <apex:pageBlockSectionItem>
          <apex:outputLabel value="Select Action Type"/>
          <apex:selectList title="title" value="{!selectedType}" size="1" >
            <apex:actionSupport event="onchange" rerender="mainForm" status="Loading"/>
            <apex:selectOption itemValue="" itemLabel="--Select--"/>
            <apex:selectOption itemValue="IRR" itemLabel="Irregularity"/>
            <apex:selectOption itemValue="IRR Withdrawal" itemLabel="Irregularity Withdrawal"/>
            <apex:selectOption itemValue="DEF" itemLabel="Default/Suspension"/>
            <apex:selectOption itemValue="DEF Withdrawal" itemLabel="Default/Suspension Withdrawal"/>
            <apex:selectOption itemValue="REI" itemLabel="Reinstatement"/>
            <apex:selectOption itemValue="NOT" itemLabel="Notice of Termination"/>
            <apex:selectOption itemValue="TER" itemLabel="Termination"/>
          </apex:selectList>
        </apex:pageBlockSectionItem>

        <br/>
        <apex:outputLabel value="Update fields" rendered="{!selectedType!=''}"/>

        <apex:inputField value="{!dummyCase.NOI_sent__c}" rendered="{!selectedType=='IRR'}"/>
        <apex:inputField value="{!dummyCase.Update_AIMS_IRR__c}" rendered="{!selectedType=='IRR'}"/>

        <apex:inputField value="{!dummyCase.Confirm_IRR_Withdrawal_to_AG__c}" rendered="{!selectedType=='IRR Withdrawal'}"/>
        <apex:inputField value="{!dummyCase.Update_AIMS_IRRWITH__c}" rendered="{!selectedType=='IRR Withdrawal'}"/>

        <apex:inputField value="{!dummyCase.Update_AIMS_DEF__c}" rendered="{!selectedType=='DEF'}"/>
        <apex:inputField value="{!dummyCase.Inform_Agent_DEF__c}" rendered="{!selectedType=='DEF'}"/>
        <apex:inputField value="{!dummyCase.Inform_Airlines_Locally_Default__c}" rendered="{!selectedType=='DEF'}"/>
        <apex:inputField value="{!dummyCase.Issue_Declaration_of_Default_to_Agent__c}" rendered="{!selectedType=='DEF'}"/>
        <apex:inputField value="{!dummyCase.Shut_Down_TKT_System_GDS_and_BSPlink__c}" rendered="{!selectedType=='DEF'}"/>
        <apex:inputField value="{!dummyCase.Deactivate_Agent_in_Systems__c}" rendered="{!selectedType=='DEF'}"/>

        <apex:inputField value="{!dummyCase.Confirm_Reinstatement_to_AG__c}" rendered="{!selectedType=='DEF Withdrawal'}"/>
        <apex:inputField value="{!dummyCase.Activate_Agent_in_Systems__c}" rendered="{!selectedType=='DEF Withdrawal'}"/>
        <apex:inputField value="{!dummyCase.Open_TKT_System__c}" rendered="{!selectedType=='DEF Withdrawal'}"/>
        <apex:inputField value="{!dummyCase.Inform_Airlines_REI_DEFWD__c}" rendered="{!selectedType=='DEF Withdrawal'}"/>
        <apex:inputField value="{!dummyCase.Ticketing_Authority_Re_assigned__c}" rendered="{!selectedType=='DEF Withdrawal'}"/>

        <apex:inputField value="{!dummyCase.Confirm_Reinstatement_to_AG__c}" rendered="{!selectedType=='REI'}"/>
        <apex:inputField value="{!dummyCase.Activate_Agent_in_Systems__c}" rendered="{!selectedType=='REI'}"/>
        <apex:inputField value="{!dummyCase.Open_TKT_System__c}" rendered="{!selectedType=='REI'}"/>
        <apex:inputField value="{!dummyCase.Inform_Airlines_REI_DEFWD__c}" rendered="{!selectedType=='REI'}"/>
        <apex:inputField value="{!dummyCase.Ticketing_Authority_Re_assigned__c}" rendered="{!selectedType=='REI'}"/>

        <apex:inputField value="{!dummyCase.NOT_Sent__c}" rendered="{!selectedType=='NOT'}"/>

        <apex:inputField value="{!dummyCase.Notify_TER_to_AG__c}" rendered="{!selectedType=='TER'}"/>
        <apex:inputField value="{!dummyCase.Update_AIMS_TER__c}" rendered="{!selectedType=='TER'}"/>
      </apex:pageBlockSection>

    </apex:pageBlock>

  </apex:form>

</apex:page>
