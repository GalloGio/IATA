<apex:page controller="IEC_ProductDetailController" action="{!onLoadAction}" language="{!language}" 
	docType="html-5.0"  applyBodyTag="false" applyHtmlTag="false" showHeader="false" sidebar="false" standardStylesheets="false" cache="true">
	
	<!--[if lte IE 8]>
    <html lang="en" class="ie lte-ie8 no-svg">
	<![endif]-->
	<!--[if IE 9]>
	    <html lang="en" class="ie ie9">
	<![endif]-->
	<!--[if !IE]><!-->
	
	<html lang="{!language}">
	<!--<![endif]-->

		<head>
			<meta charset="UTF-8"/>
			<meta name="viewport" content="width=device-width, initial-scale=1"/>
			<apex:stylesheet value="{!URLFOR($Resource.EcommerceAssets, 'css/styles.min.css')}" />
			<title>{!$Label.PageTitleProductDetails} - {!$Label.SiteTitle}</title>
		</head>

        <body data-media-size="" data-is-modal-open="false" id="page-top">
        	
        	<div id="js-breakpoint-finder">
				<span class="device-xs screen-xsmall"/>
				<span class="device-sm screen-small"/>
				<span class="device-md screen-medium"/>
				<span class="device-lg screen-large"/>
				<span class="device-xl screen-xlarge"/>
			</div>
			
			<!-- App Container -->
			<div id="js-app-container" class="app-container">
				<!-- Page Header -->
				<c:IEC_PageHeader />
				
				<!-- Page Container -->
				<div class="page-container" id="js-page-container">
					<main class="main-content product-details-page">
						<!-- Top Banner -->
						<div class="reader-only" id="reader-main-content">Main Content</div>
						<div class="section top-banner">
							<div class="inner-wrapper">
								<h2 class="lead"><apex:outputText value="{!$Label.Welcome_Message}" escape="false" /></h2>
							</div>
						</div>

						<div class="inner-wrapper">

							<!-- breadcrumb -->
							<ol class="list breadcrumb">
								<li><a href="{!$Site.BaseUrl}">{!$Label.Home}</a></li>
								<!-- <li><a href="{!$Site.BaseUrl}/IEC_ProductList?category={!selected_mega_menu}">{!mega_menus[ecomProduct.megaMenu]}</a></li> -->
								<li>{!ecomProduct.ProductName}</li>
							</ol>
							<section class="product-details global-system-solutions">
								<div class="for-sticky-header">
					                <div class="sticky-header">
					                    <div class="sticky-header-wrapper">
					                        <h1 class="page-title">{!ecomProduct.ProductName}</h1>
					                        <div class="page-anchors">
					                            <ol class="list js-anchors">
					                                <li class="active"><a href="#overview" data-scroll="">Overview</a></li>
					                                <li><a href="#features" data-scroll="">Features</a></li>
					                                <li><a href="#pricing" data-scroll="">Pricing</a></li>
					                                <li><a href="#resources" data-scroll="">Resources</a></li>
					                            </ol>
					                        </div>
					                    </div>
					                </div>
					            </div>
					            <!-- Overview -->
								<section class="section-container overview" id="overview">
					                <h2 class="section-title">Overview</h2>
					                <apex:outputText value="{!ecomProduct.ProductDesc}" escape="false" />
					            </section>

					            <!-- Features -->
					            <section class="section-container features" id="features">
					                <h2 class="section-title">Features</h2>
					                <ul class="list dot">
			                            <apex:variable value="{!$User}" var="u" rendered="{!bFeature1Show}">
			                                <li>
			                                    <apex:outputText value="{!sFeature1Description}" escape="yes" />
			                                </li>
			                            </apex:variable>
			                            <apex:variable value="{!$User}" var="u" rendered="{!bFeature2Show}">
			                                <li>
			                                    <apex:outputText value="{!sFeature2Description}" escape="yes" />
			                                </li>
			                            </apex:variable>
			                            <apex:variable value="{!$User}" var="u" rendered="{!bFeature3Show}">
			                                <li>
			                                    <apex:outputText value="{!sFeature3Description}" escape="yes" />
			                                </li>
			                            </apex:variable>
			                            <apex:variable value="{!$User}" var="u" rendered="{!bFeature4Show}">
			                                <li>
			                                    <apex:outputText value="{!sFeature4Description}" escape="yes" />
			                                </li>
			                            </apex:variable>
			                            <apex:variable value="{!$User}" var="u" rendered="{!bFeature5Show}">
			                                <li>
			                                    <apex:outputText value="{!sFeature5Description}" escape="yes" />
			                                </li>
			                            </apex:variable>
			                            <apex:variable value="{!$User}" var="u" rendered="{!bFeature6Show}">
			                                <li>
			                                    <apex:outputText value="{!sFeature6Description}" escape="yes" />
			                                </li>
			                            </apex:variable>
			                        </ul>

					                
					            </section>
								

					            <!-- Prices -->
					            <section class="section-container pricing" id="pricing">
					            	<apex:form >
						                <h2 class="section-title">Pricing</h2>

						                <apex:outputPanel layout="block" id="ratePlanMsgs">
											<!-- Error Messages -->
				        					<apex:outputPanel styleClass="alert error" rendered="{!hasError}" layout="block">
									        	<apex:pageMessages escape="false"/>
								        	</apex:outputPanel>
										</apex:outputPanel>
										
						                <apex:outputPanel layout="block" rendered="{!loggedCustomer == null}">
						                	<p class="light">
						                		Iata member Airline get preferential pricing. 
						                		<a href="{!$Site.BaseUrl}/IEC_Login?returl=/IEC_ProductDetail?id={!ecomProduct.productNumber}" class="text-link"></a>
						                		or 
						                		<apex:commandLink styleClass="text-link" action="{!register}" value="create an account" />
					                		</p>
						                </apex:outputPanel>

						                <ul class="list product-pricing-list">
						                	<apex:repeat var="subProd" value="{!subProducts}">
							                    <li class="list-item {!IF(subProd.ratePlanInformation.Is_Most_Popular__c, ' has-best-value','')}">
							                    	<apex:outputPanel layout="block" styleClass="best-value" rendered="{!subProd.ratePlanInformation.Is_Most_Popular__c}">Best Value</apex:outputPanel>

							                        <h3 class="item-label">
							                        	<!-- If monthly price displayed -->
										                <apex:outputPanel rendered="{!subProd.ratePlanInformation.Display_As_Monthly_Fee__c}">
										                    <apex:outputText value="${0, number,###,###,##0.00}"  styleClass="price">
										                        <apex:param value="{!subProd.ratePlanInformation.Monthly_Price__c}"/>
										                    </apex:outputText>
										                </apex:outputPanel>
										                            
										                <!-- If annual price display -->
										                <apex:outputPanel rendered="{!AND(NOT(subProd.ratePlanInformation.Display_As_Monthly_Fee__c),subProd.ratePlanInformation.Product_Rate_Plan__c!=null)}">
										                    <apex:variable var="chargeTotal" value="{!0.0}" />  
										                    <!-- Get the rate plan charges -->
										                    <apex:repeat var="charge" value="{!charges[subProd.ratePlanInformation.Product_Rate_Plan__c]}">
										                        <apex:variable var="chargeTotal" value="{!chargeTotal + charge.zqu__ListPrice__c}" />
										                    </apex:repeat>
										                    <apex:outputText value="${0, number,###,###,##0.00}" rendered="{!NOT(chargeTotal==0.0)}">
										                        <apex:param value="{!chargeTotal}"/>
										                    </apex:outputText>
										                    <apex:outputText value="Free"  rendered="{!chargeTotal==0.0}" />
										                </apex:outputPanel>
										                
										                <span class="break">{!subProd.ratePlanInformation.Name}</span>

						                        	</h3>
							                        <h4 class="item-name">{!subProd.ratePlanInformation.Short_Description__c}</h4>
							                        <div class="item-description"><apex:outputText value="{!subProd.ratePlanInformation.Long_Description__c}" escape="false" /></div>
							                        <!-- <ul class="list check-circle">
							                            <li>North America</li>
							                            <li>South America</li>
							                            <li>Caribbean</li>
							                        </ul> -->
							                        <div class="action">
							                            <apex:commandLink styleClass="button" id="btnAddToCart" value="Buy now" action="{!addToCart}" rerender="ratePlanMsgs" rendered="{!(subProd.ratePlanInformation.Related_Product_Information__r.Related_Product_Category__r.Button_Type__c=='Buy Now' || subProd.ratePlanInformation.Related_Product_Information__r.Related_Product_Category__r.Button_Type__c=='Buy/Quote') && NOT(subProd.ratePlanInformation.Is_Triable__c)}">
			                                                <apex:param name="selectedRatePlanInformationId" value="{!subProd.ratePlanInformation.Id}" assignTo="{!selectedRatePlanInformationId}"/>
			                                            </apex:commandLink>
			                                            <apex:commandLink styleClass="button"  id="btnQuote" value="Get a quote" action="{!getQuote}" rerender="ratePlanMsgs" rendered="{!(subProd.ratePlanInformation.Related_Product_Information__r.Related_Product_Category__r.Button_Type__c=='Get a Quote' || subProd.ratePlanInformation.Related_Product_Information__r.Related_Product_Category__r.Button_Type__c=='Buy/Quote') && NOT(subProd.ratePlanInformation.Is_Triable__c)}">
			                                                <apex:param name="selectedRatePlanInformationId" value="{!subProd.ratePlanInformation.Id}" assignTo="{!selectedRatePlanInformationId}"/>
			                                            </apex:commandLink> 
			                                            <apex:commandLink styleClass="button" id="btnTryMe"  value="Try now" action="{!tryMe}" rerender="ratePlanMsgs" rendered="{!subProd.ratePlanInformation.Is_Triable__c}">
			                                                <apex:param name="selectedRatePlanInformationId" value="{!subProd.ratePlanInformation.Id}" assignTo="{!selectedRatePlanInformationId}"/>
			                                            </apex:commandLink>						                        
		                                            </div>
							                    </li>
						                    </apex:repeat>
						                </ul>
					                </apex:form>
					            </section>

					            <!-- Resources -->
					            <section class="section-container resources" id="resources">
					                <h2 class="section-title">Resources</h2>
					                <ul class="list download">
					                	<!-- for CAC Comparison page only -->
			                            <apex:outputPanel rendered="{!pc.Name=='CACPRO'}">
			                                <li>
			                                    Difference between CAC Evaluation and CAC Professional 
			                                    <a href="javascript:void(window.open('https://{!$Site.Domain}{!$Page.IECCACCompare}','CAC','menubar=no,width=1011,height=784,toolbar=no,location=no,status=no,scrollbars=yes,resizable=no'))"> click here</a>                           
			                                </li>                                                       
			                            </apex:outputPanel>
			                        
			                            <apex:variable value="{!$User}" var="u" rendered="{!bResource1Show}">
			                                <li>
			                                    {!sResource1Description} <a href="{!sResource1File}">(download now)</a>
			                                </li>
			                            </apex:variable>

			                            <apex:variable value="{!$User}" var="u" rendered="{!bResource2Show}">
			                                <li>
			                                    {!sResource2Description}<a href="{!sResource2File}">(download now)</a>
			                                </li>
			                            </apex:variable>

			                            <apex:variable value="{!$User}" var="u" rendered="{!bResource3Show}">
			                                <li>
			                                    {!sResource3Description}<a href="{!sResource3File}">(download now)</a>
			                                </li>
			                            </apex:variable>

					                </ul>
					            </section>
							</section>
						</div>
					</main>

					<!-- Footer -->
					<c:Footer />
					
				</div>

			</div>

			<!-- Load JS -->
			<script src="{!URLFOR($Resource.EcommerceAssets, 'js/vendor.min.js')}"></script>
			<script src="{!URLFOR($Resource.EcommerceAssets, 'js/script.js')}"></script>

        </body>

    </html>
</apex:page>