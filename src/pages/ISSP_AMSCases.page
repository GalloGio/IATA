<apex:page controller="ISSP_AMS_Accreditation" cache="false" 
           sidebar="false" showHeader="false" applyBodyTag="false" applyHtmlTag="false" 
           standardStylesheets="false" language="{!displayLanguage}">
    <html>
        <c:ISSP_Header />

        <body>
        <script src="{!URLFOR($Resource.bootbox)}"/>
        <style>
            .section-header {
                background-color: rgb(43, 120, 228);
                color: white;
                line-height: 1.42857143;
                padding: 8px;
                vertical-align: top;
                border-top: 1px solid #ddd;
            }

            .section-header>i {
                color: black;
                margin-right: 5px;
            }

            .section-body {
                margin: 8px;
            }

            main {
                background-color: white;
            }

            .tableFormat {
                padding-left : 5px !important;
                padding-right : 15px !important;
                padding-bottom: 2px !important;
                padding-top :  2px !important;
                vertical-align: middle !important;
            }

            .last-updated {
                display: block;
                width: 100%;
                text-align: center;
                color: rgb(121, 118, 111);
                font-size: 12px;
            }

            .borderless > thead > tr > th,
            .borderless > tbody > tr > th,
            .borderless > tfoot > tr > th,
            .borderless > thead > tr > td,
            .borderless > tbody > tr > td,
            .borderless > tfoot > tr > td {
                border-top: none;
            }      

            input + label {
                font-weight:normal;
            } 

            .overlay {
                display: none;
                height: 100%;
                left: 0;
                position: fixed;
                top: 0;
                opacity: 0.3;
                -moz-opacity: 0.3;
                width: 100%;
                -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
                filter: alpha(opacity=30);
                background: #000;
                -khtml-opacity: 0.3;
                z-index: 1000;
            }
        
            .loader {
                background: url('/img/loading32.gif') scroll no-repeat 0 0;
                width: 32px;
                height: 32px;
                position: relative;
                left: 50%;
            }

            td > span {
                margin-left: inherit;
            }
        </style>
        <script type="text/javascript">
            var typeAccredSelected = '';

            $(function () {
                $('[data-toggle="tooltip"]').tooltip();
            })

            function checkEligibility(isBankAccountChange){
                if ('{!isHOAccredited}'=='false') {
                    bootbox.alert("{!if(communityName=='CNS', $Label.ISSP_AMS_NoC_Message_Accredited_Agent_CNS, $Label.ISSP_AMS_NoC_Message_Accredited_Agent)}");
                } else if ('{!con.Account.Location_Type__c}' == 'AE' && isBankAccountChange === 'false') {
                    bootbox.alert('{!$Label.ISSP_AMS_Cases_Notify_IATA_Changes_Error}');
                } else {
                    navigateToUrl('/ISSP_AMS_Accreditation?isNoticeOfChange=true&isBankAccountChange='+isBankAccountChange + '{!commParam}' +'&retUrl=/ISSP_HomePage','LIST_VIEW','newCase');
                }
            }

            function proofOfPCI(){
                navigateToUrl('/ISSP_ANG_PCI?&retUrl=/ISSP_HomePage','LIST_VIEW','newCase');
            }

            function proceedToVMFR() {
                bootbox.confirm("{!JSENCODE($Label.ISSP_AMS_Step0_Proceed_VMFR)}", function(result) {
                    if(result) {
                        window.open('/ISSP_FAQ2Case?MainNav=Queries&subNav=MyQueries&mid=M1S1', '_self');
                    }
                });
            }

            function proceedToVR() {
                if ('{!con.Authorized_Signatory__c}' == 'false' && '{!con.User_Portal_Status__c}' == 'Approved Admin') {
                    bootbox.alert('{!$Label.ISSP_ANG_Portal_Admin_Authorized_Signature}');
                } else if ('{!con.Authorized_Signatory__c}' == 'false' && '{!con.User_Portal_Status__c}' != 'Approved Admin') {
                    bootbox.alert('{!$Label.ISSP_ANG_Portal_Admin}');
                } else {
                    navigateToUrl('/ISSP_ANG_VoluntaryRelinquishment','_self');
                }
            }

            function newnAccreditationApplicationNavigateTo() {
                if (('{!isoCountry.ANG_Enable_NewGen__c}' == 'true' && '{!isHOAccredited}' == 'false')) {
                    $('#modalChooseAccreditationType').modal('toggle');
                } else {
                    navigateToUrl('/ISSP_AMS_Accreditation?{!if(communityName=='CNS', 'CommunityName=CNS&', '')}{!IF(con.Account.ANG_Accreditation_Model__c == 'Multicountry', 'isMultiCountryNewAE=true&isMCNewAEAccredited=true&', '')}retUrl=/ISSP_HomePage','LIST_VIEW','newCase');
                }
                return false;
            }

            function newSectorApplicationNavigateTo() {
                if ('{!sector}' == 'Travel Agent') {
                    navigateToUrl('/ISSP_AMS_Accreditation?retUrl=/ISSP_HomePage&sectorValue=Cargo_Agent');
                } else if ('{!sector}' == 'Cargo Agent') {
                    if ('{!namEnabled}' == 'true') {
                        navigateToUrl('/ISSP_ANG_ProductComparison','LIST_VIEW','newCase');
                    } else {
                        navigateToUrl('/ISSP_AMS_Accreditation?retUrl=/ISSP_HomePage&sectorValue=Travel_Agent'); 
                    }
                } 
                return false;
            }

            function modalChooseAccreditationTypeClose() {
                $('#modalChooseAccreditationType').modal('toggle');
            }

            function redirectAccreditationType() {
                typeAccredSelected = $('input[type=radio]:checked').val();

                if(typeAccredSelected == '') {
                    document.querySelector("[Id$='accreditationTypeRequired']").style.display = '';
                } else {
                    if(typeAccredSelected == 'Travel_Agent') {
                        navigateToUrl('/ISSP_ANG_ProductComparison','LIST_VIEW','newCase');
                    } else if (typeAccredSelected == 'China_Domestic') {
                        navigateToUrl('/ISSP_ANG_ProductComparison?chinaAccred=Domestic','LIST_VIEW','newCase');
                    } else if (typeAccredSelected == 'China_International') {
                        navigateToUrl('/ISSP_ANG_ProductComparison?chinaAccred=International','LIST_VIEW','newCase');
                    } else {
                        navigateToUrl('/ISSP_AMS_Accreditation?{!if(communityName=='CNS', 'CommunityName=CNS&', '')}retUrl=/ISSP_HomePage&sectorValue=Cargo_Agent','LIST_VIEW','newCase');
                    }
                }
            }

            function optInOut() {
                if('{!isIFAPContact}' == 'true') {
                    $('#ModalOptInOut').modal('toggle');
                } else {
                    bootbox.alert("{!optInOutMessage}");
                }
            }

            function modalModalOptInOutClose() {
                $('#ModalOptInOut').modal('toggle');
            }

            function doOptInOut() {
                $('#ModalOptInOut').modal('toggle');
                startLoading();
                runOptInOut();
            }

            function onCompleteOptInOut() {
                endLoading();
                window.location.reload();
            }

            function startLoading() {
                $('.loadingBox').show();
            }
                
            function endLoading() {
                $('.loadingBox').hide();
            }

            function multiCountryNewAE() {
                navigateToUrl('/ISSP_AMS_Accreditation?retUrl=/ISSP_AMSCases&isMultiCountryNewAE=true');
            }

            function confirmMCFormDelete(formId) {
                bootbox.confirm('{!$Label.ISSP_AMS_CONFIRM_DELETE}', function(result) {
                    if(result) deleteMCForm(formId);
                });
                return false;
            }

            function submitMultiCountry() {
                submitMultiCountryApplication();
            }

            function discardMultiCountry() {
                discardMCApplication();
            }

            $(document).ready(function() {
                if ("{!mcAbleToSubmit}" == 'false') {
                    $('#submitMCButton').attr('disabled', 'false');
                }
            });

            function rerenderAllSections() {
                $('[id$=left-side-regular]').css('display', 'block');
                $('[id$=left-side-mc]').css('display', 'none');
                $('[id$=ongoing-apps]').css('display', 'block');
                $('[id$=accredMCTable]').css('display', 'none');

                if ({!isUserAccAccredited}) {
                    $('[id$=other-forms]').css('display', 'block');
                }
            }

            function showTermsAndConditionsModal() {
                $('[id$="termsAndConsitionsMCModal"]').css('display', 'block');
                changeContinueButtonState();
            }

            function hideTermsAndConditionsModal() {
                $('[id$="termsAndConsitionsMCModal"]').css('display', 'none');
            }

            function changeContinueButtonState() {
                if($('[id$="tcModalAgreeCheckbox"]').prop("checked"))
                    $('[id$="tcModalConfirmButton"]').removeAttr('disabled');
                else
                    $('[id$="tcModalConfirmButton"]').attr('disabled','disabled');
            }
            </script>
        <div class="container">
            <c:ISSP_CustomNavigation communityName="{!communityName}"/>
            <div>
                <apex:image value="{!URLFOR($Resource.IATA_Logo_Large)}" width="138" height="102" style="float:left" rendered="{!communityName!='CNS'}"/>
            </div>
        
            <div style="padding-top:16px;padding-left:44px">
                <h3>{!if(communityName=='CNS', $Label.ISSP_AMS_Step0_SAA_CNS, IF(newlabels, $Label.ISSP_AMS_Step0_SAA_New, $Label.ISSP_AMS_Step0_SAA))}</h3>
                <apex:outputText value="{!if(communityName=='CNS', $Label.ISSP_AMS_Step0_Intro_CNS, IF(newlabels, $Label.ISSP_AMS_Step0_Intro_New, $Label.ISSP_AMS_Step0_Intro))}" escape="false"/>
            </div>
            <div id="load_scrl" class="loadingBox loader" style="display:none;"/> 
            <div class="loadingBox overlay"/> 
            <br/>
            <apex:form id="mainFrm">
                <apex:inputHidden value="{!pEfectiveDateStr}" id="effectiveDateOfChange"/>
                <apex:actionStatus onstart="startLoading();" onstop="endLoading();" id="loadStatusSpinner"/>
                <apex:actionFunction action="{!runOptInOut}" name="runOptInOut" oncomplete="onCompleteOptInOut();" rerender="DraftCases"/>
                <apex:actionFunction action="{!deleteMCForm}" name="deleteMCForm" reRender="onGoingMultiCountryForms">
                    <apex:param value="" name="mcFormNumber" assignTo="{!mcFormIdToDelete}"/>
                </apex:actionFunction>
                <apex:actionFunction action="{!submitMultiCountryApplication}" name="submitMultiCountryApplication" status="loadStatusSpinner" rerender="other-forms, DraftCases" oncomplete="rerenderAllSections();"/>
                <apex:actionFunction action="{!discardMCApplication}" name="discardMCApplication" status="loadStatusSpinner" rerender="other-forms, DraftCases, left-side-mc, left-side-regular" oncomplete="rerenderAllSections();"/>

                <div class="container" style="width: 100%" id="allSections">
                    <div class="row">
                        <section name="left-side-agency-accred" id="left-side-regular" class="col-md-7" style="min-height: 350px; display: {!IF(AND(isMultiCountryStarted, NOT(isMCNewAEAccredited)), 'none', '')};">
                            <header>
                                <div class="section-header">
                                    <apex:image value="{!URLFOR($Resource.ISSP_RHC_Page_Icons,'img/RHC.png')}"/>
                                    <strong>{!$Label.ISSP_AMS_Agency_Accreditation}</strong>
                                </div>
                            </header>
                                
                            <div class="row" style="padding-top: 20px">
                                <div class="col-md-7">
                                    <input type="button" style="display:{!IF(NOT(isHOAccredited),'','none')};" class="btn btn_iata_primary" onClick="newnAccreditationApplicationNavigateTo();" value="{!IF(communityName=='CNS', $Label.ISSP_AMS_Step0_New_Application_CNS, IF(namPaxAgent, $Label.ISSP_AMS_Apply_New_Head_Entity, $Label.ISSP_AMS_Apply_New_Office))}"/>

                                    <input type="button" style="display:{!IF(isHOAccredited,'','none')};" class="btn btn_iata_primary" onClick="newnAccreditationApplicationNavigateTo();" value="{!IF(namPaxAgent, $Label.ISSP_AMS_Apply_New_Associate_Entity, $Label.ISSP_AMS_Apply_New_Branch_Office)}"/>

                                <br/>
                                        
                                <apex:outputText value="{!if(communityName=='CNS', $Label.ISSP_AMS_Step0_Intro_Accred_CNS, IF(newlabels, $Label.ISSP_AMS_Step0_Intro_Accred_New, $Label.ISSP_AMS_Step0_Intro_Accred))}" escape="false"/>
                                        
                                <apex:image value="/img/msg_icons/info16.png" title="{!$Label.ISSP_AMS_Step0_Intro_Accred_Msg}" html-data-html="true" html-data-placement="right" html-data-toggle="tooltip" /><br/>
                                        
                                <apex:commandLink action="{!redirectToCountryRequirementPage}" value="{!$Label.ISSP_ANG_Country_Req}" id="countryReq" rendered="{!OR(con.Account.Category__c == 'IATA Passenger Sales Agent',con.Account.Category__c == 'Non-IATA Travel Agent')}"/><br/><br/>
                            </div>
                                    
                            <div class="col-md-5">
                                <input type="button" class="btn btn_iata_primary" onClick="newSectorApplicationNavigateTo();" value="{!IF(sector=='Travel Agent', $Label.ISSP_AMS_Apply_New_Cargo_Head_Office, IF(NOT(namEnabled) , IF(con.Account.Location_Class__c=='R', $Label.ISSP_AMS_Apply_New_Travel_Cargo_Head_Office, $Label.ISSP_AMS_Apply_New_Travel_Head_Office), $Label.ISSP_AMS_Apply_New_Travel_Head_Entity))}" style="display:{!IF(isHOAccredited, '','none')};"/>
                            </div>
                            <div class="col-md-5">
                                <input type="button" class="btn btn_iata_primary" onClick="newSectorApplicationNavigateTo();" value="{!IF(sector=='Travel Agent', $Label.ISSP_AMS_Apply_New_Cargo_Head_Office, IF(NOT(namEnabled) , IF(con.Account.Location_Class__c=='R', $Label.ISSP_AMS_Apply_New_Travel_Cargo_Head_Office2, $Label.ISSP_AMS_Apply_New_Travel_Head_Office), $Label.ISSP_AMS_Apply_New_Travel_Head_Entity))}" style="display:{!IF(AND(isHOAccredited,con.Account.Location_Class__c=='R'), '','none')};"/>
                            </div>
                        </div>
                                
                        <div class="row" style="padding-bottom: 20px; {!IF(isMCNewAEAccredited, 'padding-top: 20px;', '')}">
                            <div class="col-md-7" style="display:{!IF(AND(con.Account.Category__c == 'IATA Passenger Sales Agent', isHOAccredited), '','none')};">
                                <input type="button" class="btn btn_iata_primary" onClick="proofOfPCI();return false;" value="{!$Label.ISSP_ANG_proof_PCI}"/><br/>
                                        <apex:outputText escape="false" value="{!$Label.ISSP_ANG_proof_PCI_Info}"/>
                            </div>
                                    
                            <div class="col-md-5" >
                                
                            </div>
                        </div>

                            <div class="row" style="padding-bottom: 20px">
                                <div class="col-md-7" style="display:{!IF(AND(con.Account.Category__c == 'IATA Passenger Sales Agent', isHOAccredited), '','none')};">
                                    <input style="display:{!IF(flagShowOptInOutButton,'','none')};" type="button" class="btn btn_iata_primary" onclick="optInOut();return false;" value="{!optInOutBtn}"/>
                                    <input style="display:{!IF(flagShowOptInOutButtonDisabled,'','none')};" type="button" class="btn btn_iata_primary" value="{!optInOutBtn}" disabled="true"/>
                                </div>
                                        
                                <div class="col-md-5"/>
                            </div>

                             <div class="row" style="padding-bottom: 20px">
                                <div class="col-md-7">
                                    <strong><apex:outputText escape="false" value="{!$Label.ISSP_AMS_Step0_In_Addition}" rendered="{!AND(isHOAccredited, NOT(isoCountry.ANG_Enable_NewGen__c), sector=='Travel Agent')}"/></strong><br/>
                                            
                                    <apex:commandLink action="{!redirectToCasePage}" value="{!$Label.ISSP_AMS_Step0_Specific_Sales_Activity}" id="SACommandLink" rendered="{!AND(isHOAccredited, NOT(isoCountry.ANG_Enable_NewGen__c), sector=='Travel Agent')}">
                                        <apex:param assignTo="{!agentCaseType}" value="SA" />
                                    </apex:commandLink>
                                </div>
                             </div>   
                        </section>

                        <section name="left-side-agency-accred-multicountry" id="left-side-mc" class="col-md-7" style="min-height: 350px; display: {!IF(AND(isMultiCountryStarted, NOT(isMCNewAEAccredited)), '', 'none')};">
                            <header>
                                <div class="section-header">
                                    <apex:image value="{!URLFOR($Resource.ISSP_RHC_Page_Icons,'img/RHC.png')}"/>
                                    <strong>{!$Label.ISSP_AMS_Agency_Accreditation}</strong>
                                </div>
                            </header>
                                
                            <div class="row" style="padding-top: 20px">
                                <div class="col-md-12">
                                    <input type="button" class="btn btn_iata_primary" onClick="multiCountryNewAE();" value="Add New Associate Entity"/>
                                </div>
                            </div>

                            <div class="row" style="padding-top: 10px">
                                <div class="col-md-12">
                                    <apex:outputText value="{!$Label.ANG_ISSP_Multicountry_Submit_Message_New_AE}"/>
                                </div>
                            </div>

                            <c:ISSP_MCStagingRecordTable/>
                        </section>
                            
                        <section name="right-side-agency-changes" class="col-md-5" style="min-height: 350px;">
                            <header>
                                <div class="section-header">
                                    <apex:image value="{!URLFOR($Resource.ISSP_RHC_Page_Icons,'img/RHC.png')}"/>
                                    <strong>{!$Label.ISSP_AMS_eBulletin_AgencyChanges}</strong>
                                </div>
                            </header>
                                
                            <div class="row bankDetails" style="padding-top: 20px">
                                <div class="col-md-12" style="display:{!IF(AND(isEligableForChange,isoCountry.Enable_Notice_of_Change__c),'','none')};">
                                    <input type="button" class="btn btn_iata_primary" onClick="checkEligibility('true');return false;" value="{!$Label.ISSP_AMS_Step0_Change_Bank_Details}"/>
                                </div>
                            </div>
                                    
                            <div class="row">
                                <div class="col-md-12" style="padding-bottom: 10px; display:{!IF(agencyCategory != 'TIDS Agent','','none')};">
                                    <input type="button" class="btn btn_iata_primary" onClick="checkEligibility('false');return false;" value="{!$Label.ISSP_AMS_Step0_Other_Changes}"/><br/>
                                        
                                    <apex:outputText id="otherChangesNotPax" rendered="{! NOT(namPaxAgent)}" escape="false" value="{!$Label.ISSP_AMS_Step0_Other_Changes_Msg}"/>
                                        
                                    <apex:outputText id="otherChangesPax" rendered="{! namPaxAgent}" escape="false" value="{!$Label.ISSP_ANG_Step0_Other_Changes_Msg_NamPaxAgent}"/><br/><br/>

                                    <apex:outputText id="minorChanges" escape="false" value="{!$Label.ISSP_AMS_Step0_Minor_Changes}" rendered="{!AND(isoCountry.Enable_Notice_of_Change__c,isoCountry.Enable_Minor_Changes_from_Portal__c,bIsAdmin)}"/>
                                </div>
                            </div>
                        </section>
                    </div>
                    
                    <div class="row">
                        <section name="left-side-ongoing-apps" id="ongoing-apps" class="col-md-7" style="min-height: 350px; padding-top: 20px; display: {!IF(AND(isMultiCountryStarted, NOT(isMCNewAEAccredited)), 'none', '')}">
                            <header>
                                <div class="section-header">
                                    <apex:image value="{!URLFOR($Resource.ISSP_RHC_Page_Icons,'img/RHC.png')}"/>
                                        <strong>{!$Label.ISSP_AMS_Step0_Ongoing_Drafts}</strong>
                                </div>
                            </header>
                                
                            <div style="padding-top: 20px">
                                <apex:pageBlock >
                                    <apex:pageBlockTable id="DraftCases" value="{!AMSDraftCases}" var="MyAMSCases" styleClass="table" rendered="{!NOT(IsEmpty)}">
                                        <apex:column headerValue="{!$ObjectType.Case.fields.CaseNumber.label}" rendered="{!NOT(AND(isoCountry.Enable_Notice_of_Change__c==false,NOT(BEGINS(MyAMSCases.Reason1__c, 'New'))))}">
                                            <apex:outputLink value="/ISSP_AMS_Accreditation?caseId={!MyAMSCases.Id}&step=2{!if(communityName=='CNS', '&CommunityName=CNS', '')}{!IF(con.Account.ANG_Accreditation_Model__c == 'Multicountry', '&isMultiCountryNewAE=true&isMCNewAEAccredited=true', '')}" rendered="{!BEGINS(MyAMSCases.Reason1__c, 'New')}">{!MyAMSCases.CaseNumber}</apex:outputLink>
                                            
                                            <apex:outputLink value="/ISSP_AMS_Accreditation?caseId={!MyAMSCases.Id}&isNoticeOfChange=true&isBankAccountChange=true&step=2{!if(communityName=='CNS', '&CommunityName=CNS', '')}" rendered="{!MyAMSCases.Reason1__c=='Bank Detail Update'}">{!MyAMSCases.CaseNumber}</apex:outputLink>

                                            <apex:outputLink value="/ISSP_ANG_PCI?caseId={!MyAMSCases.Id}&step=1{!if(communityName=='CNS', '&CommunityName=CNS', '')}" rendered="{!MyAMSCases.Reason1__c=='FoP Management'}">{!MyAMSCases.CaseNumber}</apex:outputLink>

                                            <apex:outputLink value="/ISSP_AMS_Accreditation?caseId={!MyAMSCases.Id}&isNoticeOfChange=true&isBankAccountChange=false&step=2{!if(communityName=='CNS', '&CommunityName=CNS', '')}" rendered="{!NOT(OR(BEGINS(MyAMSCases.Reason1__c, 'New'),MyAMSCases.Reason1__c=='Bank Detail Update',MyAMSCases.Reason1__c=='FoP Management'))}">{!MyAMSCases.CaseNumber}</apex:outputLink>
                                        </apex:column>
                    
                                        <apex:column value="{!MyAMSCases.Subject}" rendered="{!NOT(AND(isoCountry.Enable_Notice_of_Change__c==false,NOT(BEGINS(MyAMSCases.Reason1__c, 'New'))))}"/>
                    
                                        <apex:column value="{!MyAMSCases.Portal_Case_Status__c}" rendered="{!NOT(AND(isoCountry.Enable_Notice_of_Change__c==false,NOT(BEGINS(MyAMSCases.Reason1__c, 'New'))))}"/>
                    
                                        <apex:column value="{!MyAMSCases.CreatedDate}" rendered="{!NOT(AND(isoCountry.Enable_Notice_of_Change__c==false,NOT(BEGINS(MyAMSCases.Reason1__c, 'New'))))}"/>
                                    </apex:pageBlockTable>
                                </apex:pageBlock>
                            </div>

                            <apex:outputText styleClass="bg-info" value="{!if(communityName=='CNS', $Label.ISSP_AMS_No_Pending_CNS, $Label.ISSP_AMS_No_Pending)}" rendered="{!IsEmpty}"/>
                                
                        </section>
                            
                        <section name="right-side-other-forms" id="other-forms" class="col-md-5" style="display:{!IF(OR(AND(isMultiCountryStarted, NOT(isMCNewAEAccredited)),AND(con.Account.Category__c == 'Domestic Agent', NOT(isocountry.ANG_Enable_NewGen__c))), 'none', IF(isUserAccAccredited, '', 'none'))}; margin-right: 0px; margin-left: 0px; min-height: 350px; padding-top: 20px;">
                            <header>
                                <div class="section-header">
                                    <apex:image value="{!URLFOR($Resource.ISSP_RHC_Page_Icons,'img/RHC.png')}"/>
                                    <strong>{!$Label.ISSP_AMS_Step0_Other_Forms}</strong>
                                </div>
                            </header>
                            <div style="padding-top: 20px">
                                <apex:commandLink action="{!redirectToCasePage}" value="{!$Label.ISSP_AMS_Step0_Request_Voluntary_Reliquishment}" id="VRCommandLink" rendered="{!isUserAccAccredited}" onclick="proceedToVR(); return false;"/>
                            
                                <apex:outputText escape="false" rendered="{!AND(isUserAccAccredited, communityName!='CNS')}"><br/>
                                    <a href="#" onclick="proceedToVMFR(); return true;">{!$Label.ISSP_AMS_Step0_VMFR}</a>
                                </apex:outputText>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal" id="modalChooseAccreditationType" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <apex:outputPanel layout="block" styleClass="modal-dialog" id="modalChooseAccreditationTypeContent">
                        <div class="modal-content" id="modalChooseAccreditationContent">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">{!$Label.ANG_ISSP_AccreditationTypeTitle}</h4>
                            </div>

                            <div class="modal-body" id="modalChooseAccreditationBody">
                                <div class="alert alert-danger" id="accreditationTypeRequired" style ="display: none">
                                <strong> {!$Label.ANG_ISSP_AccreditationTypeRequired} </strong>
                            </div>

                            <div class="row">
                                <apex:outputPanel layout="block" styleClass="col-md-12">
                                    <apex:outputLabel escape="false" value="{!$Label.ANG_ISSP_TypeAccreditadionQuestion}" />
                                </apex:outputPanel>
                            </div>

                        <div class="row"/>
                    
                        <div class="row" id="modalChooseAccreditationRow">
                            <apex:outputPanel layout="block" styleClass="col-md-12 text-normal" id="modalChooseAccreditationPanel">
                                <apex:selectRadio value="{!accredidationType}" layout="pageDirection" id="accredTypeId">
                                    <apex:selectOption itemValue="Travel_Agent" itemLabel="{!$Label.ISSP_Travel_Agent}" id="travelAgentCheck" rendered="{!hqAccount.Country_ISO_Code__c != 'CN'}"/>

                                    <apex:selectOption itemValue="China_Domestic" itemLabel="{!$Label.ISSP_China_Domestic}" id="chinaDomesticCheck" rendered="{!hqAccount.Country_ISO_Code__c == 'CN'}"/>
                                
                                    <apex:selectOption itemValue="China_International" itemLabel="{!$Label.ISSP_China_International}" id="chinaInternationalCheck" rendered="{!hqAccount.Country_ISO_Code__c == 'CN'}"/> 

                                    <apex:selectOption itemValue="Cargo_Agent" itemLabel="{!$Label.ISSP_Cargo_Agent}" id="cargoAgentCheck"/>
                                </apex:selectRadio>
                            </apex:outputPanel>
                        </div>
                    </div>

                    <!--<script type="text/javascript">
                        $('[value="China_International"]').parent().append($('<apex:image/>',{id: 'dasd', value: '/img/msg_icons/info16.png',
                                                html-data-html: 'true',
                                                html-data-placement: 'right',
                                                html-data-toggle: 'tooltip',
                                                title: '{!$Label.ISSP_AMS_Step0_Intro_Accred_Msg}'}));
                    </script>-->

                    <div class="modal-footer">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-6">
                                    <button type="button" onclick="modalChooseAccreditationTypeClose()" class="btn btn-danger btn-block">{!$label.LAQ_Close}</button>
                                </div>
                        
                                <div class="col-md-6">
                                    <button type="button" onclick="redirectAccreditationType()" class="btn btn-success btn-block">{!$label.IDCard_Continue_Button}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </apex:outputPanel>
            </div>

                <div class="modal" id="ModalOptInOut" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" data-keyboard="false" href="#" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">{!optInOutModalTitle}</h4>
                      </div>
                      <div class="modal-body">

                        <apex:outputText escape="false" value="{!optInOutMessage}"></apex:outputText>

                        <br></br>
                        <br></br>
                        
                      </div>
                      <div class="modal-footer">
                        <div class="col-md-12">
                          <div class="row">
                            <div class="col-md-6">
                              <button type="button" onclick="modalModalOptInOutClose()" class="btn btn-danger btn-block">{!$label.LAQ_Close}</button>
                            </div>
                            <div class="col-md-6">
                              <button type="button" onclick="doOptInOut()" class="btn btn-success btn-block">{!$label.IDCard_Continue_Button}</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Modal GDI Portal App Request --> 
                <div class="modal" id="termsAndConsitionsMCModal" tabindex="-1" role="dialog">
                    <apex:outputPanel layout="block" id="myModalContent"> 
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button id="tcModalCloseButtonSecondary" type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="hideTermsAndConditionsModal();">&times;</button>
                                    <h4 class="modal-title">{!$Label.OneId_TermsAndConditions}</h4>
                                </div>
                                <div class="modal-body">
                                    <p>
                                        <b>
                                            <apex:outputText escape="false" value="{!IF(amsOfficeType=='HO', $Label.ISSP_AMS_T_Cs1, $Label.ISSP_AMS_Pax_Branch_T_Cs)}"/>
                                            <apex:outputText escape="false" value="{!$Label.ISSP_AMS_T_Cs2}"/>
                                            <apex:outputText escape="false" value="{!$Label.ISSP_AMS_T_Cs3}"/>
                                        </b>
                                    </p>
                                    <p>
                                        <apex:inputCheckbox id="tcModalAgreeCheckbox" value="{!termsAndConditionsMC}" onchange="changeContinueButtonState();" required="true"/>
                                        <apex:outputText value="&nbsp;{!$Label.ANG_ISSP_GDI_Agreement}" escape="false"/>
                                    </p>
                                </div>
                                <div class="modal-footer">
                                    <apex:commandButton id="tcModalConfirmButton" styleClass="btn_iata_success btn" value="{!$Label.ISSP_PCI_Stay}" onclick="hideTermsAndConditionsModal(); submitMultiCountry(); return false;" reRender=""/>
                                    <apex:commandButton id="tcModalCloseButton" styleClass="btn btn-secondary" value="{!$Label.IFAP_close}" onclick="hideTermsAndConditionsModal(); return false;" reRender=""/>
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                </div>
            </apex:form>

            <c:ISSP_CustomFooter communityName="{!communityName}"/>
        </div>
    </body>
    </html>
</apex:page>
