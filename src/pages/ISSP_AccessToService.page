<apex:page controller="ISSP_AccessToService" tabStyle="Contact" action="{!initialization}" standardStylesheets="false" showHeader="false" sidebar="false"  applyBodyTag="false" applyHtmlTag="false">
<html>
 <c:ISSP_Header ></c:ISSP_Header>    
 <body>
 <div class="container">
 <c:ISSP_CustomNavigation />

    <!---------------------------------------------------------------------->
    
    
    <style type="text/css">
    a.alpha-link {
       font-weight: normal;
       font-size: 91%;
       padding: 0 4px;
       color: #015BA7 !important;
    }
     
    a.alpha-link+a.alpha-link {
       border-left: 1px solid #CFCECE;
    }
     
    a.alpha-link:hover {
       background-color: #e0f5fc !important;
    }
     
    a.alpha-select {
       font-weight: bold;
       text-decoration: none;
       background-color: #C6E1FF;
       color: #000000 !important;
    }
    </style>

    <apex:form id="AccServiceListForm">

    <apex:actionFunction name="next" action="{!setCon.next}" rerender="AccServices" />
    <apex:actionFunction name="previous" action="{!setCon.previous}" rerender="AccServices" />
    <apex:actionFunction name="first" action="{!setCon.first}" rerender="AccServices" />
    <apex:actionFunction name="last" action="{!setCon.last}" rerender="AccServices" />
    <apex:actionFunction name="refresh" action="{!refresh}" rerender="AccServiceListForm" />
    <apex:inputHidden value="{!selectedList}" id="selectedItemHidden"/> 
    <!-- <apex:pageMessages /> -->
    <h4>{!$Label.ISSP_Company_Administration} <span class="glyphicon glyphicon-chevron-right small " aria-hidden="true"></span>
         {!$Label.ISSP_Access_to_services} <span class="glyphicon glyphicon-chevron-right small " aria-hidden="true"></span>
         <small>{!$Label.ISSP_PageDescription_ISSP_AccessToService}</small></h4>
    
    <img src="/s.gif" alt="AccService" class="pageTitleIcon" title="Access to Service"/>
  <div class="row">
    <div class="col-md-4 col-sm-6 col-xs-12">
    <select id="testSelect" class="form-control selector" onchange="$('[id$=selectedItemHidden]').val($(this).val());refresh();">
        <apex:repeat value="{!ListViewNameList}" var="csName" id="theRepea1">
            <option value="{!csName}">{!$Label[AccServiceListViewMap[csName].Label_API_name__c]}</option>
        </apex:repeat>
    </select>
    </div>
  </div>
 
    <script>
        $('#testSelect').val( '{!selectedList}' );
    </script>
    
    <apex:pageBlock id="AccServices" >    
        <hr />
        <apex:pageMessages escape="false"/>
        <apex:pageBlockTable value="{!AccServiceList}" var="item" styleClass="table-hover  table table-condensed table-responsive">
        
            <apex:column > 
                <apex:facet name="header" >
                    {!$Label.ISSP_My_Contact_Action}
                </apex:facet> 
                <apex:outputLink value="/apex/ISSP_EditPortalServiceAccess?&mid=M4S2&Id={!item.recordAccService.Id}" target="_self" rendered="{!IF(item.recordAccService.Application_Name__c == 'IFAP',false,true)}">{!$Label.ISSP_Edit}</apex:outputLink> 
                <apex:outputLink value="/apex/ISSP_EditPortalServiceAccess?&mid=M4S2&Id={!item.recordAccService.Id}" target="_self" rendered="{!IF(item.recordAccService.Application_Name__c == 'IFAP',true,false)}">{!$Label.ISSP_Edit}</apex:outputLink> 
            </apex:column>
            
            <apex:repeat value="{!fields}" var="f">
                  <apex:column >
                    <apex:facet name="header">
                       <apex:commandLink action="{!refresh}" >{!f.label}
                         <apex:outputPanel layout="none" rendered="{!AND(OR(sortExpression==f.FieldPath,AND(sortExpression=='Name',f.FieldPath=='Name')), sortDirection='ASC')}">&#9650;</apex:outputPanel>
                         <apex:outputPanel layout="none" rendered="{!AND(OR(sortExpression==f.FieldPath,AND(sortExpression=='Name',f.FieldPath=='Name')), sortDirection='DESC')}">&#9660;</apex:outputPanel>
                         <apex:param value="{!f.FieldPath}" name="column" assignTo="{!sortExpression}" ></apex:param>
                       </apex:commandLink>
                    </apex:facet>
                     
                    <apex:outputpanel rendered="{!IF(f.label!='Contact'&& f.fieldPath!='Portal_Application__c' && f.label!='Portal Application Right Name',true,false)}"> 
                        <apex:outputfield value="{!item.recordAccService[f.fieldPath]}" />
                    </apex:outputpanel>
                    
                    <apex:outputpanel rendered="{!IF(f.label=='Portal Application Right Name',true,false)}"> 
                     <apex:outputLink value="/apex/ISSP_PortalServiceAccess?Id={!item.recordAccService.Id}" target="_self">{!item.recordAccService.PortalServiceTranslatedName__c}</apex:outputLink>
                    </apex:outputpanel>
                    
                    <apex:outputpanel rendered="{!IF(f.label=='Contact',true,false)}"> 
                     <apex:outputLink value="/apex/ISSP_Contact?&mid=M4S1&Id={!item.recordAccService.Contact__c}" target="_self">{!item.recordAccService.Contact__r.name}</apex:outputLink>
                    </apex:outputpanel>
                     
                    <apex:outputpanel rendered="{!IF(f.fieldPath=='Portal_Application__c',true,false)}">
                    <apex:outputLink value="/apex/ISSP_PortalService?Id={!item.recordAccService.Portal_Application__c}" target="_self">{!item.recordAccService.PortalServiceTranslatedName__c}</apex:outputLink>
                    </apex:outputpanel>
                  </apex:column>
            </apex:repeat>
          
        </apex:pageBlockTable>
   
        <div class="bottomNav" id="j_id0:YourListViewId_bottomNav">
           <div class="paginator">
              <span class="left">
                 <span class="selectorTarget" >
                    {!((setCon.PageNumber-1) * setCon.PageSize)+1} - {!IF(setCon.HasNext,((setCon.PageNumber-1) * setCon.PageSize)+11,setCon.ResultSize)}  {!$Label.ISSP_of} {!setCon.ResultSize }
                </span>
              </span>
              
          <span class="prevNextLinks">
          
           <span class="prevNext"  style="display:{!IF(setCon.HasPrevious,'none','')}">
                <img src="/s.gif" class="firstoff" alt="First Page"/>
           </span>
           <span class="prevNext"  style="display:{!IF(setCon.HasPrevious,'','none')}">
                <a href="javascript:first()"><img src="/s.gif" title="First Page" alt="First Page" class="first"/></a>
           </span>
           
           <span class="prevNext" style="display:{!IF(setCon.HasPrevious,'none','')}">
                <img src="/s.gif" class="prevoff" alt="Previous"/>{!$Label.ISSP_Previous}
            </span>
            <span class="prevNext" style="display:{!IF(setCon.HasPrevious,'','none')}">
                <a href="javascript:previous()"><img src="/s.gif" title="Previous" alt="Previous" class="prev"/>{!$Label.ISSP_Previous}</a>
            </span>
            
           <span class="prevNext" style="display:{!IF(setCon.HasNext,'none','')}">{!$Label.ISSP_Next}
                <img src="/s.gif" class="nextoff" alt="Next"/>
            </span>
            <span class="prevNext" style="display:{!IF(setCon.HasNext,'','none')}">
                <a href="javascript:next()">Next<img src="/s.gif" title="Next" alt="Next" class="next"/></a>
            </span>
            
           <span class="prevNext" style="display:{!IF(setCon.HasNext,'none','')}">
                <img src="/s.gif" class="lastoff" alt="Last Page"/>
           </span>
           <span class="prevNext" style="display:{!IF(setCon.HasNext,'','none')}">
               <a href="javascript:last()"><img src="/s.gif" title="Last Page" alt="Last Page" class="last"/></a>
           </span>
           </span>
           <span class="right">{!$Label.ISSP_Page}
               {!setCon.PageNumber}
               {!$Label.ISSP_of} {!CEILING(noOfRecords/size)}
        
            </span>
           </div>
           <div class="clearingBox"></div>
        </div>
        </apex:pageBlock> 
       
     </apex:form>
    <!---------------------------------------------------------------------->


    <c:ISSP_CustomFooter />
</div><!-- end container-->
    </body>
    </html>
</apex:page>