<apex:page standardController="EBC_Campaign__c" extensions="vfIECEBC_Campaign,vfIECEBC_CampaignSchedule" applyHtmlTag="false" applyBodyTag="false" sidebar="false" showheader="false" standardStylesheets="false" language="en" docType="html-5.0" action="{!pageLoad}">
	<apex:composition template="IECEBC_Layout">
        <apex:define name="pageHeadAdditions">
            <!-- Start of Page <head> -->
            <title>eBroadcast Campaign - Schedule</title>
            <!-- End of Page </head> -->
        </apex:define>
        <apex:define name="pageScriptAdditions" />
        <apex:define name="pageContent">
            <!-- Start of Page Content -->
            <main class="main-content">
                <div class="inner-wrapper">
                    <c:IECEBC_ProgressComponent currentStepNumber="{!currentStepNumber}" campaign="{!EBC_Campaign__c}" />
            
                    <h1 class="page-title">Summary &amp; Schedule</h1>
                    
                    <p class="lead">Review these important campaign details before scheduling you campaign.</p>
            
                    <div class="alert subject-line">
                        <div class="alert-message icon check-circle">
                            <h2 class="title">Subject Line <a class="text-link" href="https://{!$Site.Domain}{!URLFOR($Page.IECEBC_Campaign)}?id={!campaign.id}">(edit)</a></h2>
                            <p>The Email Subject currently setup is "<strong>{!campaign.Subject__c}</strong>". Please make sure this is accurate.</p>
                        </div>
                    </div>
            
                    <div class="alert">
                        <div class="alert-message icon check-circle">
                            <h2 class="title">Recipients</h2>
                            <p>
                                Your message will be delivered using the <strong>US Agencies</strong> list additionally filtered using the <strong>IP segment</strong>.<br />
                                Total of <strong>20,000 recipients</strong>
                            </p>
                        </div>
                    </div>
            
                    <c:IECEBC_CampaignSchedule c="{!campaign}">
                            <apex:commandLink rendered="{!campaign.Is_Step5_Writable__c}" action="{!previous}" styleClass="button" value="Previous" />
                            <apex:commandLink rendered="{!campaign.Is_Step5_Writable__c}" action="{!saveAndExit}" reRender="pageMessagesBlock" styleClass="button" value="Save and Exit" />
                            <apex:commandLink rendered="{!campaign.Is_Step5_Writable__c}" action="{!saveAndContinue}" reRender="pageMessagesBlock" styleClass="button" value="Save and Continue" />
                            
							<apex:commandLink rendered="{!NOT(campaign.Is_Step5_Writable__c)}" action="{!previous}" value="Previous" />
                            <apex:commandLink rendered="{!NOT(campaign.Is_Step5_Writable__c)}" action="{!next}" value="Next" />
                    </c:IECEBC_CampaignSchedule>
                    <apex:form rendered="false">
                        <section class="group-container schedule">
                            <h2 class="icon schedule group-title">Schedule</h2>
                            <div class="group-content">
                                <p class="lead"><strong>Please confirm the date you want your campaign to be sent.</strong></p>
                                <p class="note"><strong>NOTE:</strong> 48 business hours are necessary for IATA to perform the campaign review process.</p>
                                <p class="label"><strong>The below date is the earliest your campaign can be sent:</strong></p>
                                <div class="field-group default field-datepicker">
                                    <div class="datepicker">
                                        <apex:inputText value="{!campaignDate}" styleClass="campaignDate" style="display: none;">
                                            <apex:actionSupport action="{!validate}" event="onchange" rerender="pageMessagesBlock"/> 
                                        </apex:inputText>
                                        <apex:input value="{!humanCampaignDate}" type="text" styleClass="humanCampaignDate user-input text" />
                                    </div>
                
                                    <div class="custom-user-input select">
                                        <i class="icon angle-down"></i>
                                        <apex:selectList styleClass="user-input select" value="{!campaignHours}" size="1">
                                            <apex:selectOption itemLabel="1" itemValue="1" />
                                            <apex:selectOption itemLabel="2" itemValue="2" />
                                            <apex:selectOption itemLabel="3" itemValue="3" />
                                            <apex:selectOption itemLabel="4" itemValue="4" />
                                            <apex:selectOption itemLabel="5" itemValue="5" />
                                            <apex:selectOption itemLabel="6" itemValue="6" />
                                            <apex:selectOption itemLabel="7" itemValue="7" />
                                            <apex:selectOption itemLabel="8" itemValue="8" />
                                            <apex:selectOption itemLabel="9" itemValue="9" />
                                            <apex:selectOption itemLabel="10" itemValue="10" />
                                            <apex:selectOption itemLabel="11" itemValue="11" />
                                            <apex:selectOption itemLabel="12" itemValue="12" />
                                            
                                            <apex:actionSupport action="{!validate}" event="onchange" rerender="pageMessagesBlock"/> 
                                        </apex:selectList>
                                    </div>
                                    :
                                    <div class="custom-user-input select">
                                        <i class="icon angle-down"></i>
                                        <apex:selectList styleClass="user-input select" value="{!campaignMinutes}" size="1">
                                            <apex:selectOption itemLabel="00" itemValue="00" />
                                            <apex:selectOption itemLabel="05" itemValue="05" />
                                            <apex:selectOption itemLabel="10" itemValue="10" />
                                            <apex:selectOption itemLabel="15" itemValue="15" />
                                            <apex:selectOption itemLabel="20" itemValue="20" />
                                            <apex:selectOption itemLabel="25" itemValue="25" />
                                            <apex:selectOption itemLabel="30" itemValue="30" />
                                            <apex:selectOption itemLabel="35" itemValue="35" />
                                            <apex:selectOption itemLabel="40" itemValue="40" />
                                            <apex:selectOption itemLabel="45" itemValue="45" />
                                            <apex:selectOption itemLabel="50" itemValue="50" />
                                            <apex:selectOption itemLabel="55" itemValue="55" />
                                            
                                            <apex:actionSupport action="{!validate}" event="onchange" rerender="pageMessagesBlock"/> 
                                        </apex:selectList>
                                    </div>
                                    <div class="custom-user-input select">
                                        <i class="icon angle-down"></i>
                                        <apex:selectList styleClass="user-input select" value="{!campaignMeridiem}" size="1">
                                            <apex:selectOption itemLabel="AM" itemValue="AM" />
                                            <apex:selectOption itemLabel="PM" itemValue="PM" />
                                            
                                            <apex:actionSupport action="{!validate}" event="onchange" rerender="pageMessagesBlock"/> 
                                        </apex:selectList>
                                    </div>
                                    <strong>{!userTimezoneDisplayName} (UTC{!userTimezoneOffset})</strong>
                                    <apex:outputPanel id="pageMessagesBlock">
                                        <apex:outputText rendered="{!NOT(ISBLANK(validationMessage))}">
                                        	<p style="font-weight: bold; color: #c00;">{!validationMessage}</p>
                                        </apex:outputText>
                                    </apex:outputPanel>
                                </div>
                            </div>
                        </section>
                    
                        
                        <div class="footer-actions text-right">
                            <apex:commandLink rendered="{!campaign.Is_Step5_Writable__c}" action="{!previous}" styleClass="button" value="Previous" />
                            <apex:commandLink rendered="{!campaign.Is_Step5_Writable__c}" action="{!saveAndExit}" reRender="pageMessagesBlock" styleClass="button" value="Save and Exit" />
                            <apex:commandLink rendered="{!campaign.Is_Step5_Writable__c}" action="{!saveAndContinue}" reRender="pageMessagesBlock" styleClass="button" value="Save and Continue" />
                            
							<apex:commandLink rendered="{!NOT(campaign.Is_Step5_Writable__c)}" action="{!previous}" value="Previous" />
                            <apex:commandLink rendered="{!NOT(campaign.Is_Step5_Writable__c)}" action="{!next}" value="Next" />
                        </div>
                    </apex:form>
                    
                </div>
            </main>
            <!-- End of Page Content -->
        </apex:define>
    </apex:composition>
</apex:page>