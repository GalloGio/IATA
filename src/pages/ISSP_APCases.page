<apex:page controller="ISSP_APProcess"
           cache="false"
           sidebar="false"
           showHeader="false"
           standardStylesheets="false"
           applyBodyTag="false"
           applyHtmlTag="false"
           >
<html>
    	<c:ISSP_Header ></c:ISSP_Header>    
 		<body>

    <apex:stylesheet value="{!URLFOR($Resource.BootstrapCSS, 'css/bootstrap.min.css')}" />    
    <!--apex:stylesheet value="{!URLFOR($Resource.DataTables, 'css/dataTables.bootstrap.min.css')}" />
    <apex:stylesheet value="{!$Resource.InternalOrderCSS}" />
    <apex:stylesheet value="{!URLFOR($Resource.BootstrapDatepicker, 'css/bootstrap-datepicker3.min.css')}" /-->     

    <!-- Load JS -->  
    <script language="JavaScript1.2" src="/js/functions.js"></script>
    <script src="/soap/ajax/9.0/connection.js" type="text/javascript"></script>
    <script id="clientEventHandlersJS" language="javascript"></script>
    <!--<script src="{!URLFOR($Resource.jquery2_1_4)}"></script>--> 
    <!--<script src="{!URLFOR($Resource.BootstrapCSS, 'js/bootstrap.min.js')}"></script> -->
    <script src="{!URLFOR($Resource.BootstrapTable, 'bootstrap-table.min.js')}"></script>        

    <!--script src="{!URLFOR($Resource.DataTables, 'js/jquery.dataTables.min.js')}"></script>
    <script src="{!URLFOR($Resource.DataTables, 'js/dataTables.bootstrap.min.js')}"></script>
    <script src="{!URLFOR($Resource.BootstrapDatepicker, 'js/bootstrap-datepicker.min.js')}"></script-->        

  <script>
    function optInOut() {
      showModal('#optInOutModal');
    }

    function showModal(modalName) {
      if (! $(modalName).is(":visible")) {
        $(modalName).modal('show');  
      }
    }

    function hideModal(modalName) {
      if ($(modalName).is(":visible")) {
        $(modalName).modal('hide');  
      }
    }     

  </script>
    
	<div class="container">   
        <c:ISSP_CustomNavigation />
    <h3>Airline Participation</h3>
    <p/>
      <apex:outputText rendered="{!dupeDraftExists}" style="color: red; font-weight:bold" value="A {!$CurrentPage.parameters.cdupetype} {!IF($CurrentPage.parameters.proc=='chg','change request','joining application')} for {!apCountry} has already been submitted for {!hqAccount.Name}. (Case no. {!newCase.CaseNumber}, status '{!newCase.Status}')"></apex:outputText>
    <p/>
    <apex:image value="/img/msg_icons/info24.png" style="vertical-align:middle;margin-right:5px;float:left" />
    <div style="margin-bottom:6px;padding-left:24px">
      This area is used to access Airline Participation Joining Applications and Change Requests that you are currently working on (Draft or Pending Customer status).<br/>
      This gives you the possibility to resume your Joining Applications and Change Requests at any time in order to submit them to IATA for processing.<br/><br/>
      Please go to <a href="/ISSP_CaseList">My Cases</a> in order to check the status of all cases you have with IATA, including Airline Participation cases already submitted for Approval.
    </div>
    <apex:pageBlock rendered="{!IsNotEmpty}">
      <apex:pageBlockButtons location="top" style="Width:100%;margin-top:20px;">
        <apex:form >
          <center>
            <apex:commandButton rendered="{!strAreaType='Airline Joining'}" styleClass="btn btn-default" onClick="navigateToUrl('/ISSP_APProcess?retUrl=/ISSP_HomePage','LIST_VIEW','newCase');return false;" value="New Joining Application"/>
            <apex:commandButton rendered="{!APprocess=='chg'}" styleClass="btn btn-default" onClick="navigateToUrl('/ISSP_APProcess?proc=chg&retUrl=/ISSP_HomePage','LIST_VIEW','newCase');return false;" value="New Change Request"/>
            <apex:commandButton rendered="{!APprocess=='bnk'}" styleClass="btn btn-default" onClick="navigateToUrl('/ISSP_APProcess?proc=bnk&retUrl=/ISSP_HomePage','LIST_VIEW','newCase');return false;" value="New Change of bank details"/>
          </center>
        </apex:form>
      </apex:pageBlockButtons>
      <br />
      <div class="panel panel-default">
        <div class="panel-body">
          <apex:pageBlockTable value="{!APDraftCases}" var="MyIFAPCases" styleClass="table">
            <apex:column headerValue="{!$Label.ISSP_CaseNumber}">
              <apex:outputLink value="/ISSP_APProcess?caseId={!MyIFAPCases.Id}&step=2">{!MyIFAPCases.CaseNumber}</apex:outputLink>
            </apex:column>
            <apex:column value="{!MyIFAPCases.Account_Concerned__r.Site}"/>
            <apex:column value="{!MyIFAPCases.Subject}"/>
            <apex:column value="{!MyIFAPCases.Status}"/>
            <apex:column value="{!MyIFAPCases.CreatedDate}"/>
            <!-- <apex:column value="{!MyIFAPCases.Reason1__c}"/> -->
          </apex:pageBlockTable>
        </div>
      </div>        
    </apex:pageBlock>

    <apex:pageBlock rendered="{!IsEmpty}" mode="maindetail">
      <div align="center" style="color:#00AEEF; padding-bottom:10px;padding-top:10px;">
        <apex:form>
          <apex:commandButton styleClass="btn btn-default" onClick="optInOut();;return false;" value="IATA Easy Pay Opt-in / Out"/>
        </apex:form>
        <h3 style="color:#FFAE00"><a onclick="optInOut();">IATA Easy Pay Opt-in / Out</a></h3>
      </div>

      <div align="center" style="color:#00AEEF; padding-bottom:5cm;padding-top:1cm;">
        <img src="https://iata--c.eu3.content.force.com/servlet/servlet.ImageServer?id=01520000000zGve&oid=00D2000000008TF&lastMod=1401896785000"/><br/>
        <h3>You don't have any pending Airline Participation {!IF(APprocess=='chg', 'Change Requests', IF(APprocess=='bnk', 'change of bank account details', 'Joining Processes'))}</h3><br/>
        <h3 style="color:#FFAE00"><a href="/ISSP_APProcess?proc={!APprocess}&retURL=/ISSP_APCases">Create a new one</a></h3>
      </div>
    </apex:pageBlock>
    
    <c:ISSP_CustomFooter />
  </div><!-- end container-->

  <div class="modal fade" id="optInOutModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="btn_iata" class="close" data-dismiss="modal" aria-hidden="true" onclick="location.reload(true);" >&times;</button>
          <h4 class="modal-title">IATA Easy Pay Opt-in / Out</h4>
        </div>
        <div class="modal-body">
          <p>
            jfxfdsjsjadfkljklfjdskjsfdkljkldfjklfdsjklsdjl
          </p>
        </div>
      </div>
    </div>
  </div>

  </body>  
</html>
</apex:page>