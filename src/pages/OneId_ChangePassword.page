<apex:page controller="ISSP_ChangePassword" showHeader="false" title="{!$Label.ISSP_ChangePassword}" language="{!$CurrentPage.parameters.language}" applyHtmlTag="false">

	<html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >

	<head>
		<apex:includeLightning />
		<apex:slds/>
		
		<apex:stylesheet value="s/OneIdResources/css/normalize.css"/>
		<apex:stylesheet value="s/OneIdResources/css/OneIdStyles.css"/>

		<style>
			body{
				background-color: white !important;
				/*needed because OneIdStyles sets body background*/
			}

			.salesforceIdentityChangePassword .slds-button {
				color: #fff;
				background-color: #eb3014;
				text-transform: uppercase;
				font-size: 16px;
	     		padding: 7px 16px;
			}

			.slds-input[type="password"]{
				border-left: 3px solid red;
				font-size: 16px;
				font-family: 'Open Sans', 'Salesforce Sans', sans serif;
			}
			
			::placeholder, ::-webkit-input-placeholder, ::-moz-placeholder, :-ms-input-placeholder,:-moz-placeholder {
				font-size: 1rem;
			}

		</style>
	</head>
	
	<div class="slds-scope">
		<div class="slds-grid">
			<div id="header" class="slds-size_1-of-1" />
		</div>
		
		<apex:form>
			<apex:outputPanel layout="block" id="mainBlock" styleClass="slds-container_large slds-container_center slds-m-vertical_medium slds-grid slds-wrap salesforceIdentityChangePassword">

				<apex:outputPanel layout="block" rendered="{!changePasswordMessage}" styleClass="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning slds-m-bottom_medium" html-role="alert">
					<span class="slds-assistive-text">Warning</span>
					<span class="slds-icon_container slds-icon-utility-warning slds-m-right_x-small" >
						<svg class="slds-icon slds-icon_x-small" aria-hidden="true">
							<use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#warning')}"></use>
						</svg>
					</span>
					<h2><apex:outputText value="{!$Label.ISSP_60Day_Password_Reset}" escape="false" /></h2>
				</apex:outputPanel>

				<div class="slds-col slds-m-bottom_medium slds-size_1-of-1 slds-has-error slds-text-align_center">
					<apex:repeat value="{!errorMessage}" var="er" id="ErrorRepeat">
					    <p class="slds-form-element__help"><apex:outputText value="{!er}" escape="false" /></p>
					</apex:repeat>
				</div>

				<div class="slds-col slds-m-bottom_medium slds-size_1-of-1">
					<div class="slds-form-element__control">
						<apex:inputSecret styleClass="slds-input" value="{!currentPassword}"  html-placeholder="{!IF(!tempPass, $Label.ISSP_CurrentPassword, $Label.ISSP_TemporaryPassword)}"/>
					</div>
				</div>

				<div class="slds-col slds-m-bottom_medium slds-size_1-of-1">
					<div class="slds-form-element__control">
						<apex:inputSecret styleClass="slds-input" value="{!newPassword}" html-placeholder="{!$Label.ISSP_NewPassword}"/>
					</div>
				</div>

				<div class="slds-col slds-m-bottom_medium slds-size_1-of-1">
					<div class="slds-form-element__control">
						<apex:inputSecret styleClass="slds-input" value="{!confirmNewPassword}" html-placeholder="{!$Label.ISSP_ConfirmPassword}"/>
					</div>
				</div>

				<div class="slds-col_bump-left slds-max-small-size_1-of-1">
					<button class="slds-button slds-size_1-of-1 slds-button_neutral" onclick="changePassword(); return false;"> {!$Label.ISSP_ChangePassword}</button>
					<apex:actionFunction action="{!changePassword}" name="changePassword" reRender="mainBlock" />
				</div>
			</apex:outputPanel>
		</apex:form>

		<div class="slds-grid">
			<div id="footer" />
		</div>
	</div>
	

	<script>
	$Lightning.use("c:OneId_Visualforce_APP", function() {
		$Lightning.createComponent("c:OneIdHeader",
			{ blockLogo : true },
			"header"
		);
		$Lightning.createComponent("c:OneIdFooter",
			{ },
			"footer"
		);
	});
	</script>
	</html>
</apex:page>