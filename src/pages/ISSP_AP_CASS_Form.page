<apex:page controller="ISSP_APProcess" showHeader="false" sidebar="false" standardStylesheets="true">
    <c:iss_ap_css />
    
    <script>
    function changePercentBox(myBox, myCheckBox, myPanel){
        var thisBox = document.getElementById(myBox);
        var thisCheckBox = document.getElementById(myCheckBox);
        var thisPanel = document.getElementById(myPanel);
        if (thisCheckBox.checked == true){
            thisPanel.style.display='block';
        }
        else{
            thisPanel.style.display='none';
            thisBox.value = '';
        }  
    }
    </script>
    
    <script>
    function onlyNumbers(event) {
        var event = event || window.event; // for trans-browser compatibility
        var charCode = event.which || event.keyCode;
     
        if (charCode > 31 && (charCode < 37 || charCode > 57))
            return false;

        return true;                
    }
    
    function checkPercentage(box){
        var thisBox = document.getElementById(box);
        var value = thisBox.value
        value = value.replace(/,/g, ".");
        value = parseFloat(value);
        if (isNaN(value)){
            value = "";
        }
        else if (value < 0){
            value = 0;
        }
        else if (value > 100){
            value = 100;
        }
        thisBox.value = value;
    }

    </script>

    <apex:variable var="localVATMandatory" value="{!countryRequirement.Local_VAT_Mandatory__c='YES'}" />

    <!-- Modal -->
<div class="modal fade" id="ModalCountryReqs" tabIndex="-1" data-backdrop='false' role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">{!strLOB} {!apcountry} - Country Requirements</h4>
      </div>
      <div class="modal-body">
        <apex:panelGrid columns="3" styleClass="countryReqsGrid" rowClasses="whiterow,bluerow" columnClasses="col1,col2,col3">
                        
                        <!-- Local Representation Mandatory -->
                        <apex:outPutText value="Local representation mandatory:"/>
                        <apex:outputField value="{!countryRequirement.Local_Representation_Mandatory__c}" />
                        <apex:outPutField value="{!countryRequirement.Local_Representation_Mandatory_com__c}"/>
                        
                        <!-- Does the airline need to have a local accountant or any kind of 3rd party for taxation issues? -->
                        <apex:outPutText value="Local accountant mandatory:"/>
                        <apex:outPutField value="{!countryRequirement.Local_accountant_mandatory__c}" />
                        <apex:outPutField value="{!countryRequirement.Local_accountant_mandatory_com__c}"/>
                        
                        <!-- Local VAT (or any equivalent to VAT like GST, RUC, RUT, NIT) mandatory?  -->
                        <apex:outPutText value="Local VAT (or equivalent such as GST, RUC, RUT, NIT) mandatory:"/>
                        <apex:outPutField value="{!countryRequirement.Local_VAT_Mandatory__c}" />  
                        <apex:outPutField value="{!countryRequirement.Local_VAT_Mandatory_com__c}"/>
                        
                        <!-- Foreign VAT accepted? (eg: Home country VAT of the airline)  -->
                        <apex:outPutText value="Foreign VAT accepted:"/>
                        <apex:outPutField value="{!countryRequirement.Foreign_VAT_accepted__c}" />            
                        <apex:outPutField value="{!countryRequirement.Foreign_VAT_accepted_com__c}"/>
                        
                        <!-- Can an airline have a special VAT status (or any special taxation status)? -->
                        <apex:outPutText value="Airline can have a special VAT status:"/>    
                        <apex:outPutField value="{!countryRequirement.Special_VAT_status_allowed__c}" />
                        <apex:outPutField value="{!countryRequirement.Special_VAT_status_allowed_com__c}"/>
                        
                        <!-- Does the airline need to have a Local Representation for Fiscal requirements? -->
                        <apex:outPutText value="Airline needs Local Representation for Fiscal requirements:"/>
                        <apex:outPutField value="{!countryRequirement.Local_Representation_for_Fiscal_requirem__c}"/>
                        <apex:outPutField value="{!countryRequirement.Local_Representation_for_Fiscal_req_com__c}"/>
                        
                        <!-- Currency of the Settlement which must be the same as of the bank account in case the airline select as settlement mode: Local Bank Mandate -->
                        <apex:outPutText value="Currency of the Settlement must be the same as the bank account in case airline selects settlement mode:"/>
                        <apex:outPutField value="{!countryRequirement.Currency_of_the_Settlement__c}"/>
                        <apex:outPutField value="{!countryRequirement.Currency_of_the_Settlement_com__c}"/>
                        
                        <!-- Does this operation have dual currencies? -->
                        <apex:outPutText value="Operation has dual currencies:"/>
                        <apex:outPutField value="{!countryRequirement.Dual_currencies__c}"/>
                        <apex:outPutField value="{!countryRequirement.Dual_currencies_com__c}"/>
                        
                        <!-- Can any airline (regardless of having a local representation or not) open a local bank account in the currency of the settlement? -->
                        <apex:outPutText value="Airline can (regardless of local representation or not) open a local bank account in the settlement currency:"/>
                        <apex:outPutField value="{!countryRequirement.bank_account_in_of_the_settlement__c}"/>
                        <apex:outPutField value="{!countryRequirement.bank_account_in_of_the_settlement_com__c}"/>
                        
                        <!-- Is it legally mandatory for the airlines to give commission to agencies? -->
                        <apex:outPutText value="Legally mandatory for airlines to give commission to agencies:"/>
                        <apex:outPutField value="{!countryRequirement.Mandatory_to_give_commission_to_agencies__c}"/>
                        <apex:outPutField value="{!countryRequirement.Mandatory_to_give_commission_to_agen_com__c}"/>
                        
                        <!-- Are there any government requirements that are included in the joining package? -->
                        <apex:outPutText value="Government requirements are included in the joining package:"/>
                        <apex:outPutField value="{!countryRequirement.Government_requirements__c}"/>
                        <apex:outPutField value="{!countryRequirement.Government_requirements_com__c}"/>
                        
                        <!-- Which type of address is accepted  inserted into ISS systems (BSPLink, CASSLink etc..)? -->
                        <apex:outPutText value="Which type of address is accepted, inserted into ISS systems (BSPLink, CASSLink etc..):"/>   
                        <apex:outPutField value="{!countryRequirement.Type_of_address_accepted__c}"/>
                        <apex:outPutField value="{!countryRequirement.Type_of_address_accepted_com__c}"/>
                        
                        <!-- VAT no. always inserted into ISS systems? (BSPLink, Casslink etc..) -->
                        <apex:outPutText value="VAT no. is always inserted into ISS systems (BSPLink, Casslink etc..:"/>
                        <apex:outPutField value="{!countryRequirement.VAT_no_always_inserted_into_ISS_systems__c}"/>
                        <apex:outPutField value="{!countryRequirement.VAT_no_always_ins_into_ISS_systems_com__c}"/>
                        
                        <!-- General Commment -->
                        <apex:outPutText value="General Comment - {!StrLOB} {!apcountry}"/>
                        <apex:outPutText escape="false" value="&nbsp;"/>
                        <apex:outPutField value="{!countryRequirement.Comments__c}"/>
                    </apex:panelGrid>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
    
    <div class="pageNav" style="display:{!IF(isStep3&&isCASS,'inline-block','none')}">
        <p class="LOB">{!strLoB}</p>
        <div style="border-top: 1px #fff dotted; padding-bottom: 3px;">
            <p>JUMP TO:</p>
        </div>
        <p><a href="#top">Top</a></p>
        <p><a href="#nav_one">1.Participation</a></p>
        <p><a href="#nav_two">2.Contact info</a></p>
        <p><a href="#nav_three">3.Airline info</a></p>
        <p><a href="#nav_four">4.GSSA info</a></p>
        <p><a href="#nav_five">5.Billing</a></p>
        <p><a href="#nav_six">6.Reporting</a></p>
        <p><a href="#nav_seven">7.CASSLink</a></p>
        <p><a href="#nav_eight">8.Commission</a></p>
        <apex:outputLink value="#nav_nine" rendered="{!OR(apcountryisocode='BR',apcountryisocode='AR',apcountryisocode='MX',apcountryisocode='PH',apcountryisocode='CO', apcountryisocode='IN')}">9.Additional Info</apex:outputLink>
        <div style="border-top: 1px #fff dotted; padding-top: 5px; padding-bottom: 5px;">
            <a data-toggle="modal" data-target="#ModalCountryReqs" href="#">Country Requirements</a>
        </div>
    </div>
    
    <div class="panel-primary">
            <div class="panel-heading head_panel_green">
                <h3 class="panel-title">Airline Participation Joining Process</h3>
            </div>
    <div class="panel-body" id="body-enquiries">
        <div class="progress">
            <div class="progress-bar progress-bar-off" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;">
            A. Participation Country &amp; Type
            </div>
            <div class="progress-bar progress-bar-off" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="0" style="width: 25%;">
            B. {!strLoB} Country Requirements
            </div>
            <div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 25%;">
            C. CASS Joining Form
            </div>
            <div class="progress-bar progress-bar-off" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 25%;">
            D. Submit to IATA
            </div>
        </div>

    <apex:outputPanel layout="block" styleclass="alert alert-info" html-role="alert" rendered="{!DocumentGuide!=null}">
        Any doubts? Please check out our&nbsp;
        <apex:outputLink value="{!URLFOR($Action.Document.Download, DocumentGuide.Id)}" style="color:#31708f; text-decoration: underline;" target="_blank" onclick="updateGuideCounter();">guide</apex:outputLink>
    </apex:outputPanel>

    <apex:form id="CASSForm" styleClass="inline">
        <apex:pageBlock mode="edit">
            
                    <apex:pageBlockButtons location="bottom">
                        <apex:actionStatus id="blockButtons">
                            <apex:facet name="start">
                                <apex:outputPanel layout="none">
                                    <apex:commandButton disabled="true" value="Previous"/>
                                    <apex:commandButton disabled="true" value="Next"/>
                                    <apex:commandButton disabled="true" value="Save Draft and Leave"/>
                                </apex:outputPanel>
                            </apex:facet>
                            
                            <apex:facet name="stop">
                                <apex:outputPanel layout="none">
                                    <apex:commandButton action="{!saveBSPFormAndGoBack}" status="blockButtons" value="Previous"/>   
                                    <apex:commandButton action="{!saveBSPFormAndGoForward}" status="blockButtons" value="Next"/>
                                    <apex:commandButton action="{!saveBSPFormAndLeave}" status="blockButtons" value="Save Draft and Leave"/>                
                                </apex:outputPanel>
                            </apex:facet>
                        </apex:actionStatus>      
                    </apex:pageBlockButtons>  

            <apex:pageMessages />
            <div class="apcontainer">               
                <apex:pageBlockSection title="" columns="1" rendered="{!isMandatory}" >  
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;color: red;" value="Please fill all the required fields before submitting your application"/>
                        </apex:outputpanel>
                    </apex:facet>    
                </apex:pageBlockSection>   
                
                <apex:pageBlockSection title="Thank you for your interest in expanding your IATA {!strLoB} participation" columns="1" >  
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="Thank you for your interest in expanding your IATA {!strLoB} participation"/>
                        </apex:outputpanel>
                    </apex:facet>           
                    <apex:outputText >
                        
                        <div class="aplabel"> This form must be fully completed and submitted on-line.</div>
                        <div class="aplabel"> By agreeing with the Terms and Conditions, the Airline representative submitting this form confirms that they are authorized to do so and accepts the charges and fees related to the Airline  participation in IATA Settlement Systems as per the applicable Passenger and/or Cargo Agency Resolutions.</div>
                        
                        <div style="color:#a31717; font-weight:bold; margin:20px 0px 10px 0px">Note: the fields marked in red and with a "*" are required before you can submit your application.<br/>However, you can save the incomplete draft application and come back later to fill all the required fields before submitting it to IATA.</div>
                    </apex:outputText>
                </apex:pageBlockSection> 
                <span id="nav_one"></span>
                <apex:pageBlockSection title="1. Participation in CASS" columns="1" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="1. Participation in CASS"/>
                        </apex:outputpanel>
                    </apex:facet>        
                    <apex:outputtext >
                        <div class="aplabel">CASS Country your Airline wishes to participate in: {!apCountry}</div>
                    </apex:outputtext>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="Operation specified:" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:outPutText value="{!MID(newCase.Subject, FIND("-", newCase.Subject) + 1, (LEN(newCase.Subject) - FIND("-", newCase.Subject)))}"/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Desired commencement date" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Desired_commencment_date__c}" label=""/>
                    </apex:pageBlockSectionItem>                
                </apex:pageBlockSection>
                <span id="nav_two"></span>
                <apex:pageBlockSection title="2. Contact person responsible for this {!strLoB} application" columns="1" >   
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="2.  Contact person responsible for this {!strLoB} application"/>
                        </apex:outputpanel>
                    </apex:facet> 
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Social Title " style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Contact_Resp_Salutation__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* First Name" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Contact_Resp_F_Name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Last Name" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Contact_Resp_L_Name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Email Address" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Contact_Resp_Email__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Job Title" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Contact_Resp_Job_Title__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Phone" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Contact_Resp_Phone__c}" label=""/>
                    </apex:pageBlockSectionItem>                
                </apex:pageBlockSection>
                <span id="nav_three"></span>            
                <apex:pageBlockSection title="3. Airline Information" columns="2" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="3.  Airline Information"/>
                        </apex:outputpanel>
                    </apex:facet>           
                    <apex:outputText label="Operation specified" value="{!newCase.Reason1__c}"/>
                    <apex:outputText label="Name of the airline on AOC" value="{!strParentAOCName}"/>
                    <apex:outputText label="Airline Designator Code (2 character code)" value="{!strParentDesignator}"/>
                    <apex:outputText label="Airline Prefix Code (3 digit code)" value="{!strParentIATACode}"/>
                    <apex:outputText label="IATA Member Airline?" value="{!strParentMembershipStatus}"/>
                    <apex:outputText label="Registered Airline Address (Head Office)" value="{0}<br/>{1}<br/>{2}" escape="false" style="width:50%">
                        <apex:param value="{!strParentBillingStreet}"/>
                        <apex:param value="{!strParentBillingCity},&nbsp;{!strParentBillingCode}"/>
                        <apex:param value="{!strParentBillingState},&nbsp;{!strParentBillingCountry}"/>
                    </apex:outputText>
                    <apex:pageBlockSectionItem helpText=" If YES, please provide your Airline's local name.">
                        <apex:outputLabel value="Is your Airline registered in {!apcountry} under a different name?"/>
                        <apex:inputField value="{!newForm.Airline_Registered_under_other_name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='RO'}">
                        <apex:outputLabel value="Does your Airline operate intra-Europe flights?" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Airline_Intra_Europe_Flights__c}" label=""/>
                    </apex:pageBlockSectionItem>
                  
                    <apex:outputText rendered="{!NOT(apcountryisocode='RO')}"><!--empty: move following field to next row --></apex:outputText>
                    
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='FR'}">
                        <apex:outputLabel value="* Company Registration number" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Company_Registration_number__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='FR'}">
                        <apex:outputLabel value="* Name of the business/commercial association" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Name_of_business_comm_assoc__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='FR'}">
                        <apex:outputLabel value="* Capital amount of the business" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Capital_amount_of_the_business__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:outputText rendered="{!apcountryisocode='FR'}"><!--empty: move following field to next row --></apex:outputText>
                    
                    <apex:pageBlockSectionItem helpText="i.e. is the Airline an online carrier?">
                        <apex:outputLabel value="* Does the Airline operate flights into/out of CASS {!apcountry}?" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Online_carrier_in_the_BSP_country__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Please indicate the flights the airline operates in CASS {!apcountry}"/>
                        <apex:inputField value="{!newForm.Flights_operated_in_the_BSP_country__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='CY'}">
                        <apex:outputLabel value="* Please advise if your airline is a Turkey based Airline" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Cyprus_Turkey_based_Airline__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:outputText rendered="{!apcountryisocode='CY'}"><!--empty: move following field to next row --></apex:outputText>
                    <apex:outputText >&nbsp;<!--empty: move following field to next row --></apex:outputText>
                    <tr>
                        <td colspan="4" class="aplabel" style="padding-top:0px">
                            Airline local address in CASS {!apcountry}
                        </td>
                    </tr>
                    
                    <apex:pageBlockSectionItem helpText="Only if applicable. Please refer to country specifics.">
                        <apex:outputLabel styleclass="ap-required" value="Address"/>
                        <apex:inputField value="{!newForm.BSP_Local_address__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel styleclass="ap-required" value="Zip Code"/>
                        <apex:inputField value="{!newForm.BSP_Local_Zip_Code__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel styleclass="ap-required" value="City" />
                        <apex:inputField value="{!newForm.BSP_Local_City__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:outputText >&nbsp;<!--empty: move following field to next row --></apex:outputText>
                    
                    <apex:pageBlockSectionItem helpText="Enter a local address if this is required in the country requirements.">
                        <apex:outputLabel value="* Address to appear on the Airline's Invoices" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Airline_Invoice_Address__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:outputText >&nbsp;<!--empty: move following field to next row --></apex:outputText>
                    
                    <apex:pageBlockSectionItem helpText="Or equivalent (RUT/RUC/RIF/ NIT). Only if applicable. Please refer to Country requirements" rendered="{!NOT(OR(apcountryisocode='BR',apcountryisocode='EC',apcountryisocode='VE'))}">
                        <apex:outputLabel value="Local VAT number in CASS {!apcountry}" styleClass="{!IF(localVATMandatory,'ap-required','')}" />
                        <apex:inputField value="{!newForm.BSP_Country_VAT_Tax_number__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='IT'}">
                        <apex:outputLabel value="* Italian Fiscal code" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Other_TAX_Identification__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='IT'}" helpText="If no information is provided, the default territory percentage of 100% will be used.">
                        <apex:outputLabel value="Territory percentage" />
                        <apex:inputField value="{!newForm.Territory_Percentage__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="In Ecuador the VAT number is called the RUC and given to each company by the Commerce Registry (Registro Mercantil)" rendered="{!apcountryisocode='EC'}">
                        <apex:outputLabel value="Your airline's VAT/RUC Number" styleClass="{!IF(localVATMandatory,'ap-required','')}"/>
                        <apex:inputField value="{!newForm.BSP_Country_VAT_Tax_number__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="The RIF must belong to the bank beneficiary account holder" rendered="{!apcountryisocode='VE'}">
                        <apex:outputLabel value="Please provide the Registro Informacion Fiscal (RIF) information" styleClass="{!IF(localVATMandatory,'ap-required','')}"/>
                        <apex:inputField value="{!newForm.BSP_Country_VAT_Tax_number__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!OR(apcountryisocode='EC',apcountryisocode='VE')}">
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;">*&nbsp;Type of Contributor {!CASE(apcountryisocode, 'EC', '(RUC)', '(RIF)')} applicable to your Airline </apex:outputLabel>
                        <apex:inputField value="{!newForm.Airline_s_Fiscal_Status__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!NOT(apcountryisocode='BR')}">
                        <apex:outputLabel value="VAT/Tax Registration number of the Airline's Home Country / Head Office" styleClass="{!IF(localVATMandatory,'','ap-required')}"/>
                        <apex:inputField value="{!newForm.VAT_Tax_number_in_your_home_country__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:outputText rendered="{!OR(apcountryisocode='EC',apcountryisocode='VE')}"><!--empty: move following field to next row --></apex:outputText>
                    
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='CO'}">
                        <apex:outputLabel value="* Name appearing in the RUT" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputText value="{!newForm.Name_Appearing_in_VAT__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='CO'}" >
                        <apex:outputLabel value="* Type of Contributor applicable to your Airline" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Colombia_Type_of_Contributor__c}" />
                    </apex:pageBlockSectionItem>
                     
                    <div class="aplabel">   
                        General Contact Person (To appear in the CASSlink master table.) 
                    </div>
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>  
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Social Title" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.CASSLink_Contact_Salutation__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* First Name" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.CASSLink_Contact_F_Name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Last Name" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.CASSLink_Contact_L_Name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Job Title" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.CASSLink_Contact_Job_Title__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Email Address" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.CASSLink_Contact_Email__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="Including country code">
                        <apex:outputLabel value="* Phone number" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.CASSLink_Contact_Phone__c}" label=""/>
                    </apex:pageBlockSectionItem>                
                    <apex:inputField label="Fax number" value="{!newForm.CASSLink_Contact_Fax__c}" />
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>                       
                    <div class="aplabel">             
                        Email address for Defaults (up to 2 allowed)
                    </div>
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>                     
                    <apex:inputField label="Email 1" value="{!newForm.CASS_Defaults_Email_1__c}"/>
                    <apex:inputField label="Email 2" value="{!newForm.CASS_Defaults_Email_2__c}"/>
                </apex:pageBlockSection>    
                <span id="nav_four"></span>
                <apex:pageBlockSection title="4. GSSA Information" columns="2" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="4.  GSSA Information"/>
                        </apex:outputpanel>
                    </apex:facet>
                    <apex:pageBlockSectionItem rendered="{!NOT(isGSSAUser)}">
                        <apex:outputLabel value="Legal Name of GSSA"/>
                        <apex:inputField value="{!newForm.GSSA_Legal_Name__c}"/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!(isGSSAUser)}">
                        <apex:outputLabel value="Legal Name of GSSA"/>
                        <apex:outputText value="{!strGSSAName}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!NOT(isGSSAUser)}">
                        <apex:outputLabel value="GSSA Address"/>
                        <apex:inputField value="{!newForm.GSSA_Address__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!(isGSSAUser)}">
                        <apex:outputLabel value="GSSA Address"/>
                        <apex:outputText value="{!strGSSAAddress}" label="" escape="false" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="If the GSSA is already a Participant in the CASS operation." rendered="{!NOT(isGSSAUser)}">
                        <apex:outputLabel value="GSSA code"/>
                        <apex:inputField value="{!newForm.GSSA_Code__c}"/>
                    </apex:pageBlockSectionItem>
                    <apex:outputText rendered="{!NOT(isGSSAUser)}"><!--empty: move following field to next row --></apex:outputText>
                    
                    <div class="aplabel">              
                        GSSA Contact details
                    </div>
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText> 
                    <apex:inputField label="Social title" value="{!newForm.GSSA_Contact_Salutation__c}"/>
                    <apex:inputField label="First name" value="{!newForm.GSSA_Contact_F_Name__c}"/>
                    <apex:inputField label="Last name" value="{!newForm.GSSA_Contact_L_Name__c}"/>
                    <apex:inputField label="Job title" value="{!newForm.GSSA_Contact_JobTitle__c}"/>
                    <apex:inputField label="Email address" value="{!newForm.GSSA_Contact_Email__c}"/>
                    <apex:inputField label="Phone number" value="{!newForm.GSSA_Contact_Phone__c}"/>
                    <apex:inputField label="Fax number" value="{!newForm.GSSA_Contact_FAX__c}"/>
                    
                </apex:pageBlockSection>
                
                <span id="nav_five"></span>
                <apex:pageBlockSection title="5. Sales Reporting / Billing Details" columns="1" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="5.  Sales Reporting / Billing Details"/>
                        </apex:outputpanel>
                    </apex:facet>           
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* How will your Airline Billing Data file be generated?" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Airline_Billing_Data_File_Type__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <div class="aplabel">              
                        Emergency Contact Person name and e-mail address in case Billing file is not uploaded as per local CASS calendar
                    </div>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Social Title" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Billing_File_Emrgcy_Contact_Salutation__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* First Name" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Billing_File_Emrgcy_Contact_F_Name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Last Name" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Billing_File_Emrgcy_Contact_L_Name__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Job Title" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Billing_File_Emrgcy_Contact_Job_Title__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Email Address" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Billing_File_Emrgcy_Contact_Email__c}" label=""/>
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
                <span id="nav_six"></span>        
                <apex:pageBlockSection title="6. Report Options" columns="2" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="6.  Report Options"/>
                        </apex:outputpanel>
                    </apex:facet>           
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Does the Airline wish to receive HOT files?" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Receive_HOT_files__c}" label=""/>
                    </apex:pageBlockSectionItem>            
                    <apex:inputField label="HOT file receipt preference" value="{!newForm.Hot_files_delivery_format__c}"/>
                    
                    <div class="aplabel">              
                        If E-mail and Download, Please list up to 4 email addresses for distribution of the HOT file
                    </div>   
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>                         
                    <apex:inputField label="Email 1" value="{!newForm.HOT_File_Recipient_Email_1__c}"/>
                    <apex:inputField label="Email 2" value="{!newForm.HOT_File_Recipient_Email_2__c}"/>
                    <apex:inputField label="Email 3" value="{!newForm.HOT_File_Recipient_Email_3__c}"/>
                    <apex:inputField label="Email 4" value="{!newForm.HOT_File_Recipient_Email_4__c}"/>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* PDF Report receipt preference" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.PDF_Report_Delivery_Format__c}" label=""/>
                    </apex:pageBlockSectionItem>    
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>                   
                    <div class="aplabel">              
                        If E-mail and Download, Please list up to 4 email addresses for distribution of invoice as PDF file
                    </div>
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>                         
                    <apex:inputField label="Email 1" value="{!newForm.PDF_File_Recipient_Email_1__c}"/>
                    <apex:inputField label="Email 2" value="{!newForm.PDF_File_Recipient_Email_2__c}"/>
                    <apex:inputField label="Email 3" value="{!newForm.PDF_File_Recipient_Email_3__c}"/>
                    <apex:inputField label="Email 4" value="{!newForm.PDF_File_Recipient_Email_4__c}"/>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Does your Airline wish to receive XLS reports?" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Receive_XLS_Reports__c}" label=""/>
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>    
                <span id="nav_seven"></span>
                <apex:pageBlockSection title="7. CASSLink Usernames and System functionality required" columns="2" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="7.  CASSLink Usernames and System functionality required"/>
                        </apex:outputpanel>
                    </apex:facet>           
                    <tr class="aplabel">              
                        <td style="font-size: 120%;" colspan="4">Existing Users</td>
                    </tr>
                    <tr class="aplabel">              
                        <td colspan="4">If the Airline has existing CASSlink users in other CASS operations that you wish to have access to this new operation, please indicate the CASSlink username here, and tick the corresponding functions required.</td>
                    </tr>
                    
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>                     
                    <apex:inputField label="CASSlink User Email 1" value="{!newForm.CASSLink_Username_1__c}"/>
                    <apex:inputField label="System functions required for this User:" value="{!newForm.CASSLink_User_1_System_Functions__c}"/>
                    <apex:inputField label="CASSlink User Email 2" value="{!newForm.CASSLink_Username_2__c}"/>
                    <apex:inputField label="System functions required for this User:" value="{!newForm.CASSLink_User_2_System_Functions__c}"/>
                    <apex:inputField label="CASSlink User Email 3" value="{!newForm.CASSLink_Username_3__c}"/>
                    <apex:inputField label="System functions required for this User:" value="{!newForm.CASSLink_User_3_System_Functions__c}"/>
              </apex:pageBlockSection>
              <apex:pageBlockSection columns="1">  
                    <tr class="aplabel">              
                        <td colspan="2">If more than 3 existing users need to be created, please provide user emails and the corresponding functions required.</td>
                    </tr>            
                    <apex:inputField label="Extra existing users" value="{!newForm.CASSLink_Extra_Existing_Users__c}" style="width:50%"/>
              </apex:pageBlockSection>
   
                <table style="margin-top:30px; border-collapse: collapse">
                    <tr class="aplabel">              
                        <td style="font-size: 120%;" colspan="2">New Users</td>
                    </tr>
                    <tr class="aplabel">              
                        <td colspan="2">Please supply the Name and E-mail address of each Airline/GSSA staff that will require access to CASSLink, including System function required per person.</td>
                    </tr>
                    <tr>
                        <td style="padding-bottom:15px">
                            <apex:pageBlockSection columns="1">
                                <apex:inputField label="Social Title 1" value="{!newForm.CASSLink_New_User_1_Salutation__c}"/>
                                <apex:inputField label="First Name 1" value="{!newForm.CASSLink_New_User_1_F_Name__c}"/>
                                <apex:inputField label="Last Name 1" value="{!newForm.CASSLink_New_User_1_L_Name__c}"/>
                                <apex:inputField label="Email address 1" value="{!newForm.CASSLink_New_User_1_Email__c}"/>
                            </apex:pageBlockSection>
                        </td>
                        <td valign="top">
                           <apex:pageBlockSection columns="1">
                                <apex:inputField label="System functions required (New user 1)" value="{!newForm.CASSLink_New_User_1_System_Functions__c}"/>
                            </apex:pageBlockSection> 
                        </td>
                     </tr>
                    <tr>
                        <td style="padding-bottom:15px">
                            <apex:pageBlockSection columns="1">
                                <apex:inputField label="Social Title 2" value="{!newForm.CASSLink_New_User_2_Salutation__c}"/>
                                <apex:inputField label="First Name 2" value="{!newForm.CASSLink_New_User_2_F_Name__c}"/>
                                <apex:inputField label="Last Name 2" value="{!newForm.CASSLink_New_User_2_L_Name__c}"/>
                                <apex:inputField label="Email address 2" value="{!newForm.CASSLink_New_User_2_Email__c}"/>
                            </apex:pageBlockSection>
                        </td>
                        <td valign="top">
                            <apex:pageBlockSection columns="1">
                                <apex:inputField label="System functions required (New user 2)" value="{!newForm.CASSLink_New_User_2_System_Functions__c}"/>
                            </apex:pageBlockSection>
                        </td>
                    </tr>
                    <tr>
                      <td>  
                            <apex:pageBlockSection columns="1">
                                <apex:inputField label="Social Title 3" value="{!newForm.CASSLink_New_User_3_Salutation__c}"/>
                                <apex:inputField label="First Name 3" value="{!newForm.CASSLink_New_User_3_F_Name__c}"/>
                                <apex:inputField label="Last Name 3" value="{!newForm.CASSLink_New_User_3_L_Name__c}"/>
                                <apex:inputField label="Email address 3" value="{!newForm.CASSLink_New_User_3_Email__c}"/>
                            </apex:pageBlockSection>
                        </td>
                        <td valign="top">                            
                            <apex:pageBlockSection columns="1">
                                <apex:inputField label="System functions required (New user 3)" value="{!newForm.CASSLink_New_User_3_System_Functions__c}"/>
                            </apex:pageBlockSection>
                        </td>
                    </tr>
                    </table>
                
                    <apex:pageBlockSection columns="1">
                    <tr class="aplabel">              
                        <td colspan="2">If more than 3 new users need to be created, please provide details and the corresponding functions required.</td>
                    </tr>
                    <apex:inputField label="Extra new users" value="{!newForm.CASSLink_Extra_New_Users__c}" style="width:50%"/>
                    </apex:pageBlockSection>
                     
                <span id="nav_eight"></span>
                <apex:pageBlockSection title="8. Commission" columns="2" >
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="8.  Commission"/>
                        </apex:outputpanel>
                    </apex:facet>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="* Does the Airline pay commission to Agents?" style="color:#a31717; font-weight: bold !important;"/>
                        <apex:inputField value="{!newForm.Pay_Commission_to_agents__c}" label=""/>
                    </apex:pageBlockSectionItem>            
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText> 
                    <apex:pageBlockSectionItem helpText="Standard Commission will be applied where AWB Billing record indicates a Commission is to be paid on the billing file uploaded in CASSlink.">
                        <apex:outputLabel value="If YES above, does the Airline provide a Standard Commission?" styleclass="ap-required"/>
                        <apex:inputField value="{!newForm.Pay_Standard_Commission__c}" label=""/>
                    </apex:pageBlockSectionItem>                      
                    <apex:inputField label="Standard Commission Rate (%)" value="{!newForm.Commission_Rate__c}"/>
                </apex:pageBlockSection>    
                
                <span id="nav_nine"></span>   
                <apex:pageBlockSection title="9. Additional Information - {!CASE(apcountryisocode, 'BR', 'Local VAT # (CNPJ - Certificado Nacional de Personas juridicas)', 'Local VAT - RFC #')}" rendered="{!OR(apcountryisocode='BR',apcountryisocode='MX')}">
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="9. Additional Information - {!CASE(apcountryisocode, 'BR', 'Local VAT # (CNPJ - Certificado Nacional de Personas jur?dicas)', 'Local VAT - RFC #')}"/>
                        </apex:outputpanel>
                    </apex:facet>
                <apex:pageBlockSection title="10. Additional Information - {!CASE(apcountryisocode, 'BR', 'Local VAT # (CNPJ - Certificado Nacional de Personas juridicas)', 'Local VAT - RFC #')}" columns="1" rendered="{!OR(apcountryisocode='BR',apcountryisocode='MX')}">
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="10. Additional Information - {!CASE(apcountryisocode, 'BR', 'Local VAT # (CNPJ - Certificado Nacional de Personas jurídicas)', 'Local VAT - RFC #')}"/>
                    <apex:pageBlockSectionItem helpText="{!CASE(apcountryisocode, 'BR', 'Format : XX.XXX.XXX/XXXX-XX. Must be that of the Bank Beneficiary Account Holder.', 'As per local law the RFC number (Local VAT no.) must correspond with the Local Fiscal Address of the Airline Participant and should be provided to IATA')}">
                        <apex:outputLabel styleClass="{!IF(localVATMandatory,'ap-required','')}" value="{!CASE(apcountryisocode, 'BR','* CNPJ # to be entered in IATA Systems', '* RFC # to be entered in IATA Systems')}"/>
                        <apex:inputField value="{!newForm.BSP_Country_VAT_Tax_number__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='BR'}">
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;" value="* Does the CNPJ# provided correspond with the Bank Beneficiary Account Holder?"/>
                        <apex:inputField value="{!newForm.AP_BR_BankBeneficiary_Account_Holder__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;" value="* Address to be inserted in IATA systems"/>
                        <apex:inputField value="{!newForm.AP_BR_Address_To_Insert__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!apcountryisocode='BR'}">
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;" value="* Does the supplied address correspond with the {!CASE(apcountryisocode, 'BR','CNPJ', 'RFC')} # provided?"/>
                        <apex:inputField value="{!newForm.AP_BR_Address_CNP__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSection title="Please enclose" columns="1" rendered="{!apcountryisocode='BR'}">
                        <apex:iframe scrolling="false" height="160px"
                            src="/ISSP_FormUpload?caseId={!newCase.Id}&reqCnt=0&reqRequired=Mandatory&reqName=1) A copy of the CNPJ Certification&reqDescription=&reqIdentifier=Additional_Information_BR&onlyOne=true"/>
                        <apex:iframe scrolling="false" height="160px"
                            src="/ISSP_FormUpload?caseId={!newCase.Id}&reqCnt=1&reqRequired=Mandatory&reqName=2) The ANAC Authorization or Publication provided by the Offical Gazetta&reqDescription=&reqIdentifier=Additional_Information_BR&onlyOne=true"/>
                    </apex:pageBlockSection>

                </apex:pageBlockSection>
                
                <!-- ARGENTINA - START -->
                <apex:pageBlockSection title="10. Additional Information - Clave Bancaria Unificada (CBU)" columns="1" rendered="{!apcountryisocode='AR'}">
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="9. Additional Information - Clave Bancaria Unificada (CBU)"/>
                        </apex:outputpanel>
                    </apex:facet>
                    <apex:pageBlockSectionItem helpText="The CBU, usually referred to as the Bank Code, consists of 22 digits and is mandatory for Airline settlements.">
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;" value="* Please provide your CBU"/>
                        <apex:inputField value="{!newForm.Clave_Bancaria_Unificada_CBU__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    <apex:outputText ><!--empty: move following field to next row --></apex:outputText>
                    
                    <apex:pageBlockSection title="Please provide copies of the following documents:" columns="1">
                        <apex:iframe scrolling="false" height="230px"
                            src="/ISSP_FormUpload?caseId={!newCase.Id}&reqCnt=2&reqRequired=Mandatory&reqName=a. Permission granted by the Civil Aviation Authority (Administracion Nacional de Aviacion Civil  -- ANAC) for your Airline to operate regular flights in Argentina.&reqDescription=If you are joining the BSP through a General Sales Agent (GSA), permission should be granted to the GSA, authorizing tickets sales in the country.&reqIdentifier=Additional_Information_AR&onlyOne=true"/>
                        <apex:iframe scrolling="false" height="230px"
                            src="/ISSP_FormUpload?caseId={!newCase.Id}&reqCnt=3&reqRequired=Mandatory&reqName=b. Fiscal ID registration number (Clave Unica de Identificacion Tributaria  -- CUIT) granted by the Fiscal Authority (AFIP).&reqDescription=If you are joining the BSP through a GSA, the GSA's fiscal ID number/CUIT will be accepted.<br/><br/>&reqIdentifier=Additional_Information_AR&onlyOne=true"/>
                        <apex:iframe scrolling="false" height="230px"
                            src="/ISSP_FormUpload?caseId={!newCase.Id}&reqCnt=4&reqRequired=Mandatory&reqName=c. Registered in-laws and Power of Attorney to show your Airline's representation in Argentina.&reqDescription=If you are joining the BSP through a GSA, a copy of the GSA agreement must be presented.&reqIdentifier=Additional_Information_AR&onlyOne=true"/>
                    </apex:pageBlockSection>

                </apex:pageBlockSection>
                
                <!-- PHILIPPINES - START -->
                <apex:pageBlockSection title="10. Additional Legal Requirements - CASS Philippines" columns="1" rendered="{!apcountryisocode='PH'}">
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="10. Additional Legal Requirements - CASS Philippines"/>
                        </apex:outputpanel>
                    </apex:facet>
                    <apex:outputText value="Withholding tax" styleClass="aplabel"/>
                    <apex:pageBlockSectionItem helpText="In case the Airline's home country has a special bilateral agreement with the Philippine government that entitles it to either apply a lower withholding tax rate or be exempt from the mandatory 2% tax, then this preferential rate will apply.">
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;" value="* Does your home country have a special bilateral agreement with the Philippine government?"/>
                        <apex:inputField value="{!newForm.CASS_PH_Bilateral_Agreement__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="If YES, please specify the tax rate."/>
                        <apex:inputField value="{!newForm.CASS_PH_Bilat_Agreement_Tax_Rate__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:outputText value="Currency of Billing" styleClass="aplabel"/>
                    <apex:pageBlockSectionItem helpText="CASS Philippines operates under a single currency, dual environment set-up -- USD and PHP. An airline CASS joiner can choose which currency to accept for its settlements:">
                        <apex:outputLabel style="color:#a31717; font-weight: bold !important;" value="Please choose your preferred currency of billing:"/>
                        <apex:inputField value="{!newForm.CASS_PH_Preferred_Billing_Currency__c}" label=""/>
                    </apex:pageBlockSectionItem>
                    
                </apex:pageBlockSection>   
                
                <!-- COLOMBIA - START -->
                <apex:pageBlockSection title="9. Additional Information - ICA Taxes" columns="2" rendered="{!apcountryisocode='CO'}">
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="9. Additional Information - ICA Taxes"/>
                        </apex:outputpanel>
                    </apex:facet>
                    <tr class="aplabel">
                        <td colspan="2">City where the Industry and Commerce Tax (ICA) percentage applies.<br/>If your Airline is legally obliged to pay ICA in more than one city, please identify all cities and indicate the applicable ICA percentage.</td>
                    </tr>
                    <apex:pageBlockTable value="{!cityList}" var="city" columnsWidth="10%, 30%, 20%, 40%" >
                        <apex:column style="text-align:center" headerClass="columnTitleCenter" > 
                            <apex:facet name="header">
                               Selected
                            </apex:facet>
                            <apex:inputCheckBox value="{!city.selected}" id="theCheckBox" onchange="changePercentBox('{!$Component.thePercentBox}', '{!$Component.theCheckBox}', '{!$Component.thePanel}');" />
                        </apex:column>
                        <apex:column > 
                            <apex:facet name="header">
                               City
                            </apex:facet>
                            {!city.city}
                        </apex:column>
                        <apex:column > 
                            <apex:facet name="header">
                               ICA Percentage<br/><span style="font-weight:normal !important; font-style:italic">Please enter numbers and decimals only, e.g. [9.66/1000] or [9.66 x mil] should be entered as 9.66</span>
                            </apex:facet>
                            <apex:outputPanel id="thePanel" style="{!IF (city.selected, '', 'display:none')}" >
                                <apex:inputText onchange="checkPercentage('{!$Component.thePercentBox}')" onkeypress="return onlyNumbers(event);" value="{!city.percentage}" id="thePercentBox" />
                            </apex:outputPanel>
                        </apex:column>
                        <apex:column >
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>

                <!-- INDIA - START -->
                <apex:pageBlockSection title="10. Local VAT Information" columns="1" rendered="{!apcountryisocode='IN'}">                        
                    <apex:facet name="header">
                        <apex:outputpanel >
                            <apex:outputText style="font-weight:bold;font-size:15px;float:left;" value="10. Local VAT Information"/>
                        </apex:outputpanel>
                    </apex:facet>
                    <tr class="aplabel">
                        <td colspan="2">The Goods and Services Tax, replacing the erstwhile multiple taxes and levies has come into effect from 01 July 2017. This means that all invoices that are issued for transactions commencing from 01 July 2017 will need to bear GST Registration numbers of the Suppliers and Recipients of goods and Services. You need to register of each of your registered locations under the GST Rules that bear a distinct GST Registration number. Therefore please fill in all the below fields including your main office (which you have detailed in Section 2 - Airline Information).</td>
                    </tr>
                    <tr class="aplabel">              
                        <td style="font-size: 120%;" colspan="4">GST Information</td>
                    </tr>
                    <apex:commandLink style="margin-right:5px" action="{!showNewGSTNumberFields}" rerender="tstpopup"><span class="glyphicon glyphicon-plus"></span>Add New GST Information</apex:commandLink>

                    <apex:outputPanel id="tstpopup">
                        <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">
                            <apex:pageBlockSection id="contactSection" columns="1">  
                                <tr class="aplabel">              
                                    <td style="font-size: 120%;" colspan="4">GST Information</td>
                                </tr>
                                <apex:pageBlockSectionItem >
                                    <apex:outputLabel value="* GST number" style="color:#a31717; font-weight: bold !important;"/>
                                    <apex:inputText value="{!newGSTInfo.India_Local_VAT_Number__c}">
                                        <apex:actionSupport event="onkeyup" action="{!checkAllFieldGST}" rerender="saveGSTInfoBtn"/>
                                    </apex:inputText>
                                </apex:pageBlockSectionItem>
                                <tr class="aplabel">              
                                    <td style="font-size: 120%;" colspan="4">Registered Address for the above mentioned GST Number</td>
                                </tr>
                                <apex:pageBlockSectionItem >
                                    <apex:outputLabel value="* Street Name and Number" style="color:#a31717; font-weight: bold !important;"/>
                                    <apex:inputText value="{!newGSTInfo.India_Local_VAT_Street__c}">
                                        <apex:actionSupport event="onkeyup" action="{!checkAllFieldGST}" rerender="saveGSTInfoBtn"/>
                                    </apex:inputText>
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem >
                                    <apex:outputLabel value="* City Name" style="color:#a31717; font-weight: bold !important;"/>
                                    <apex:inputText value="{!newGSTInfo.India_Local_VAT_City__c}">
                                        <apex:actionSupport event="onkeyup" action="{!checkAllFieldGST}" rerender="saveGSTInfoBtn"/>
                                    </apex:inputText>
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem >
                                    <apex:outputLabel value="* State Name" style="color:#a31717; font-weight: bold !important;"/>
                                    <apex:inputText value="{!newGSTInfo.India_Local_VAT_State_Name__c}">
                                        <apex:actionSupport event="onkeyup" action="{!checkAllFieldGST}" rerender="saveGSTInfoBtn"/>
                                    </apex:inputText>
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem >
                                    <apex:outputLabel value="* State Code (two alpha)" style="color:#a31717; font-weight: bold !important;"/>
                                    <apex:inputText value="{!newGSTInfo.India_Local_VAT_State_Code__c}" maxlength="2">
                                        <apex:actionSupport event="onkeyup" action="{!checkAllFieldGST}" rerender="saveGSTInfoBtn"/>
                                    </apex:inputText>
                                </apex:pageBlockSectionItem>             
                            </apex:pageBlockSection>
                            <br/>
                            <apex:commandButton value="Cancel" action="{!closePopup}" rerender="tstpopup"/>
                            <apex:commandButton id="saveGSTInfoBtn" value="Save" action="{!addGSTInfo}" rerender="tstpopup,gstNumberList" disabled="{!NOT(allGSTFieldsFilled)}"/>
                            <br/><br/>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    
                    <apex:pageBlockSection id="gstNumberList" columns="1">          
                        <apex:pageBlockTable value="{!list_GSTNumber}" var="gstNumber" id="gstNumberTable" styleClass="table-hover table table-condensed table-responsive" rendered="{!list_GSTNumber.size!=0}">
                            <apex:column headerValue="GST number" value="{!gstNumber.India_Local_VAT_Number__c}"/> 
                            <apex:column headerValue="Street Name and Number" value="{!gstNumber.India_Local_VAT_Street__c}"/>
                            <apex:column headerValue="City Name" value="{!gstNumber.India_Local_VAT_City__c}"/>
                            <apex:column headerValue="State Name" value="{!gstNumber.India_Local_VAT_State_Name__c}"/>   
                            <apex:column headerValue="State Code (two alpha)" value="{!gstNumber.India_Local_VAT_State_Code__c}"/>
                            <apex:column >
                                <apex:commandLink action="{!editGSTNumber}" styleClass="glyphicon glyphicon-pencil" rerender="tstpopup">
                                    <apex:param value="{!gstNumber.Id}" name="recordIdEdit"/>
                                </apex:commandLink>
                            </apex:column>
                            <apex:column >
                                <apex:commandLink onclick="if(!confirm('{!$Label.ISSP_AMS_CONFIRM_DELETE}')){return false};" styleClass="glyphicon glyphicon-trash" action="{!delGSTNumber}" rerender="gstNumberList">
                                    <apex:param value="{!gstNumber.Id}" name="recordIdDel"/>
                                </apex:commandLink>
                            </apex:column>
                        </apex:pageBlockTable>
                    </apex:pageBlockSection> 
                </apex:pageBlockSection>
            </div>
        </apex:pageBlock>
    </apex:form>
    
        </div>   
     </div>  

    <Script>
        function setFocusOnLoad() {}
    </Script>
</apex:page>