<template>
	<!-- TITLE -->
		<div class="slds-p-horizontal_large slds-p-vertical_large mediumTitle text-bold text-small">
			{label.CSP_LabRegistry}
		</div>

		<!-- main content with form-->
		<div class="slds-p-horizontal_small slds-p-horizontal_large slds-size_1-of-1 customWhiteBackground">
			<div class="slds-p-vertical_large textMediumMessage">
				
				<template if:true={showMandatoryFieldsError}>
					<div class="whiteIcon text-xxsmall errorBox">
						<div class="slds-grid slds-gutters">
							<div class="slds-col slds-m-left_medium slds-size_12-of-13">
								{label.CSP_Error_Message_Mandatory_Fields}
							</div>
						</div>
					</div>
				</template>

				<div if:true={isFirstStep} class="isFirstStep">
					<template if:true={FIELD_Lab_Type_PicklistValues.data}>
						<div class="slds-var-m-around_medium">
							<lightning-combobox
								name="labTypeSelection"
								label={label.CSP_LabReg_InitialQuestion}
								placeholder="Select Lab Type"
								options={FIELD_Lab_Type_PicklistValues.data.values}
								onchange={handleFormElementChange}
								value={labTypeSelection}
								required>
							</lightning-combobox>
						</div>
					</template>
				</div>


				<div if:true={setAForm} class="setAForm">
					<div if:true={SetAstep01} class="SetAstep01">

						<lightning-accordion>
							<lightning-accordion-section name="countriesAfrica" label="Africa &amp; Middle East">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesAfrica}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column
											oncellchange={handleCountryInlineEdit}>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesAmerica" label="Americas">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesAmerica}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesAsia" label="Asia &amp; Pacific">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesAsia}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesChina" label="China &amp; North Asia">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesChina}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesEurope" label="Europe">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesEurope}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
						</lightning-accordion>
					</div>
					
					<div if:true={SetAstep02} class="SetAStep02">
						<div class="slds-p-around_medium lgc-bg">
							<lightning-input 
								name="SLAInPlace"
								value={SLAInPlace} 
								type="text" 
								label={label.CSP_LabReg_SLA_InPlace}
								placeholder="type here..." 
								onchange={handleFormElementChange}
								required>
							</lightning-input>
						</div>

						<template if:true={FIELD_Do_you_manage_booking_for_all_locations_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="manageBookingSelection"
									value={manageBookingSelection}
									label={label.CSP_LabReg_manageBookingSelection}
									options={FIELD_Do_you_manage_booking_for_all_locations_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>

						<template if:true={FIELD_Do_you_issue_test_results_for_all_lab_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="issueTestResultsSelection"
									value={issueTestResultsSelection}
									label={label.CSP_LabReg_issueTestResultsSelection}
									options={FIELD_Do_you_issue_test_results_for_all_lab_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>


						<template if:true={FIELD_Existing_partnership_with_airlines_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="airlinePartnership01Selection"
									value={airlinePartnership01Selection}
									label={label.CSP_LabReg_airlinePartnershipSelection}
									options={FIELD_Existing_partnership_with_airlines_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>

					</div>
				</div>

				
				<div if:true={setBForm} class="setBForm">
					<div if:true={SetBstep01} class="SetBstep01">

						<lightning-accordion>
							<lightning-accordion-section name="countriesAfrica" label="Africa &amp; Middle East">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesAfrica}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column
											oncellchange={handleCountryInlineEdit}>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesAmerica" label="Americas">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesAmerica}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesAsia" label="Asia &amp; Pacific">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesAsia}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesChina" label="China &amp; North Asia">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesChina}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
							
							<lightning-accordion-section name="countriesEurope" label="Europe">
								<div style="height: 300px;">
									<lightning-datatable
											key-field="Id"
											data={countriesEurope}
											row-number-offset=0
											suppress-bottom-bar
											columns={countryColumns}
											hide-checkbox-column>
									</lightning-datatable>
								</div>
							</lightning-accordion-section>
						</lightning-accordion>
					</div>
					<div if:true={SetBstep02} class="SetBStep02">
						<template if:true={FIELD_Type_of_lab_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="typeOfLabSelection"
									value={typeOfLabSelection}
									label={label.CSP_LabReg_TypeOfLab}
									options={FIELD_Type_of_lab_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>
						

						<div class="slds-p-around_medium lgc-bg">
							<lightning-input 
								type="text"
								name="SLACertificationInPlace"
								value={SLACertificationInPlace}
								label={label.CSP_LabReg_SLACertification}
								placeholder="type here..." 
								onchange={handleFormElementChange} 
								required>
							</lightning-input>
						</div>

						<template if:true={FIELD_National_accreditation_for_all_the_labs_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="nationalAccreditationSelection"
									value={nationalAccreditationSelection}
									label={label.CSP_LabReg_nationalAccreditationSelection}
									options={FIELD_National_accreditation_for_all_the_labs_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>

						<template if:true={FIELD_Are_your_labs_part_of_national_platform_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="labsPartOfNationalPlatform"
									value={labsPartOfNationalPlatform}
									label={label.CSP_LabReg_labsPartOfNationalPlatform}
									options={FIELD_Are_your_labs_part_of_national_platform_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>

						<template if:true={FIELD_Existing_partnership_with_airlines_PicklistValues.data}>
							<div class="slds-var-m-around_medium">
								<lightning-combobox
									name="airlinePartnership02Selection"
									value={airlinePartnership02Selection}
									label={label.CSP_LabReg_airlinePartnershipSelection}
									options={FIELD_Existing_partnership_with_airlines_PicklistValues.data.values}
									onchange={handleFormElementChange}
									required>
								</lightning-combobox>
							</div>
						</template>
					</div>
				</div>

				<div if:true={airlineSelectionStep} class="airlineSelectionStep">
					{label.CSP_LabReg_WhichAirlines}
					<!--<lightning-input type="search" label="Search" placeholder="search airline..." onchange={filterAirlines}></lightning-input>-->
					<div>
						<ul class="slds-list_horizontal slds-has-block-links_space">
							<li><a onclick={handleLetterFilter}>#</a></li>
							<li><a onclick={handleLetterFilter}>A</a></li>
							<li><a onclick={handleLetterFilter}>B</a></li>
							<li><a onclick={handleLetterFilter}>C</a></li>
							<li><a onclick={handleLetterFilter}>D</a></li>
							<li><a onclick={handleLetterFilter}>E</a></li>
							<li><a onclick={handleLetterFilter}>F</a></li>
							<li><a onclick={handleLetterFilter}>G</a></li>
							<li><a onclick={handleLetterFilter}>H</a></li>
							<li><a onclick={handleLetterFilter}>I</a></li>
							<li><a onclick={handleLetterFilter}>J</a></li>
							<li><a onclick={handleLetterFilter}>K</a></li>
							<li><a onclick={handleLetterFilter}>L</a></li>
							<li><a onclick={handleLetterFilter}>M</a></li>
							<li><a onclick={handleLetterFilter}>N</a></li>
							<li><a onclick={handleLetterFilter}>O</a></li>
							<li><a onclick={handleLetterFilter}>P</a></li>
							<li><a onclick={handleLetterFilter}>Q</a></li>
							<li><a onclick={handleLetterFilter}>R</a></li>
							<li><a onclick={handleLetterFilter}>S</a></li>
							<li><a onclick={handleLetterFilter}>T</a></li>
							<li><a onclick={handleLetterFilter}>U</a></li>
							<li><a onclick={handleLetterFilter}>V</a></li>
							<li><a onclick={handleLetterFilter}>W</a></li>
							<li><a onclick={handleLetterFilter}>X</a></li>
							<li><a onclick={handleLetterFilter}>Z</a></li>
							<li><a onclick={handleLetterFilter}>ALL</a></li>
						</ul>
					</div>
					<div style="height: 200px;">
						<lightning-datatable
							data={airlinesHQ}
							columns={airlinesHQColumns}
							key-field="Id"
          					onrowselection={selectAirline}>  
						</lightning-datatable> 
					</div>
					
					Selected Airlines
					<div style="height: 200px;">
						<lightning-datatable
							data={selectedAirlines}
							columns={airlinesHQColumns}
							key-field="Id">  
						</lightning-datatable> 
					</div>
					
				</div>

				<!--<div if:true={confirmStep} class="confirmStep">
					Are you sure you want to submit your request?
				</div>-->

				<div if:true={finalStep} class="finalStep">
					Grazie ed arrivederci
				</div>
			</div>
		</div>

		<!-- BUTTON-->
		<div class="slds-p-around_medium topLightGrayBorder customWhiteBackground slds-clearfix">
			<div class="slds-align_absolute-center">
				<button class="containedButtonAlt containedButton-size cursorPointer uiButton contactSupport slds-m-horizontal_small" onclick={abortRequest}>
					{label.Button_Cancel}
				</button>

				<button if:true={showPrevButton} class="containedButtonAlt containedButton-size cursorPointer uiButton contactSupport slds-m-horizontal_small" onclick={goToPreviousStep}>{label.Button_Previous}</button>

				<button if:true={showNextButton} class="containedButtonAlt containedButton-size cursorPointer uiButton contactSupport slds-m-horizontal_small" onclick={goToNextStep}>{label.Button_Next}</button>

				<button if:true={showConfirmButton}
					class="containedButton containedButton-size slds-m-horizontal_small"
					onclick={handleSubmitRequest}>
					{label.ISSP_Confirm}
				</button>
			</div>
	</div>
</template>