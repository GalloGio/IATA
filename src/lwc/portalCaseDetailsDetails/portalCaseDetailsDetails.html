<template>
    <div class="customCard">
        <template if:true={loading}>
            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
        </template>
        <template if:false={loading}>

            <!-- Case details accordion -->
            <div>
                <div class="slds-p-around_medium customCardTitleBox cursorPointer" onclick={toggleCaseDetailsSection}>
                    <lightning-icon data-caseicon class="darkBlueIcon arrowExpanded" if:false={showCaseDetailsSection}
                        icon-name="utility:chevronright" size="xx-small"></lightning-icon>
                    <span class="slds-p-left_large">{labels.CaseDetails}</span>
                </div>
                <div data-casediv class="slds-p-around_medium">
                    <div class="slds-grid slds-wrap slds-p-horizontal_large">

                        <!-- ROW 1 -->
                        <div if:true={hasRegion}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">{labels.Region__c}</span><br />
                            <span>{caseDetails.Region__c}</span>
                        </div>
                        <div if:true={hasCountryConcerned}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">{labels.Country_concerned__c}</span><br />
                            <span>{caseDetails.Country_concerned_by_the_query__c}</span>
                        </div>

                        <!-- ROW 2 -->
                        <div if:true={hasAccountConcerned}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">{labels.RelatedAccount}</span><br />
                            <span>{caseDetails.Account_Concerned__r.IATACode__c}</span>
                        </div>
                        <div if:true={hasTypeOfCasePortal}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">{labels.Type_of_case_Portal__c}</span><br />
                            <span>{caseDetails.Type_of_case_Portal__c}</span>
                        </div>

                        <!-- ROW 3 -->
                        <div if:true={hasDescription}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">{labels.Description}</span><br />
                            <span>{caseDetails.Description}</span>
                        </div>



                        <!-- ROW 5 -->
                        <div if:true={hasAccount}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">Account Name</span><br />
                            <span if:true={optionBuilder}>
                                <span if:true={optionBuilder.isAdmin} onclick={openCompanyProfile} class="linkColor">
                                    {caseDetails.Account.Name}
                                </span>
                                <span if:false={optionBuilder.isAdmin}>
                                    {caseDetails.Account.Name}
                                </span>
                            </span>
                        </div>

                        <!-- ROW 6 -->
                        <div if:true={hasContact}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-2 slds-p-around_medium">
                            <span class="grey">Contact Name</span><br />
                            <span if:true={optionBuilder}>
                                <span if:true={optionBuilder.isAdmin} onclick={openCompanyProfileContactTab}
                                    class="linkColor">
                                    <span>{caseDetails.Contact.FirstName} {caseDetails.Contact.LastName}</span>
                                </span>
                                <span if:false={optionBuilder.isAdmin}>
                                    <span>{caseDetails.Contact.FirstName} {caseDetails.Contact.LastName}</span>
                                </span>
                            </span>
                        </div>
			<!-- ROW 5 -->
                        <div if:true={hasSurveyLink}
                             class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1 slds-p-around_medium">
                            <span class="grey">{labels.ISSP_Survey}</span><br />
                            <a class="text-blue" href={surveyLink} target="_blank">{labels.Open}</a>
                        </div>

                        <!-- ROW 7 Display PDF -->
                        <div if:true={getDisplayPDF}
                            class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1 slds-p-around_medium">
                            <img src={pdfImage}>

                            <span if:true={getPDF1}>
                                <a class="linkColor" href={getPDFLink1} target="_new">
                                    {labels.ISSP_AMS_Download_PDF_Copy} </a>
                            </span>

                            <span if:true={getPDF2_3}>
                                <a class="linkColor" href={getPDFLink2_3} target="_new">
                                    {labels.ISSP_AMS_Download_PDF_NOC} </a>
                            </span>

                            <span if:true={getPDF4}>
                                <a class="linkColor" href={getPDFLink4} target="_new">
                                    {labels.ISSP_AMS_Download_PDF_Copy} </a>
                            </span>

                            <span if:true={getPDF5}>
                                <a class="linkColor" href={getPDFLink5} target="_new">
                                    {labels.ISSP_AMS_Download_PDF_Copy} </a>
                            </span>

                        </div>

                    </div>
                </div>
            </div>


            <!-- Documents accordion -->
            <div class="topLightGrayBorder">
                <div  class="slds-p-around_medium customCardTitleBox cursorPointer"
                    onclick={toggleDocumentsDetailsSection}>                  
                    <lightning-icon data-docicon class="darkBlueIcon" if:false={showDocumentsSection}
                        icon-name="utility:chevronright" size="xx-small"></lightning-icon>
                    <span class="slds-p-left_large">{labels.DocumentsLabel}</span><span if:true={showNrDocs}>({nrDocs})</span>
                </div>
                <div data-docdiv class="slds-p-around_medium slds-medium-size_1-of-1 slds-m-around-large collapsed" style="transition: height 0.8s ease;">
                    <c-attachment-list-cmp shownorecords=false parentid={caseId} isportal=true
                        show-modal={showAddDocsModal} 
                        no-attachment-msg={labels.AddDocumentsMsg} 
                        onupdateddocs={updateNdocs}
                        accepted-formats={acceptedFormats}>
                    </c-attachment-list-cmp>

                </div>
            </div>

        </template>
    </div>

</template>