<template>

    <c-portal-custom-card-container>

        <span slot="cardTitle">
            Favorite Services
        </span>

        <span slot="cardButton">
            <lightning-button variant="base" 
                label={label.CSP_SeeAll}
                title={label.CSP_SeeAll}
                icon-name="utility:forward" 
                icon-position="right" 
                onclick={goToServices}
                class="slds-p-right_small blueCustomButtonLink">
            </lightning-button>
        </span>

        <span slot="cardBody">

            <div>
                <div class="backgroundInverse" if:true={isLoaded}>
                    <lightning-spinner alternative-text="Loading"></lightning-spinner>
                </div>
                <div class="slds-grid">
                    <div class="slds-col slds-size_4-of-5">
                        <div class="slds-grid">
                            <template for:each={favoriteServices} for:item='favoriteServicesRow'>
                                <div class="slds-col slds-size_1-of-3" key={favoriteServicesRow}>
                                    <template for:each={favoriteServicesRow} for:item="favoriteServicesTile">
                                        <article class={favoriteServicesTile.myclass} key={favoriteServicesTile.id}
                                            onclick={redirect} data-appurl={favoriteServicesTile.Application_Start_URL__c}
                                            data-requestable={favoriteServicesTile.Portal_Application__r.Requestable__c}
                                            data-appfullurl={favoriteServicesTile.Portal_Application__r.Application_URL__c}
                                            data-openwindow={favoriteServicesTile.Portal_Application__r.New_Window__c}
                                            data-recordid={favoriteServicesTile.Id} >
                                            <div class="noPointerEvents">
                                                <div>
                                                    <lightning-icon icon-name="utility:forward_up" size="xx-small"
                                                        slot="actions" class={favoriteServicesTile.extIconClass}>
                                                    </lightning-icon>
                                                </div>
                                                <div class="tileText">
                                                    <h1>
                                                        {favoriteServicesTile.Portal_Application__r.Name}
                                                    </h1>
                                                </div>
                                            </div>
                                        </article>
                                    </template>
                                </div>
                            </template>
                        </div>
                    </div>
                    <div class="slds-col slds-size_1-of-5 slds-p-around_small">
                        <div class="slds-card__body slds-card__body_inner bigTile aroundLightGrayBorder">
                            <div class="cursorPointer slds-illustration slds-illustration_small " onclick={goToAvailableServices}>
                                <div class="slds-align_absolute-center">
                                    <lightning-icon icon-name="action:new" size="small" class="tileNewServiceIcon">
                                    </lightning-icon>
                                </div>
                                <div class="slds-align_absolute-center">
                                    <h3 class="slds-text-heading_small tileNewServiceText">
                                        {label.csp_Request_New_Service}
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <lightning-layout vertical-align="center" horizontal-align="center" if:true={showPagination}>
                    <lightning-layout-item padding="around-small">
                        <lightning-icon icon-name="utility:chevronleft" onclick={handlePrevious} size="small"
                            style="cursor:pointer" variant="light"></lightning-icon>
                    </lightning-layout-item>
                    <template for:each={sliderIcons} for:item="sliderIcon">
                        <lightning-layout-item padding="around-small" key={sliderIcon.id}>
                            <lightning-icon icon-name="utility:record" size="xx-small" variant={sliderIcon.variant}>
                            </lightning-icon>
                        </lightning-layout-item>
                    </template>
                    <lightning-layout-item padding="around-small">
                        <lightning-icon icon-name="utility:chevronright" size="small" onclick={handleNext} variant="light"
                            style="cursor:pointer">
                        </lightning-icon>
                    </lightning-layout-item>
                </lightning-layout>
            </div>

        </span>

    </c-portal-custom-card-container>

</template>