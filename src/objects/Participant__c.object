<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Follow</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <content>NewParticipantByEmail</content>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Visualforce</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>Junction object. Used by IDFS ISS to manage the APJC participants per APJC (specific object)</description>
    <enableActivities>true</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableEnhancedLookup>true</enableEnhancedLookup>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <fields>
        <fullName>Account__c</fullName>
        <externalId>false</externalId>
        <formula>IF( NOT(ISBLANK(Representing__c )), Representing__r.Name ,  Head_Quartier__r.Name )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Account</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Contact__c</fullName>
        <externalId>false</externalId>
        <label>Contact</label>
        <lookupFilter>
            <active>false</active>
            <booleanFilter>(1 AND 2) OR 3 OR (4 AND 5 AND 2)</booleanFilter>
            <errorMessage>The new participant is not related to an Airline or an Agency or this group does not allow participants from Agencies</errorMessage>
            <filterItems>
                <field>Contact.Account.RecordTypeId</field>
                <operation>equals</operation>
                <value>Agency</value>
            </filterItems>
            <filterItems>
                <field>$Source.Local_Group_Type__c</field>
                <operation>equals</operation>
                <value>ALWG, APJC, APJC / FAG, CAPJC, CEC, CGA, EACP JC, JALWG</value>
            </filterItems>
            <filterItems>
                <field>Contact.Account.RecordTypeId</field>
                <operation>equals</operation>
                <value>Airline Headquarters, Airline Branch</value>
            </filterItems>
            <filterItems>
                <field>Contact.Account.Sector__c</field>
                <operation>equals</operation>
                <value>Association</value>
            </filterItems>
            <filterItems>
                <field>Contact.Account.RecordTypeId</field>
                <operation>equals</operation>
                <value>Others</value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Contact</referenceTo>
        <relationshipLabel>Participants</relationshipLabel>
        <relationshipName>APJC_Participants</relationshipName>
        <relationshipOrder>1</relationshipOrder>
        <reparentableMasterDetail>false</reparentableMasterDetail>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Country__c</fullName>
        <externalId>false</externalId>
        <formula>Contact__r.Account.IATA_ISO_Country__r.Name</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Participant Office</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Group_RecordType__c</fullName>
        <externalId>false</externalId>
        <formula>Local_Governance__r.RecordType.DeveloperName</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Group RecordType</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Head_Quartier__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Main Account</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Participants</relationshipLabel>
        <relationshipName>Participants</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Local_Governance__c</fullName>
        <externalId>false</externalId>
        <label>Local Governance</label>
        <referenceTo>LocalGovernance__c</referenceTo>
        <relationshipLabel>Participants</relationshipLabel>
        <relationshipName>LocalGovernance_Participants</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>false</reparentableMasterDetail>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Local_Group_Type__c</fullName>
        <externalId>false</externalId>
        <label>Local Group Type</label>
        <picklist>
            <picklistValues>
                <fullName>ALWG</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>APJC</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>APJC / FAG</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>CAPJC</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>CEC</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>CGA</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>EACP JC</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>ICAP</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>JALWG</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>LCAG-C</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>LCAG-P</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>LCAG-P / Credit Card WG</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Main_Account__c</fullName>
        <externalId>false</externalId>
        <formula>IF(NOT(ISBLANK(Head_Quartier__c)),  Head_Quartier__r.Name  ,   Contact__r.Account.Name   )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Main Account</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Participant_Type__c</fullName>
        <externalId>false</externalId>
        <label>Participant Role</label>
        <picklist>
            <picklistValues>
                <fullName>1 Chair</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>1 Co-Chair</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>2 Vice-Chair</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>3 Accredited Representative</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>4 Accredited Alternate</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>5 Representative</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>6 Alternate</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>7 Observer</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Representing__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Representing</label>
        <lookupFilter>
            <active>true</active>
            <filterItems>
                <field>Account.RecordTypeId</field>
                <operation>equals</operation>
                <value>Airline Headquarters, IATA Country Office, Operator, Agency, General Sales Agent Headquarters, Others, Standard Account</value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Participants (Representing)</relationshipLabel>
        <relationshipName>Participants1</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Title__c</fullName>
        <externalId>false</externalId>
        <formula>Contact__r.Title</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>This field takes the Title from the Contact record. If it is blank, you will need to edit the Contact record and add the Title there, else you cannot save this APJC Participant.</inlineHelpText>
        <label>Title</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <label>Participant</label>
    <nameField>
        <displayFormat>APJC Participant - {0000}</displayFormat>
        <label>Participant Number</label>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Participants</pluralLabel>
    <searchLayouts/>
    <sharingModel>ControlledByParent</sharingModel>
    <validationRules>
        <fullName>Cannot_change_if_inactive_group</fullName>
        <active>true</active>
        <description>It&apos; s not possible to change anything if the participant is related to a local group inactive</description>
        <errorConditionFormula>AND(
 Local_Governance__r.Active__c = false,
 
 OR(
  ISNEW(),
  ISCHANGED(Contact__c),
  ISCHANGED(Local_Governance__c ),
  ISCHANGED(Participant_Type__c )
 )
)</errorConditionFormula>
        <errorMessage>It&apos; s not possible to insert a new pariticipant or change  the existing one if the participant is related to an inactive local group.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cant_add_before_approval</fullName>
        <active>true</active>
        <description>Participants cannot be added before a Reg/Div group has been approved</description>
        <errorConditionFormula>Local_Governance__r.RecordType.DeveloperName  =    &apos;Draft_Reg_Div_Group&apos;</errorConditionFormula>
        <errorMessage>Participants cannot be added before the group has been approved</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Contact_should_have_value_in_main_fields</fullName>
        <active>true</active>
        <description>The contact chosen must have a value for the following fields:
•	First Name
•	Last Name
•	Title
•	Email
•	Account Name
•	Country</description>
        <errorConditionFormula>AND(
 OR(Local_Governance__r.RecordType.DeveloperName = &quot;Local_Groups&quot;,
    Local_Governance__r.RecordType.DeveloperName = &quot;Reg_Div_Groups&quot;),
 OR(
  ISBLANK(Contact__r.FirstName),
  ISBLANK(Contact__r.LastName),
  ISBLANK(Contact__r.Title),
  ISBLANK(Contact__r.Email),
  ISBLANK(Contact__r.AccountId),
  ISBLANK(Contact__r.Account.IATA_ISO_Country__c)
 )
)</errorConditionFormula>
        <errorMessage>The contact chosen must have a value for the following fields:
First Name, Last Name, Title, Email and Account Name. Please complete these information and try again.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Group_Type</fullName>
        <active>true</active>
        <description>Verify the account type for the participiant</description>
        <errorConditionFormula>AND(
AND(
AND(
NOT(AND( Contact__r.Account.RecordType.DeveloperName = &quot;IATA_Agency&quot;,
OR(ISPICKVAL(Local_Group_Type__c, &quot;ALWG&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;APJC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;APJC / FAG&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;CAPJC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;CEC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;CGA&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;EACP JC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;JALWG&quot;))
)),
NOT(OR(Contact__r.Account.RecordType.DeveloperName = &quot;IATA_Airline&quot;,
Contact__r.Account.RecordType.DeveloperName = &quot;IATA_Airline_BR&quot;)
)
),
NOT(AND( ISPICKVAL(Contact__r.Account.Sector__c,&quot;Association&quot;),
Contact__r.Account.RecordType.DeveloperName = &quot;Standard_Account&quot;,
OR(ISPICKVAL(Local_Group_Type__c, &quot;ALWG&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;APJC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;APJC / FAG&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;CAPJC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;CEC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;CGA&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;EACP JC&quot;),
ISPICKVAL(Local_Group_Type__c, &quot;JALWG&quot;)
)
))
),
Group_RecordType__c = &quot;Local_Groups&quot;
)</errorConditionFormula>
        <errorMessage>The new participant is not related to an Airline or an Agency or this group does not allow participants from Agencies</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Title_under_contact_is_blank</fullName>
        <active>true</active>
        <description>Title_under_contact_is_blank</description>
        <errorConditionFormula>AND(
  ISBLANK(Contact__r.Title),
  ISBLANK(Local_Governance__r.RecordTypeId)
)</errorConditionFormula>
        <errorMessage>The Title in the Contact is empty and you therefore cannot save this record. First edit the Contact record and add the Title, then create this APJC Participant record.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Verified_Account</fullName>
        <active>false</active>
        <description>The Account needs to be verified</description>
        <errorConditionFormula>OR( ISPICKVAL (Contact__r.Account.ACLI_Status__c,&apos;Inactive company&apos;), 
NOT(OR( Contact__r.Account.RecordType.DeveloperName = &quot;IATA_Airline&quot; || Contact__r.Account.RecordType.DeveloperName = &quot;IATA_Agency&quot; || Contact__r.Account.RecordType.DeveloperName = &quot;IATA_Airline_BR&quot; || Contact__r.Account.RecordType.DeveloperName = &quot;IATA_GSA&quot;)) 
)</errorConditionFormula>
        <errorMessage>The Participant must come from a verified Account</errorMessage>
    </validationRules>
</CustomObject>
