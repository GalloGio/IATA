<aura:component >
  <aura:attribute name="bma" type="Objective__c" default="{ 'sobjectType': 'Objective__c'}" />
  <aura:attribute name="comment" type="Comment__c" default="{ 'sobjectType': 'Comment__c'}" />
  <aura:attribute name="displayType" type="String" default="Account"/><!-- Variable that controlls what is displayed: "Account" or "Division" -->
  <aura:attribute name="isEditMode" type="Boolean" default="false"/>
  <aura:attribute name="index" type="Integer" />

  <aura:registerEvent name="updateBMA" type="c:AMP_UpdateBMA"/>
  <aura:registerEvent name="deleteBMA" type="c:AMP_DeleteBMA"/>
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:handler name="editMenuClick" event="c:AMP_EditMenuItemClick" action="{!c.switchToEditMode}"/>
  <aura:handler name="deleteMenuClick" event="c:AMP_DeleteMenuItemClick" action="{!c.deleteItem}"/>

  <tr>

      <aura:if isTrue="{!v.isEditMode}">
        <td>
          <button class="slds-button slds-button--icon-border slds-button--icon-x-small" onclick="{!c.cancelEditMode}">
              <c:svg xlinkHref="{!$Resource.SLDS103 + '/assets/icons/utility-sprite/svg/symbols.svg#close'}" class="slds-button__icon" />
              <span class="slds-assistive-text">Cancel</span>
          </button>

          <button class="slds-button slds-button--icon-border slds-button--icon-x-small" onclick="{!c.clickSaveComment}">
              <c:svg xlinkHref="{!$Resource.SLDS103 + '/assets/icons/utility-sprite/svg/symbols.svg#check'}" class="slds-button__icon" />
              <span class="slds-assistive-text">Save</span>
          </button>
        </td>
        <td><ui:outputText value="{!v.bma.Name}"/></td>
        <!-- <td><ui:inputText value="{!v.bma.Details__c}" class="slds-truncate" aura:id="details"/></td> -->
        <td><ui:outputText value="{!v.bma.Type__c}"/></td>
        <td>
          <ui:inputSelect aura:id="accountStatus"><!--value="{!v.issue.AM_Level_of_importance__c}"-->
            <ui:inputSelectOption value="Not Started" text="Not Started"/>
            <ui:inputSelectOption value="In Progress" text="In Progress"/>
            <ui:inputSelectOption value="Completed" text="Completed"/>
            <ui:inputSelectOption value="On Hold" text="On Hold"/>
          </ui:inputSelect>
        </td>
        <td><ui:inputTextArea value="{!v.bma.Comments__r[0].Detail__c}"/></td>

        <aura:set attribute="else">
          <aura:renderIf isTrue="{!v.displayType=='Division'}">
            <td><c:AMP_EditSaveMenu /></td>
          </aura:renderIf>
          <td><ui:outputText value="{!v.bma.Name}"/></td>
          <aura:renderIf isTrue="{!v.displayType=='Account'}">
            <td>
              <ui:outputRichText value="{!v.bma.Details__c}" class="slds-truncate" aura:id="details"/>
              <ui:button aura:id="show-more-button" label="show more" press="{!c.showMore}"/>
              <ui:button aura:id="show-less-button" label="show less" press="{!c.showLess}" class="hidden"/>
            </td>
          </aura:renderIf>
          <td><ui:outputText value="{!v.bma.Type__c}"/></td>
          <aura:renderIf isTrue="{!v.displayType=='Division'}">
            <td><ui:outputText value="{!v.bma.Comments__r[0].Status__c}"/></td>
          </aura:renderIf>
          <td><ui:outputText value="{!v.bma.Comments__r[0].Detail__c}"/></td>

        </aura:set>
      </aura:if>



  </tr>
</aura:component>