<aura:component controller="OneId_RegistrationProcessController">

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:registerEvent name="StepCompletionNotification" type="c:OneId_StepCompletion_EVT"/>
    
    <aura:attribute name="showCaptcha" type="Boolean" default="true" />
    <aura:attribute name="captchaOK" type="Boolean" default="false"/>
    <aura:attribute name="vfHost" type="String" default=""/>
    <aura:attribute name="commName" type="String" default=""/>
    <aura:attribute name="language" type="string" default=""/>
    <aura:attribute name="captchaIframeHeight" type="String"/>
    <aura:attribute name="userCountry" type="String"/>
    <aura:attribute name="Terms" type="Boolean" />
    <!-- <aura:attribute name="isUserCanBeCreated" type="Boolean" default="false"/> -->
    
    <aura:attribute name="contact" type="Contact" default="{ 'sobjectType': 'Contact' }" />
    
    <div class="slds-grid slds-gutters slds-wrap ">
        <div class="slds-col slds-col--padded">
            <div class="slds-size--1-of-1 slds-m-bottom_large ">
                <label class="slds-form-element__label"><abbr class="slds-required" title="required">*</abbr>Email</label>
                <ui:inputEmail aura:id="email" placeholder="test@email.com" value="{!v.contact.Email}" class="slds-input" required="true" />
            </div>
            
            <div class="slds-size--1-of-1 slds-m-bottom_medium" style="{!v.showCaptcha ? '' : 'display:none'}">
                <div class="form-group">
                    <div class="captcha item" >
                        <iframe aura:id="vfFrame" src="{!v.vfHost + '/'+v.commName+'/OneIdVfCAPTCHA?language=' + v.language}" class="iframe captchaIframe" height="60" style="{!v.captchaIframeHeight}" scrolling="no" frameborder="0" width="100%" allowtransparency="true" />
                        <div aura:id="captchaError" class="captchaError hide">{!$Label.c.OneId_Please_check_reCaptcha}</div>
                    </div>
                </div>
            </div>
            
            <div class="slds-size--1-of-1">
                <ui:inputCheckbox value="{!v.Terms}" aura:id="termsaccepted" class="uiInput uiInputCheckbox uiInput--default uiInput--checkbox ckb" labelClass="slds-form-element__label" required="true" click="{!c.checkTerms}" />
                <a class="terms" href="http://www.iata.org/customer-portal/Pages/terms.aspx" target="_blank">{!$Label.c.ISSP_Registration_acceptGeneralConditions}</a>
            </div>
        </div>
    </div>
    <div aura:id="loading" class="slds-hide">
        <lightning:spinner />
    </div>
</aura:component>