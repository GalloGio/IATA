<aura:component >
  <aura:attribute name="activity" type="Objective__c"  />
  <aura:attribute name="index" type="Integer"  />
  <aura:attribute name="isEditMode" type="Boolean" default="false"/>
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:handler name="editMenuClick" event="c:AMP_EditMenuItemClick" action="{!c.switchToEditMode}"/>
  <aura:handler name="deleteMenuClick" event="c:AMP_DeleteMenuItemClick" action="{!c.deleteItem}"/>

  <aura:handler name="updateLookupIdEvent" event="c:UpdateLookupId" action="{!c.handleAccountIssueIdUpdate}"/>
  <aura:handler name="clearLookupIdEvent" event="c:ClearLookupId" action="{!c.handleAccountIssueIdClear}"/>

  <aura:registerEvent name="updateActivity" type="c:AMP_UpdateIssueOrPriority"/>
  <aura:registerEvent name="deleteActivity" type="c:AMP_UpdateIssueOrPriority"/>
  <aura:registerEvent name="showMilestones" type="c:AMP_UpdateIssueOrPriority"/>

  <!-- <tr> -->
    <aura:if isTrue="{!v.isEditMode}">
      <td>
        <button class="slds-button slds-button--icon-border slds-button--icon-medium" onclick="{!c.cancelEditMode}">
            <c:svg xlinkHref="{!$Resource.SLDS103 + '/assets/icons/utility-sprite/svg/symbols.svg#close'}" class="slds-button__icon" />
            <span class="slds-assistive-text">Cancel</span>
        </button>

        <button class="slds-button slds-button--icon-border slds-button--icon-medium" onclick="{!c.clickSaveActivity}">
            <c:svg xlinkHref="{!$Resource.SLDS103 + '/assets/icons/utility-sprite/svg/symbols.svg#check'}" class="slds-button__icon" />
            <span class="slds-assistive-text">Save</span>
        </button>
        <!-- <ui:button label="Show Milestones" press="{!c.showMilestones}" /> -->
      </td>
      <td><ui:inputText value="{!v.activity.Name}" /></td>
      <td><ui:inputTextArea value="{!v.activity.Details__c}" class="longTextArea" rows="5"/></td>
      <td>
        <ui:inputSelect aura:id="status">
          <ui:inputSelectOption value="On Track" text="On Track"/>
          <ui:inputSelectOption value="On Hold" text="On Hold"/>
          <ui:inputSelectOption value="Delayed" text="Delayed"/>
          <ui:inputSelectOption value="Delivered" text="Delivered"/>
          <ui:inputSelectOption value="Cancelled" text="Cancelled"/>
        </ui:inputSelect>
      </td>
      <td>
        <!-- <ui:inputText value="{!v.activity.Account_Issue_or_Priority__c}" /> -->
        <c:LookupSObject aura:id="accountIssueLookup"
          preselectedSearchString="{!v.activity.Account_Issue_or_Priority__r.Name}"
          label="Objective"
          pluralLabel="Objectives"
          sObjectAPIName="Objective__c"
          listIconSVGPath="/resource/SLDS102/assets/icons/standard-sprite/svg/symbols.svg#drafts"
          listIconClass="slds-icon-standard-account" />
      </td>
      <td><ui:inputTextArea value="{!v.activity.Benefits_to_Account__c}" class="longTextArea" rows="5"/></td>
      <td><ui:inputDate value="{!v.activity.Deadline__c}" aura:id="deadline"  /></td>

      <aura:set attribute="else">
      <td>
        <c:AMP_EditSaveMenu />

        <ui:button label="Milestones" press="{!c.showMilestones}" />
      </td>
      <td><ui:outputText value="{!v.activity.Name}" class="slds-truncate"/></td>
      <td>
        <ui:outputRichText value="{!v.activity.Details__c}" class="slds-truncate" aura:id="details"/>
        <ui:button aura:id="show-more-button" label="show more" press="{!c.showMore}"/>
        <ui:button aura:id="show-less-button" label="show less" press="{!c.showLess}" class="hidden"/>
      </td>
      <td><ui:outputText value="{!v.activity.Status__c}" /></td>
      <td><ui:outputText value="{!v.activity.Account_Issue_or_Priority__r.Name}" /></td>
      <td>
        <ui:outputRichText value="{!v.activity.Benefits_to_Account__c}" class="slds-truncate" aura:id="benefits"/>
        <ui:button aura:id="show-more-benefits-button" label="show more" press="{!c.showMoreBenefits}"/>
        <ui:button aura:id="show-less-benefits-button" label="show less" press="{!c.showLessBenefits}" class="hidden"/>
      </td>
      <td><ui:outputDate value="{!v.activity.Deadline__c}" /></td>
    </aura:set>
  </aura:if>
  <!-- </tr> -->
</aura:component>