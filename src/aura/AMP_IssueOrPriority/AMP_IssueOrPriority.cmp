<aura:component controller="AMP_IssuesAndPrioritiesExtension">

  <aura:attribute name="issue" type="Objective__c" />
  <aura:attribute name="relatedContact" type="Contact" default="{ 'sobjectType': 'Contact'}" />
  <aura:attribute name="index" type="Integer" />

  <aura:registerEvent name="updateIssue" type="c:AMP_UpdateIssueOrPriority"/>
  <aura:registerEvent name="deleteIssue" type="c:AMP_DeleteIssueOrPriority"/>

  <aura:handler name="updateLookupIdEvent" event="c:UpdateLookupId" action="{!c.handleSourceIdUpdate}"/>
  <aura:handler name="clearLookupIdEvent" event="c:ClearLookupId" action="{!c.handleSourceIdClear}"/>

  <aura:handler name="editMenuClick" event="c:AMP_EditMenuItemClick" action="{!c.switchToEditMode}"/>
  <aura:handler name="deleteMenuClick" event="c:AMP_DeleteMenuItemClick" action="{!c.deleteItem}"/>
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <ltng:require styles="/resource/SLDS102/assets/styles/salesforce-lightning-design-system-ltng.css" />
  <ltng:require scripts="{!join(',',
    $Resource.jQuery172)}"  afterScriptsLoaded="{!c.jsLoaded}" />

    <!-- <tr> -->
      <td  >

        <aura:renderIf isTrue="{!v.editMode}">

          <button class="slds-button slds-button--icon-border slds-button--icon-small" onclick="{!c.cancelEditMode}">
              <c:svg xlinkHref="{!$Resource.SLDS103 + '/assets/icons/utility-sprite/svg/symbols.svg#close'}" class="slds-button__icon" />
              <span class="slds-assistive-text">Cancel</span>
          </button>

          <button class="slds-button slds-button--icon-border slds-button--icon-small" onclick="{!c.clickSaveIssue}">
              <c:svg xlinkHref="{!$Resource.SLDS103 + '/assets/icons/utility-sprite/svg/symbols.svg#check'}" class="slds-button__icon" />
              <span class="slds-assistive-text">Save</span>
          </button>
        </aura:renderIf>
        <aura:renderIf isTrue="{!!v.editMode}">
          <c:AMP_EditSaveMenu />


        </aura:renderIf>
      </td>
      <aura:renderIf isTrue="{!v.editMode }">
        <td><ui:inputText value="{!v.issue.Name}"/></td>
        <td>
          <c:LookupSObject preselectedSearchString="Source"
            label="Contact" pluralLabel="Contacts" sObjectAPIName="contact"
            listIconSVGPath="/resource/SLDS102/assets/icons/standard-sprite/svg/symbols.svg#contact"
            listIconClass="slds-icon-standard-contact" />
        </td>
        <td><ui:inputTextArea value="{!v.issue.Details__c}" class="longTextArea" /></td>
        <td>
          <ui:inputSelect aura:id="levelOfImportance"><!--value="{!v.issue.AM_Level_of_importance__c}"-->
            <ui:inputSelectOption value="high" text="high"/>
            <ui:inputSelectOption value="medium" text="medium"/>
            <ui:inputSelectOption value="low" text="low"/>
          </ui:inputSelect>
        </td>

        <!-- <td><ui:inputCheckbox value="{!v.issue.AM_Can_IATA_support_the_airline__c}" /></td> -->
        <td>
          <ui:inputSelect aura:id="status"><!-- value="{!v.issue.Status__c}" -->
            <ui:inputSelectOption value="Open" text="Open"/>
            <ui:inputSelectOption value="Resolved" text="Resolved"/>
            <ui:inputSelectOption value="Closed without Intervention" text="Closed without Intervention"/>
            <ui:inputSelectOption value="Out of Scope" text="Out of Scope"/>
            <ui:inputSelectOption value="Active" text="Active"/>
          </ui:inputSelect>

        </td>

        <td><ui:inputCheckbox value="{!v.issue.AM_Global__c}"/></td>
        <td><ui:inputCheckbox value="{!v.issue.AM_Regional__c}"/></td>
        <td><ui:inputCheckbox value="{!v.issue.AM_Local__c}"/></td>
        <td><ui:inputCheckbox value="{!v.issue.AM_Issue_with_IATA__c}"/></td>
        <td><ui:inputCheckbox value="{!v.issue.AM_Public__c}"/></td>
      </aura:renderIf>

      <aura:renderIf isTrue="{!!v.editMode}">
        <td><ui:outputText value="{!v.issue.Name}"/></td>
        <td><ui:outputText value="{!v.issue.AM_Source__r.Name}"/></td>
        <td>
          <ui:outputRichText value="{!v.issue.Details__c}" class="slds-truncate" aura:id="details"/>
          <ui:button aura:id="show-more-button" label="show more" press="{!c.showMore}"/>
          <ui:button aura:id="show-less-button" label="show less" press="{!c.showLess}" class="hidden"/>
        </td>
        <td><ui:outputText value="{!v.issue.AM_Level_of_importance__c}"/></td>
        <!-- <td><ui:outputCheckbox value="{!v.issue.AM_Can_IATA_support_the_airline__c}" /></td> -->
        <td><ui:outputText value="{!v.issue.Status__c}"/></td>
        <td><ui:outputCheckbox value="{!v.issue.AM_Global__c}"/></td>
        <td><ui:outputCheckbox value="{!v.issue.AM_Regional__c}"/></td>
        <td><ui:outputCheckbox value="{!v.issue.AM_Local__c}"/></td>
        <td><ui:outputCheckbox value="{!v.issue.AM_Issue_with_IATA__c}"/></td>
        <td><ui:outputCheckbox value="{!v.issue.AM_Public__c}"/></td>
      </aura:renderIf>
    <!-- </tr> -->
</aura:component>
