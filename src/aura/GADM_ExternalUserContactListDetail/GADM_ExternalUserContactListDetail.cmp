<aura:component controller="GADM_ExternalUserContactDetail_CTRL" description="GADM_ExternalUserContactListDetail">

    <!--USER INFORMATION-->
    <aura:attribute name="selectedUserInfo" type="Object"/>
    <aura:attribute name="currentUserInfo" type="Object"/>
    <aura:attribute name="isPowerUser" type="Boolean"/>
    <aura:attribute name="isSuperUser" type="Boolean"/>
    <aura:attribute name="isGadmUser" type="Boolean"/>
    <aura:attribute name="businessUnits" type="List"/>
    <aura:attribute name="currentUserIsSelectedUser" type="Boolean" default="false"/>

    <!--TABLE DATA-->
    <aura:attribute name="copyData" type="String" default=""/>
    <aura:attribute name="dataRoles" type="List" default="[]"/>
    <aura:attribute name="dataBusinessUnits" type="List" default="[]"/>
    <aura:attribute name="dataActors" type="List" default="[]"/>

    <!--RELOAD LIST IF DATA WAS MODIFIED-->
    <aura:attribute name="dataModified" type="Boolean" default="false"/>

    <!--SHOW PROPERTIES-->
    <aura:attribute name="showTable" type="Boolean" default="false"/>
    <aura:attribute name="showSpinner" type="Boolean" default="false"/>

    <!--BACK EVENT-->
    <aura:registerEvent name="Back_EVT" type="c:GADM_ExternalUserContactList_EVT"/>

    <!--HANDLER-->
    <aura:handler name="init" value="{!this}" action="{! c.doInit}"/>


    <div class="page_container">

        <aura:if isTrue="{! v.showTable}">

            <!--USER INFORMATION-->
            <div class="slds-p-bottom_large">

                <h2 class="slds-p-bottom_x-large">{! v.selectedUserInfo.con.Salutation}&nbsp; {! v.selectedUserInfo.con.LastName}, {! v.selectedUserInfo.con.FirstName} </h2>

                <div class="slds-p-bottom_xx_small">
                    <label class="slds-form-element__label" >EMAIL</label>
                     <div class="slds-p-vertical_x-small slds-p-horizontal_x-small">{!v.selectedUserInfo.con.Email}</div>          
                </div>

                <div class="slds-p-bottom_xx_small">
                    <label class="slds-form-element__label" >PHONE</label>
                    <div class="slds-p-vertical_x-small slds-p-horizontal_x-small">{!v.selectedUserInfo.con.Phone}</div>                    
                </div>

                <div class="slds-p-bottom_small">
                    <label class="slds-form-element__label" >ACCOUNT</label>
                     <div class="slds-p-vertical_x-small slds-p-horizontal_x-small">{!v.selectedUserInfo.con.Account.Name}</div> 
                </div>

                <div class="slds-p-bottom_small">
                    <label class="slds-form-element__label" >IATA CODE</label>
                     <div class="slds-p-vertical_x-small slds-p-horizontal_x-small">{!v.selectedUserInfo.con.Account.IATACode__c}</div> 
                </div>

                <div class="">
                    <label class="slds-form-element__label" >REGION</label>
                     <div class="slds-p-vertical_x-small slds-p-horizontal_x-small">{!v.selectedUserInfo.con.Account.Region__c}</div> 
                </div>


            </div>


            <!--ROLES-->
            <div class="slds-p-bottom_large">

                <div class="slds-grid slds-wrap slds-p-bottom--large" >
                    <p>Roles:</p>
                    <aura:iteration items="{!v.dataRoles}" var="dataRole">
                        <div class="slds-size--1-of-1 slds-grid roleLine">
                            <div class="slds-col--padded slds-size--1-of-8"><lightning:input type="checkbox" checked="{!dataRole.value.isChecked}" disabled="{! !dataRole.value.isEditable}"/></div>
                            <div class="label slds-col--padded slds-size--7-of-8">{!dataRole.value.role.Name}</div>
                        </div>
                    </aura:iteration>
                </div>

            </div>

            <!--BUSINESS UNITS-->
            <div class="slds-p-bottom_large">

                <div class="slds-grid slds-wrap slds-p-bottom--large" >
                    <p>Business Units:</p>
                    <aura:iteration items="{!v.dataBusinessUnits}" var="dataBusinessUnit">
                        <div class="slds-size--1-of-1 slds-grid roleLine">
                            <div class="slds-col--padded slds-size--1-of-8"><lightning:input type="checkbox" checked="{!dataBusinessUnit.value.isChecked}" disabled="{! !dataBusinessUnit.value.isEditable}" /></div>
                            <div class="label slds-col--padded slds-size--7-of-8">{!dataBusinessUnit.value.businessUnit.Name}</div>
                        </div>
                    </aura:iteration>
                </div>

            </div>

            <!--ACCOUNTS-->
            <div class="slds-p-bottom_large">

                <div class="slds-grid slds-wrap slds-p-bottom--large" >
                    <p>Actors:</p>
                    <aura:iteration items="{!v.dataActors}" var="dataActor">
                        <div class="slds-size--1-of-1 slds-grid roleLine">
                            <div class="slds-col--padded slds-size--1-of-8"><lightning:input type="checkbox" checked="{!dataActor.value.isChecked}" disabled="{! !dataActor.value.isEditable}" /></div>
                            <div class="label slds-col--padded slds-size--7-of-8">{!dataActor.value.actor.Name}</div>
                        </div>
                    </aura:iteration>
                </div>

            </div>


            <!--SAVE & BACK BUTTONS-->
            <div  class="slds-grid slds-wrap">

                <!--SAVE BUTTON SHOW ONLY TO SUPER USER OR POWER USER-->
                <aura:if isTrue="{! !v.currentUserIsSelectedUser}">

                    <div class="slds-size--1-of-2 slds-p-right_small">
                        <button class="btn btn-primary btn-grey slds-float--right" onclick="{! c.save }">Save</button>
                    </div>

                </aura:if>


                <div class="{! !v.currentUserIsSelectedUser ? 'slds-size--1-of-2 slds-p-left_small':'slds-size--1-of-1 center'}">
                    <button class="btn btn-primary btn-grey " onclick="{! c.back }">Back</button>
                </div>

            </div>

        </aura:if>


        <!--SPINNER-->
        <aura:if isTrue="{! v.showSpinner}">
            <lightning:spinner alternativeText="Loading"/>
        </aura:if>



    </div>

</aura:component>